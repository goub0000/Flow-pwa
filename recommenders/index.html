<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n-title="page.recommenders.title">Flow ‚Äî Recommender Portal</title>
  <meta name="description" content="Submit and track recommendation letters securely for students applying through Flow." />
  <link rel="icon" href="/assets/img/logo.PNG" type="image/png" />
  <link rel="apple-touch-icon" href="/assets/img/logo.PNG" />
  <link rel="stylesheet" href="/assets/css/base.css" />
  <link rel="stylesheet" href="/assets/css/recommenders.css" />

  <!-- Minimal inline styles for toasts, modal & messaging layout -->
  <style>
    .toast-container{position:fixed;top:1rem;right:1rem;z-index:1100;display:flex;flex-direction:column;gap:.5rem}
    .toast{background:#111827;color:#fff;padding:.5rem .75rem;border-radius:.5rem;box-shadow:0 6px 20px rgba(0,0,0,.15);font-size:.9rem}

    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:1090}
    .modal-overlay--open{display:block}
    .modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:.75rem;box-shadow:0 20px 60px rgba(0,0,0,.25);width:min(720px,92vw);max-height:80vh;overflow:auto;display:none;z-index:1100}
    .modal--open{display:block}
    .modal__header{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:1px solid #eee}
    .modal__title{font-size:1rem;font-weight:600}
    .modal__body{padding:1rem}
    .modal__footer{padding:1rem;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:.5rem}
    .sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}

    /* Messaging layout */
    .messaging{display:grid;grid-template-columns:320px 1fr;gap:1rem}
    @media (max-width: 900px){ .messaging{grid-template-columns:1fr} }
    .messaging__sidebar{border:1px solid #e5e7eb;border-radius:.75rem;overflow:hidden;display:flex;flex-direction:column;max-height:70vh}
    .messaging__search{display:flex;gap:.5rem;padding:.5rem;border-bottom:1px solid #e5e7eb;align-items:center}
    .messaging__search input{flex:1}
    .thread-list{overflow:auto}
    .thread-item{display:flex;gap:.6rem;padding:.6rem .75rem;border-bottom:1px solid #f3f4f6;cursor:pointer;text-align:left;background:#fff;width:100%}
    .thread-item:hover{background:#f9fafb}
    .thread-item--active{background:#eef2ff}
    .thread-item__meta{display:flex;justify-content:space-between;gap:.5rem}
    .thread-item__title{font-weight:600}
    .thread-item__preview{color:#6b7280;font-size:.9rem}
    .thread-item__time{color:#6b7280;font-size:.75rem;white-space:nowrap}
    .thread-item__unread{background:#ef4444;color:#fff;border-radius:999px;padding:0 .35rem;font-size:.75rem;align-self:flex-start}

    .messaging__main{border:1px solid #e5e7eb;border-radius:.75rem;display:flex;flex-direction:column;min-height:50vh;max-height:70vh}
    .thread-header{display:flex;justify-content:space-between;align-items:center;padding:.75rem .9rem;border-bottom:1px solid #e5e7eb}
    .thread-meta{color:#6b7280;font-size:.9rem}
    .message-feed{flex:1;overflow:auto;padding:1rem;display:flex;flex-direction:column;gap:.5rem;background:#fafafa}
    .msg{max-width:75%;padding:.5rem .65rem;border-radius:.75rem;line-height:1.35;background:#fff;border:1px solid #e5e7eb;align-self:flex-start}
    .msg--me{background:#4f46e5;color:#fff;border-color:#4f46e5;align-self:flex-end}
    .msg__meta{display:block;font-size:.75rem;opacity:.85;margin-top:.25rem}
    .msg__attachments{margin-top:.35rem;display:flex;flex-wrap:wrap;gap:.35rem}
    .attach-pill{display:inline-flex;align-items:center;gap:.35rem;border:1px solid #e5e7eb;border-radius:999px;padding:.15rem .5rem;background:#fff;font-size:.85rem}
    .attach-pill svg{opacity:.75}

    .composer{display:flex;flex-direction:column;gap:.5rem;border-top:1px solid #e5e7eb;padding:.6rem .6rem}
    .composer__row{display:flex;gap:.5rem;align-items:center}
    .composer textarea{flex:1;resize:vertical;min-height:2.5rem}
    .composer--empty{padding:1rem;color:#6b7280;border-top:1px solid #e5e7eb}
    .composer__files{display:flex;flex-wrap:wrap;gap:.35rem}
    .chip{display:inline-flex;align-items:center;gap:.4rem;background:#eef2ff;border:1px solid #e5e7eb;border-radius:999px;padding:.15rem .5rem;font-size:.85rem}
    .chip__x{background:none;border:none;cursor:pointer;line-height:1;font-weight:700}

    .recipients-badge{display:inline-flex;gap:.35rem;flex-wrap:wrap}
    .recipient-chip{display:inline-flex;align-items:center;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:999px;padding:.1rem .45rem;font-size:.8rem}
    .subnav__badge{background:#ef4444;color:#fff;border-radius:999px;padding:.05rem .4rem;font-size:.75rem;margin-left:.35rem}
  </style>
</head>
<body>
  <!-- Skip Link -->
  <a href="#main" class="skip-link">Skip to content</a>

  <!-- Toasts -->
  <div id="toast-container" class="toast-container" aria-live="polite"></div>

  <!-- Header -->
  <header class="header" role="banner" aria-label="Site header">
    <div class="container header__inner">
      <a class="brand" href="/" aria-label="Flow home">
        <img src="/assets/img/logo.PNG" class="brand__logo" alt="Flow logo" width="40" height="40" />
        <span class="brand__name">Flow</span>
      </a>

      <div class="dashboard-controls">
        <!-- Advanced Search -->
        <div class="search-control">
          <svg class="search-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <input type="search" class="search-input" placeholder="Search requests, students..." aria-label="Search">
        </div>
        
        <!-- Notifications -->
        <button class="control-button" title="Notifications" aria-label="Notifications">
          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM11 19H6a2 2 0 01-2-2V7a2 2 0 012-2h5m5 10V9a2 2 0 00-2-2H9m7 8a2 2 0 002-2V9a2 2 0 00-2-2"></path>
          </svg>
          <span class="badge">2</span>
        </button>
        
        <!-- Messages -->
        <button class="control-button" title="Messages" aria-label="Messages">
          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          <span class="badge">5</span>
        </button>
        
        <!-- Calendar -->
        <button class="control-button" title="Calendar" aria-label="Calendar">
          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
        </button>
        
        <!-- Language Switch -->
        <form class="lang-switch" aria-label="Language selector">
          <label for="lang" class="sr-only" data-i18n="accessibility.selectLanguage">Language</label>
          <select id="lang" name="lang" aria-describedby="lang-help">
            <option value="en" selected>English</option>
            <option value="fr">Fran√ßais</option>
            <option value="ar" dir="rtl">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="sw">Kiswahili</option>
            <option value="ha">Hausa</option>
            <option value="yo">Yoruba</option>
            <option value="ig">Igbo</option>
            <option value="zu">Zulu</option>
            <option value="am">Amharic</option>
          </select>
          <div id="lang-help" class="sr-only" data-i18n="accessibility.langReloadNote">Changing language will reload the page</div>
        </form>
        
        <!-- User Menu -->
        <div class="user-menu">
          <div class="user-avatar" title="User Menu" aria-label="User Menu">PK</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Enhanced Subnav -->
  <div class="subnav" role="navigation" aria-label="Recommender sections">
    <div class="container subnav-content">
      <div class="subnav-nav">
        <a href="#dashboard" class="badge active">üìä Dashboard</a>
        <a href="#requests" class="badge">üìã Requests</a>
        <a href="#upload" class="badge">üì§ Upload</a>
        <a href="#messages" class="badge">üí¨ Messages</a>
        <a href="#history" class="badge">üìà History</a>
        <a href="#profile" class="badge">üë§ Profile</a>
        <a href="#settings" class="badge">‚öôÔ∏è Settings</a>
      </div>
      <div class="quick-filters">
        <select class="filter-select" aria-label="Filter by status">
          <option>All Requests</option>
          <option>Urgent</option>
          <option>Due Soon</option>
          <option>Completed</option>
        </select>
        <select class="filter-select" aria-label="Filter by deadline">
          <option>All Deadlines</option>
          <option>This Week</option>
          <option>This Month</option>
          <option>Overdue</option>
        </select>
        <div class="view-toggle">
          <button class="active" title="Grid View">‚äû</button>
          <button title="List View">‚ò∞</button>
        </div>
      </div>
    </div>
  </div>

  <main id="main">
    <!-- Breadcrumb -->
    <nav class="container breadcrumb" aria-label="Breadcrumb" style="padding-top:1rem">
      <ol class="breadcrumb__list">
        <li class="breadcrumb__item"><a href="/" class="breadcrumb__link">Home</a></li>
        <li class="breadcrumb__separator" aria-hidden="true">/</li>
        <li class="breadcrumb__item"><span class="breadcrumb__current">Recommender Portal</span></li>
      </ol>
    </nav>

    <!-- Dashboard Stats -->
    <section id="dashboard" class="container dashboard-stats">
      <div class="stat-card">
        <span class="stat-number" id="pendingRequests">0</span>
        <div class="stat-label">Pending Requests</div>
        <span class="stat-trend"></span>
      </div>
      <div class="stat-card">
        <span class="stat-number" id="lettersSubmitted">0</span>
        <div class="stat-label">Letters Submitted</div>
        <span class="stat-trend"></span>
      </div>
      <div class="stat-card">
        <span class="stat-number" id="dueThisWeek">0</span>
        <div class="stat-label">Due This Week</div>
        <span class="stat-trend"></span>
      </div>
      <div class="stat-card">
        <span class="stat-number" id="onTimeRate">100%</span>
        <div class="stat-label">On-Time Rate</div>
        <span class="stat-trend"></span>
      </div>
    </section>

    <!-- PENDING REQUESTS -->
    <section id="requests" class="section" aria-labelledby="reqTitle">
      <div class="container grid">
        <h1 id="reqTitle">Pending Requests</h1>

        <div class="card" role="table" aria-label="Pending recommendation requests" style="overflow:auto">
          <div role="rowgroup">
            <div role="row" class="grid" style="grid-template-columns:2fr 2fr 1.2fr 1fr; gap:1rem; font-weight:700; border-bottom:1px solid #e5e7eb; padding:.5rem 0;">
              <div role="columnheader">Student</div>
              <div role="columnheader">Program / Institution</div>
              <div role="columnheader">Deadline</div>
              <div role="columnheader">Action</div>
            </div>

            <div class="pending-row" role="row" data-req-id="RG-21873" data-student="Oumarou Gouba" data-program="B.Sc. Computer Science ‚Äî University of Accra">
              <div role="cell"><strong>Oumarou Gouba</strong><br/><small>Request ID: RG-21873</small></div>
              <div role="cell">B.Sc. Computer Science ‚Äî University of Accra</div>
              <div role="cell"><time datetime="2025-09-05">Sept 5</time></div>
              <div role="cell"><a class="btn btn--ghost link-upload" href="#upload">Upload</a></div>
            </div>

            <div class="pending-row" role="row" data-req-id="RG-21888" data-student="Adjoa Mensah" data-program="B.Eng. Software ‚Äî Abuja Tech Institute">
              <div role="cell"><strong>Adjoa Mensah</strong><br/><small>Request ID: RG-21888</small></div>
              <div role="cell">B.Eng. Software ‚Äî Abuja Tech Institute</div>
              <div role="cell"><time datetime="2025-09-12">Sept 12</time></div>
              <div role="cell"><a class="btn btn--ghost link-upload" href="#upload">Upload</a></div>
            </div>
          </div>
        </div>

        <p class="mt-4">Each request includes a secure token. Upload separate letters for each program if requested.</p>
      </div>
    </section>

    <!-- UPLOAD LETTER -->
    <section id="upload" class="section section--how" aria-labelledby="upTitle">
      <div class="container grid">
        <h2 id="upTitle">Upload Letter</h2>

        <article class="card" aria-labelledby="formTitle">
          <h3 id="formTitle">Submission Form</h3>

          <form id="uploadForm" aria-describedby="uploadHelp" novalidate>
            <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem">
              <label for="reqId">Request ID
                <input id="reqId" name="reqId" type="text" required placeholder="RG-21873" />
              </label>
              <label for="studentName">Student Name
                <input id="studentName" name="studentName" type="text" required placeholder="Oumarou Gouba" />
              </label>
              <label for="recName">Your Full Name
                <input id="recName" name="recName" type="text" required placeholder="Prof. Ama K." />
              </label>
              <label for="recEmail">Your Email
                <input id="recEmail" name="recEmail" type="email" required placeholder="prof@example.edu" />
              </label>
              <label for="relationship">Relationship to Student
                <select id="relationship" name="relationship" required>
                  <option value="">Choose‚Ä¶</option>
                  <option>Professor</option>
                  <option>Teacher</option>
                  <option>Employer</option>
                  <option>Counselor</option>
                  <option>Other</option>
                </select>
              </label>
              <label for="program">Institution / Program
                <input id="program" name="program" type="text" required placeholder="University of Accra ‚Äî B.Sc. CS" />
              </label>
              <label for="letterFile">Upload PDF (max 5MB)
                <input id="letterFile" name="letterFile" type="file" accept="application/pdf" required />
              </label>
              <label for="confidential">Allow student to view letter?
                <select id="confidential" name="confidential" required>
                  <option value="">Choose‚Ä¶</option>
                  <option value="visible">Yes (waived confidentiality)</option>
                  <option value="confidential">No (confidential)</option>
                </select>
              </label>
            </div>

            <label for="note" class="mt-4">Optional note to admissions
              <textarea id="note" name="note" rows="4" placeholder="Additional context for the review committee‚Ä¶"></textarea>
            </label>

            <div class="sr-only" aria-live="polite" id="formStatus"></div>
            <p id="uploadHelp" class="mt-4">By submitting, you confirm the content is accurate and authored by you.</p>

            <div class="mt-4">
              <button id="submitBtn" class="btn" type="submit">Submit Letter</button>
              <button class="btn btn--ghost" type="reset">Clear</button>
            </div>
          </form>
        </article>
      </div>
    </section>

    <!-- MESSAGES -->
    <section id="messages" class="section" aria-labelledby="msgTitle">
      <div class="container">
        <h2 id="msgTitle">Messages</h2>
        <div class="messaging" role="application" aria-label="Messaging">
          <aside class="messaging__sidebar" aria-label="Conversations">
            <div class="messaging__search">
              <input id="msgSearch" type="search" class="form-input" placeholder="Search conversations‚Ä¶" autocomplete="off" />
              <button id="msgNew" type="button" class="btn btn--ghost btn--sm">New</button>
            </div>
            <div id="threadList" class="thread-list" role="listbox" aria-label="Conversation list"></div>
          </aside>

          <section class="messaging__main" aria-live="polite">
            <header class="thread-header">
              <div>
                <h3 id="threadTitle" class="thread-title">Select a conversation</h3>
                <div id="threadMeta" class="thread-meta">
                  <!-- recipients chips injected here -->
                </div>
              </div>
              <div>
                <button id="editRecipients" class="btn btn--ghost btn--sm" type="button" hidden>Edit Recipients</button>
              </div>
            </header>

            <div id="messageFeed" class="message-feed" aria-label="Messages"></div>

            <form id="composer" class="composer" aria-label="Message composer" hidden>
              <div class="composer__row">
                <label for="composerInput" class="sr-only">Message</label>
                <textarea id="composerInput" rows="2" placeholder="Type a message‚Ä¶" required></textarea>
              </div>

              <div class="composer__row">
                <input id="composerFile" type="file" multiple
                       accept="application/pdf,image/*,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                       style="display:none" />
                <button id="composerAttach" class="btn btn--ghost btn--sm" type="button" aria-controls="composerFile">
                  <svg width="14" height="14" aria-hidden="true" fill="currentColor"><path d="M9.5 2.672a.5.5 0 1 0 1 0V.843a.5.5 0 0 0-1 0v1.829zM3.5 6a3.5 3.5 0 0 1 7 0v5a2.5 2.5 0 0 1-5 0V6a1.5 1.5 0 0 1 3 0v4.5a.5.5 0 0 1-1 0V6a.5.5 0 0 0-1 0v4.5a2.5 2.5 0 1 0 5 0V6a2.5 2.5 0 1 0-5 0v5a3.5 3.5 0 1 0 7 0V6a4.5 4.5 0 1 0-9 0v5a.5.5 0 0 0 1 0V6z"/></svg>
                  Attach
                </button>
                <div id="composerFiles" class="composer__files" aria-live="polite"></div>
                <div style="flex:1"></div>
                <button id="composerSend" class="btn btn--primary" type="submit">Send</button>
              </div>
              <div class="text--muted" style="font-size:.8rem">Max 5 files, up to 10MB each</div>
            </form>

            <div id="composerEmpty" class="composer--empty">Choose a conversation to start messaging.</div>
          </section>
        </div>
      </div>
    </section>

    <!-- SUBMISSION HISTORY -->
    <section id="history" class="section" aria-labelledby="histTitle">
      <div class="container grid">
        <h2 id="histTitle">Submission History</h2>

        <div id="historyList" class="cards--grid" data-empty-text="No submissions yet."></div>
      </div>
    </section>

    <!-- GUIDELINES -->
    <section id="guidelines" class="section section--how" aria-labelledby="guideTitle">
      <div class="container grid">
        <h2 id="guideTitle">Letter Guidelines</h2>
        <div class="cards--grid">
          <article class="card">
            <h3>Content</h3>
            <ul>
              <li>Academic ability, work ethic, integrity, collaboration.</li>
              <li>Specific examples (projects, leadership, challenges overcome).</li>
              <li>Context (how long and in what capacity you know the student).</li>
            </ul>
          </article>
          <article class="card">
            <h3>Format</h3>
            <ul>
              <li>PDF only; letterhead preferred; include date and signature.</li>
              <li>Max size 5MB. One file per request.</li>
              <li>English or French preferred (others if program allows).</li>
            </ul>
          </article>
          <article class="card">
            <h3>Confidentiality</h3>
            <ul>
              <li>You may choose confidential or visible to student.</li>
              <li>Admissions staff and authorized reviewers can always view.</li>
              <li>Audit logging is enabled in production.</li>
            </ul>
          </article>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="section section--faq" aria-labelledby="faqTitle">
      <div class="container grid">
        <h2 id="faqTitle">Frequently Asked Questions</h2>
        <details class="card">
          <summary>Do I need an account?</summary>
          <div class="prose">If you received a unique link, you can upload without creating an account. An account helps you track submissions.</div>
        </details>
        <details class="card">
          <summary>Can I edit after submitting?</summary>
          <div class="prose">You can replace a letter until the program deadline. After that, submissions lock.</div>
        </details>
        <details class="card">
          <summary>Is my data secure?</summary>
          <div class="prose">Files are stored securely and access is restricted to authorized reviewers.</div>
        </details>
      </div>
    </section>
  </main>

  <!-- Quick Actions Panel -->
  <div class="quick-actions-panel">
    <button class="quick-action-btn" title="Upload Letter" aria-label="Upload Letter">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
      </svg>
    </button>
    <button class="quick-action-btn" title="Send Message" aria-label="Send Message">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
      </svg>
    </button>
    <button class="quick-action-btn" title="Check Deadlines" aria-label="Check Deadlines">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
      </svg>
    </button>
    <button class="quick-action-btn" title="View Profile" aria-label="View Profile">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
      </svg>
    </button>
  </div>

  <!-- Footer -->
  <footer class="footer" role="contentinfo" aria-label="Site footer">
    <div class="container footer__grid">
      <section class="footer__brand">
        <img src="/assets/img/logo.PNG" alt="" class="footer__logo" width="40" height="40" />
        <p class="footer__tagline">Connecting learners and institutions across Africa.</p>
      </section>
      <nav aria-label="Explore" class="footer__nav">
        <h3 class="footer__title">Explore</h3>
        <ul>
          <li><a href="/students/">Students</a></li>
          <li><a href="/institutions/">Institutions</a></li>
          <li><a href="/counselors/">Counselors</a></li>
          <li><a href="/parents/">Parents</a></li>
          <li><a href="/recommenders/">Recommenders</a></li>
        </ul>
      </nav>
      <nav aria-label="Legal" class="footer__nav">
        <h3 class="footer__title">Legal</h3>
        <ul>
          <li><a href="/legal/terms.html">Terms</a></li>
          <li><a href="/legal/privacy.html">Privacy</a></li>
          <li><a href="/legal/cookies.html">Cookies</a></li>
        </ul>
      </nav>
      <section class="footer__cta">
        <h3 class="footer__title">Need help?</h3>
        <a href="#faq" class="btn btn--primary">View FAQs</a>
      </section>
    </div>
    <div class="footer__meta">
      <div class="container footer__meta-inner">
        <small>¬© <span id="year"></span> Flow</small>
      </div>
    </div>
  </footer>

  <!-- Receipt Modal (kept for upload receipts) -->
  <div id="receiptOverlay" class="modal-overlay" hidden></div>
  <section id="receiptModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="receiptTitle" hidden>
    <header class="modal__header">
      <h3 id="receiptTitle" class="modal__title">Submission Receipt</h3>
      <button id="receiptClose" class="btn btn--ghost btn--sm" type="button" aria-label="Close">‚úï</button>
    </header>
    <div id="receiptBody" class="modal__body"></div>
    <footer class="modal__footer">
      <button id="receiptCopy" class="btn btn--ghost btn--sm" type="button">Copy details</button>
      <button id="receiptOk" class="btn btn--primary btn--sm" type="button">Done</button>
    </footer>
  </section>

  <!-- New / Edit Message Modal -->
  <div id="msgOverlay" class="modal-overlay" hidden></div>
  <section id="msgModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="msgModalTitle" hidden>
    <header class="modal__header">
      <h3 id="msgModalTitle" class="modal__title">New Message</h3>
      <button id="msgClose" class="btn btn--ghost btn--sm" type="button" aria-label="Close">‚úï</button>
    </header>
    <div class="modal__body">
      <form id="msgForm" novalidate>
        <fieldset class="fieldset" style="margin-bottom:.75rem">
          <legend class="sr-only">Recipients</legend>
          <div id="recipientList" class="wrap" style="gap:.5rem"></div>
        </fieldset>
        <label>Subject
          <input id="msgSubject" type="text" placeholder="Subject (optional)" />
        </label>
        <label class="mt-2">Message
          <textarea id="msgText" rows="3" placeholder="Write your message‚Ä¶" required></textarea>
        </label>

        <div class="mt-2">
          <input id="msgFile" type="file" multiple
                 accept="application/pdf,image/*,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                 style="display:none" />
          <button id="msgAttach" class="btn btn--ghost btn--sm" type="button">Attach files</button>
          <div id="msgFiles" class="composer__files" style="margin-top:.35rem"></div>
          <div class="text--muted" style="font-size:.8rem;margin-top:.25rem">Max 5 files, up to 10MB each</div>
        </div>

        <div class="sr-only" id="msgStatus" aria-live="polite"></div>
      </form>
    </div>
    <footer class="modal__footer">
      <button id="msgCancel" class="btn btn--ghost btn--sm" type="button">Cancel</button>
      <button id="msgSend" class="btn btn--primary btn--sm" type="button">Send</button>
    </footer>
  </section>

  <!-- Translation system -->
  <script src="/assets/js/i18n.js" defer></script>

  <!-- Auth and JS -->
  <script src="/assets/js/firebase-config.js"></script>
  <script src="/assets/js/firebase-auth.js" defer></script>
  <script src="/assets/js/auth-guards.js" defer></script>
  <script src="/assets/js/recommenders.js" defer></script>

  <!-- Data Service and Dashboard Loader -->
  <script src="/assets/js/data-service.js"></script>
  <script src="/assets/js/dashboard-loader.js"></script>
</body>
</html>
