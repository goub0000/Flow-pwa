<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flow | Counselor Messages</title>
  <meta name="description" content="Advanced messaging platform for counselors to communicate with students, parents, and colleagues." />
  <link rel="icon" href="/assets/img/logo.png" type="image/png" />
  <link rel="apple-touch-icon" href="/assets/img/logo.png" />
  <!-- Base & counselor styles -->
  <link rel="stylesheet" href="/assets/css/base.css" />
  <link rel="stylesheet" href="/assets/css/counselors.css" />
  
  <style>
    body {
      background: var(--flow-bg, #0a0b1e);
      min-height: 100vh;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      display: flex;
      flex-direction: column;
    }
    
    /* Header Styling */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 4px solid rgba(255, 255, 255, 0.3);
      background: linear-gradient(135deg, #4338ca 0%, #6366f1 50%, #f59e0b 100%);
      backdrop-filter: blur(15px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      flex-shrink: 0;
    }
    
    .header__inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: white;
    }
    
    .brand__logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      box-shadow: 0 4px 15px rgba(67, 56, 202, 0.3);
    }
    
    .brand__name {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #4338ca, #7c3aed);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .header-nav {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    
    .header-nav a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    
    .header-nav a:hover, .header-nav a.active {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #8b5cf6, #a855f7);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      cursor: pointer;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    /* Main Layout */
    .main-content {
      flex: 1;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      position: relative;
      z-index: 1;
      border-top: 4px solid rgba(67, 56, 202, 0.3);
      border-bottom: 4px solid rgba(67, 56, 202, 0.3);
      box-shadow: 
        inset 0 4px 10px rgba(67, 56, 202, 0.1),
        inset 0 -4px 10px rgba(67, 56, 202, 0.1);
    }
    
    .messages-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      min-height: calc(100vh - 200px);
      display: flex;
      gap: 1.5rem;
    }
    
    /* Sidebar */
    .sidebar {
      width: 320px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      border: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid #f1f5f9;
      background: linear-gradient(135deg, #1e293b, #334155);
      color: white;
    }
    
    .sidebar-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0 0 1rem 0;
    }
    
    .search-box {
      position: relative;
      margin-bottom: 1rem;
    }
    
    .search-input {
      width: 100%;
      padding: 0.75rem 2.5rem 0.75rem 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      font-size: 0.875rem;
    }
    
    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }
    
    .search-icon {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.6);
    }
    
    .filter-tabs {
      display: flex;
      gap: 0.5rem;
    }
    
    .filter-tab {
      padding: 0.5rem 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .filter-tab.active {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }
    
    .conversations-list {
      flex: 1;
      overflow-y: auto;
      padding: 0;
    }
    
    .conversation-item {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #f1f5f9;
      cursor: pointer;
      transition: background 0.2s ease;
      position: relative;
    }
    
    .conversation-item:hover {
      background: #f8fafc;
    }
    
    .conversation-item.active {
      background: #f0f9ff;
      border-right: 3px solid #3b82f6;
    }
    
    .conversation-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.5rem;
    }
    
    .conversation-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 0.875rem;
    }
    
    .conversation-info {
      flex: 1;
    }
    
    .conversation-name {
      font-weight: 600;
      color: #1e293b;
      font-size: 0.875rem;
    }
    
    .conversation-time {
      font-size: 0.75rem;
      color: #64748b;
    }
    
    .conversation-preview {
      font-size: 0.875rem;
      color: #64748b;
      margin-top: 0.25rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .unread-badge {
      background: #ef4444;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
    
    /* Main Chat Area */
    .chat-area {
      flex: 1;
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      border: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .chat-header {
      padding: 1.5rem;
      border-bottom: 1px solid #f1f5f9;
      background: linear-gradient(135deg, #f8fafc, #e2e8f0);
    }
    
    .chat-title {
      display: flex;
      align-items: center;
      justify-content: between;
      gap: 1rem;
    }
    
    .chat-participant {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .participant-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #10b981, #059669);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
    }
    
    .participant-info h3 {
      margin: 0;
      font-size: 1.125rem;
      color: #1e293b;
    }
    
    .participant-status {
      font-size: 0.875rem;
      color: #10b981;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #10b981;
      animation: pulse 2s infinite;
    }
    
    .chat-actions {
      display: flex;
      gap: 0.75rem;
      margin-left: auto;
    }
    
    .chat-action-btn {
      padding: 0.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #64748b;
    }
    
    .chat-action-btn:hover {
      background: #f1f5f9;
      color: #3b82f6;
    }
    
    .messages-container-inner {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      background: #fafafa;
    }
    
    .message {
      display: flex;
      margin-bottom: 1.5rem;
      align-items: flex-start;
      gap: 0.75rem;
    }
    
    .message.sent {
      flex-direction: row-reverse;
    }
    
    .message-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 0.75rem;
      flex-shrink: 0;
    }
    
    .message.sent .message-avatar {
      background: linear-gradient(135deg, #10b981, #059669);
    }
    
    .message-content {
      max-width: 70%;
    }
    
    .message-bubble {
      background: white;
      border-radius: 16px 16px 16px 4px;
      padding: 0.75rem 1rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 1px solid #e5e7eb;
    }
    
    .message.sent .message-bubble {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
      border-radius: 16px 16px 4px 16px;
      border: none;
    }
    
    .message-text {
      margin: 0;
      line-height: 1.5;
      font-size: 0.875rem;
    }
    
    .message-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
      font-size: 0.75rem;
      color: #64748b;
    }
    
    .message.sent .message-meta {
      color: rgba(255, 255, 255, 0.8);
    }
    
    .message-time {
      font-size: 0.75rem;
    }
    
    .message-status {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    /* Compose Area */
    .compose-area {
      border-top: 1px solid #f1f5f9;
      padding: 1.5rem;
      background: white;
    }
    
    .compose-container {
      display: flex;
      gap: 1rem;
      align-items: flex-end;
    }
    
    .compose-actions {
      display: flex;
      gap: 0.5rem;
      flex-shrink: 0;
    }
    
    .compose-btn {
      width: 40px;
      height: 40px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      color: #64748b;
    }
    
    .compose-btn:hover {
      background: #f1f5f9;
      color: #3b82f6;
    }
    
    .compose-input-container {
      flex: 1;
      position: relative;
    }
    
    .compose-input {
      width: 100%;
      min-height: 40px;
      max-height: 120px;
      padding: 0.75rem 3rem 0.75rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 20px;
      resize: none;
      font-family: inherit;
      font-size: 0.875rem;
      line-height: 1.5;
      transition: border-color 0.3s ease;
    }
    
    .compose-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .compose-send {
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .compose-send:hover {
      transform: translateY(-50%) scale(1.1);
    }
    
    .compose-send:disabled {
      background: #d1d5db;
      cursor: not-allowed;
      transform: translateY(-50%) scale(1);
    }
    
    /* Advanced Features */
    .schedule-modal, .attachment-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      backdrop-filter: blur(4px);
    }
    
    .modal-content {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .modal-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
    }
    
    .modal-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1e293b;
      margin: 0;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
    }
    
    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 0.875rem;
      transition: all 0.3s ease;
    }
    
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }
    
    .datetime-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    
    .modal-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      margin-top: 2rem;
    }
    
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    }
    
    .btn-secondary {
      background: #f1f5f9;
      color: #475569;
      border: 1px solid #e2e8f0;
    }
    
    .btn-secondary:hover {
      background: #e2e8f0;
    }
    
    /* Animations */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .message {
      animation: slideIn 0.3s ease;
    }
    
    /* Responsive Design */
    @media (max-width: 1024px) {
      .messages-container {
        flex-direction: column;
        height: auto;
      }
      
      .sidebar {
        width: 100%;
        height: 300px;
      }
      
      .chat-area {
        height: 600px;
      }
    }
    
    @media (max-width: 768px) {
      .messages-container {
        padding: 1rem;
        gap: 1rem;
      }
      
      .header__inner {
        padding: 1rem;
      }
      
      .header-nav {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header" role="banner" aria-label="Site header">
    <div class="header__inner">
      <a class="brand" href="/counselors/" aria-label="Flow Counselor Dashboard">
        <img src="/assets/img/logo.png" class="brand__logo" alt="Flow logo" />
        <span class="brand__name">Flow</span>
      </a>
      
      <nav class="header-nav">
        <a href="/counselors/">Dashboard</a>
        <a href="/counselors/#students">Students</a>
        <a href="/counselors/messages.html" class="active">Messages</a>
        <a href="/counselors/#analytics">Analytics</a>
      </nav>
      
      <div class="user-avatar" title="User Menu">JD</div>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="main-content" role="main">
    <div class="messages-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2 class="sidebar-title">💬 Messages</h2>
        <div class="search-box">
          <input type="text" class="search-input" placeholder="Search conversations..." />
          <svg class="search-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </div>
        <div class="filter-tabs">
          <div class="filter-tab active">All</div>
          <div class="filter-tab">Students</div>
          <div class="filter-tab">Parents</div>
        </div>
      </div>
      
      <div class="conversations-list">
        <div class="conversation-item active">
          <div class="conversation-header">
            <div class="conversation-avatar">JD</div>
            <div class="conversation-info">
              <div class="conversation-name">Jane Doe</div>
              <div class="conversation-time">2:30 PM</div>
            </div>
          </div>
          <div class="conversation-preview">Thank you for the guidance on my essay...</div>
          <div class="unread-badge">3</div>
        </div>
        
        <div class="conversation-item">
          <div class="conversation-header">
            <div class="conversation-avatar" style="background: linear-gradient(135deg, #f59e0b, #d97706);">SO</div>
            <div class="conversation-info">
              <div class="conversation-name">Samuel Okoro</div>
              <div class="conversation-time">1:15 PM</div>
            </div>
          </div>
          <div class="conversation-preview">I uploaded my transcript. Could you please review it?</div>
        </div>
        
        <div class="conversation-item">
          <div class="conversation-header">
            <div class="conversation-avatar" style="background: linear-gradient(135deg, #8b5cf6, #a855f7);">AM</div>
            <div class="conversation-info">
              <div class="conversation-name">Adjoa Mensah</div>
              <div class="conversation-time">11:45 AM</div>
            </div>
          </div>
          <div class="conversation-preview">When is the deadline for the nursing program application?</div>
          <div class="unread-badge">1</div>
        </div>
        
        <div class="conversation-item">
          <div class="conversation-header">
            <div class="conversation-avatar" style="background: linear-gradient(135deg, #ef4444, #dc2626);">MJ</div>
            <div class="conversation-info">
              <div class="conversation-name">Mrs. Janet (Parent)</div>
              <div class="conversation-time">Yesterday</div>
            </div>
          </div>
          <div class="conversation-preview">How is my daughter's progress with her applications?</div>
        </div>
        
        <div class="conversation-item">
          <div class="conversation-header">
            <div class="conversation-avatar" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">KT</div>
            <div class="conversation-info">
              <div class="conversation-name">Kwame Thompson</div>
              <div class="conversation-time">Yesterday</div>
            </div>
          </div>
          <div class="conversation-preview">Could we schedule a meeting to discuss my career options?</div>
        </div>
      </div>
    </div>

    <!-- Main Chat Area -->
    <div class="chat-area">
      <div class="chat-header">
        <div class="chat-title">
          <div class="chat-participant">
            <div class="participant-avatar">JD</div>
            <div class="participant-info">
              <h3>Jane Doe</h3>
              <div class="participant-status">
                <span class="status-dot"></span>
                Online now
              </div>
            </div>
          </div>
          
          <div class="chat-actions">
            <button class="chat-action-btn" title="Video Call" onclick="startVideoCall()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
              </svg>
            </button>
            <button class="chat-action-btn" title="Voice Call" onclick="startVoiceCall()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </button>
            <button class="chat-action-btn" title="More Options" onclick="showMoreOptions()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
      
      <div class="messages-container-inner" id="messagesContainer">
        <div class="message">
          <div class="message-avatar">JD</div>
          <div class="message-content">
            <div class="message-bubble">
              <p class="message-text">Hi Jane! I've reviewed your essay draft for the University of Accra application. Overall, it's very strong and shows great personal insight.</p>
            </div>
            <div class="message-meta">
              <span class="message-time">2:15 PM</span>
            </div>
          </div>
        </div>
        
        <div class="message sent">
          <div class="message-avatar">JD</div>
          <div class="message-content">
            <div class="message-bubble">
              <p class="message-text">Thank you so much! I was worried about the conclusion. Do you think it ties everything together well?</p>
            </div>
            <div class="message-meta">
              <span class="message-time">2:18 PM</span>
              <div class="message-status">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
        
        <div class="message">
          <div class="message-avatar">JD</div>
          <div class="message-content">
            <div class="message-bubble">
              <p class="message-text">The conclusion is actually one of the strongest parts! You've done a great job connecting your personal experiences to your future goals. I have a few minor suggestions that I'll send in a separate document.</p>
            </div>
            <div class="message-meta">
              <span class="message-time">2:22 PM</span>
            </div>
          </div>
        </div>
        
        <div class="message sent">
          <div class="message-avatar">JD</div>
          <div class="message-content">
            <div class="message-bubble">
              <p class="message-text">That would be wonderful! Also, I wanted to ask about the recommendation letter from Professor Williams. Should I follow up with him?</p>
            </div>
            <div class="message-meta">
              <span class="message-time">2:25 PM</span>
              <div class="message-status">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
        
        <div class="message">
          <div class="message-avatar">JD</div>
          <div class="message-content">
            <div class="message-bubble">
              <p class="message-text">Yes, definitely follow up! It's been two weeks since you initially requested it. A polite reminder would be appropriate. I can help you draft the follow-up email if you'd like.</p>
            </div>
            <div class="message-meta">
              <span class="message-time">2:30 PM</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="compose-area">
        <div class="compose-container">
          <div class="compose-actions">
            <button class="compose-btn" title="Attach File" onclick="showAttachmentModal()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
              </svg>
            </button>
            <button class="compose-btn" title="Schedule Message" onclick="showScheduleModal()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </button>
            <button class="compose-btn" title="Add Emoji" onclick="showEmojiPicker()">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </button>
          </div>
          
          <div class="compose-input-container">
            <textarea class="compose-input" placeholder="Type your message..." rows="1" onkeydown="handleKeyDown(event)"></textarea>
            <button class="compose-send" onclick="sendMessage()" disabled>
              <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    </div>
  </main>

  <!-- Schedule Message Modal -->
  <div id="scheduleModal" class="schedule-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
          ⏰
        </div>
        <div>
          <h3 class="modal-title">Schedule Message</h3>
          <p style="margin: 0; color: #64748b;">Send this message at a specific time</p>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Message Content</label>
        <textarea class="form-textarea" placeholder="Enter your message here..." rows="4"></textarea>
      </div>
      
      <div class="datetime-group">
        <div class="form-group">
          <label class="form-label">Date</label>
          <input type="date" class="form-input" />
        </div>
        <div class="form-group">
          <label class="form-label">Time</label>
          <input type="time" class="form-input" />
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Timezone</label>
        <select class="form-select">
          <option>West Africa Time (WAT)</option>
          <option>Central Africa Time (CAT)</option>
          <option>East Africa Time (EAT)</option>
        </select>
      </div>
      
      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeScheduleModal()">Cancel</button>
        <button class="btn btn-primary" onclick="scheduleMessage()">Schedule Message</button>
      </div>
    </div>
  </div>

  <!-- Attachment Modal -->
  <div id="attachmentModal" class="attachment-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
          📎
        </div>
        <div>
          <h3 class="modal-title">Attach Files</h3>
          <p style="margin: 0; color: #64748b;">Share documents and files</p>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">File Upload</label>
        <input type="file" class="form-input" multiple accept=".pdf,.doc,.docx,.txt,.jpg,.png" />
        <small style="color: #64748b;">Supported: PDF, DOC, DOCX, TXT, JPG, PNG (Max 10MB each)</small>
      </div>
      
      <div class="form-group">
        <label class="form-label">Description (Optional)</label>
        <textarea class="form-textarea" placeholder="Add a description for your files..." rows="3"></textarea>
      </div>
      
      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeAttachmentModal()">Cancel</button>
        <button class="btn btn-primary" onclick="uploadFiles()">Upload Files</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Auto-resize textarea
    const composeInput = document.querySelector('.compose-input');
    const sendButton = document.querySelector('.compose-send');
    
    composeInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = Math.min(this.scrollHeight, 120) + 'px';
      
      // Enable/disable send button
      sendButton.disabled = !this.value.trim();
    });
    
    // Handle Enter key
    function handleKeyDown(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        if (!sendButton.disabled) {
          sendMessage();
        }
      }
    }
    
    // Send message
    function sendMessage() {
      const input = document.querySelector('.compose-input');
      const message = input.value.trim();
      
      if (!message) return;
      
      // Add message to chat
      addMessage(message, true);
      
      // Clear input
      input.value = '';
      input.style.height = 'auto';
      sendButton.disabled = true;
      
      // Simulate response (in real app, this would be handled by backend)
      setTimeout(() => {
        const responses = [
          "Thanks for sharing that! I'll review it and get back to you soon.",
          "That sounds like a great plan. Let me know if you need any clarification.",
          "I'll help you with that. Give me a moment to prepare the information.",
          "Excellent question! Let me provide you with some guidance on this."
        ];
        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
        addMessage(randomResponse, false);
      }, 1000 + Math.random() * 2000);
    }
    
    // Add message to chat
    function addMessage(text, isSent) {
      const messagesContainer = document.getElementById('messagesContainer');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isSent ? 'sent' : ''}`;
      
      const currentTime = new Date().toLocaleTimeString('en-US', { 
        hour: 'numeric', 
        minute: '2-digit', 
        hour12: true 
      });
      
      messageDiv.innerHTML = `
        <div class="message-avatar">JD</div>
        <div class="message-content">
          <div class="message-bubble">
            <p class="message-text">${text}</p>
          </div>
          <div class="message-meta">
            <span class="message-time">${currentTime}</span>
            ${isSent ? `
              <div class="message-status">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/>
                </svg>
              </div>
            ` : ''}
          </div>
        </div>
      `;
      
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
    
    // Modal functions
    function showScheduleModal() {
      document.getElementById('scheduleModal').style.display = 'flex';
    }
    
    function closeScheduleModal() {
      document.getElementById('scheduleModal').style.display = 'none';
    }
    
    function showAttachmentModal() {
      document.getElementById('attachmentModal').style.display = 'flex';
    }
    
    function closeAttachmentModal() {
      document.getElementById('attachmentModal').style.display = 'none';
    }
    
    function scheduleMessage() {
      // In a real app, this would send the scheduled message to the backend
      showNotification('Message scheduled successfully!', 'success');
      closeScheduleModal();
    }
    
    function uploadFiles() {
      // In a real app, this would handle file upload
      showNotification('Files uploaded successfully!', 'success');
      closeAttachmentModal();
    }
    
    function startVideoCall() {
      showNotification('Video call feature coming soon!', 'info');
    }
    
    function startVoiceCall() {
      showNotification('Voice call feature coming soon!', 'info');
    }
    
    function showMoreOptions() {
      showNotification('More options coming soon!', 'info');
    }
    
    function showEmojiPicker() {
      showNotification('Emoji picker coming soon!', 'info');
    }
    
    // Notification system
    function showNotification(message, type) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed; top: 2rem; right: 2rem; z-index: 9999;
        background: ${getNotificationColor(type)};
        color: white; padding: 1rem 1.5rem; border-radius: 8px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        transform: translateX(100%); transition: transform 0.3s ease;
        max-width: 300px;
      `;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }
    
    function getNotificationColor(type) {
      switch(type) {
        case 'success': return 'linear-gradient(135deg, #10b981, #059669)';
        case 'error': return 'linear-gradient(135deg, #ef4444, #dc2626)';
        case 'info': return 'linear-gradient(135deg, #3b82f6, #1d4ed8)';
        default: return 'linear-gradient(135deg, #6b7280, #4b5563)';
      }
    }
    
    // Close modals on outside click
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('schedule-modal') || e.target.classList.contains('attachment-modal')) {
        e.target.style.display = 'none';
      }
    });
    
    // Conversation switching
    document.querySelectorAll('.conversation-item').forEach(item => {
      item.addEventListener('click', function() {
        document.querySelectorAll('.conversation-item').forEach(i => i.classList.remove('active'));
        this.classList.add('active');
        
        // Update chat header (in real app, this would load the conversation)
        const name = this.querySelector('.conversation-name').textContent;
        document.querySelector('.participant-info h3').textContent = name;
        
        // Clear unread badge
        const badge = this.querySelector('.unread-badge');
        if (badge) badge.remove();
      });
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Auto-scroll to bottom
      const messagesContainer = document.getElementById('messagesContainer');
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    });
  </script>
  
  <!-- Footer -->
  <footer style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); color: white; padding: 3rem 2rem 2rem; border-top: 4px solid rgba(67, 56, 202, 0.4); box-shadow: 0 -8px 25px rgba(0, 0, 0, 0.15); flex-shrink: 0; position: relative; overflow: hidden;">
    <!-- Advanced Background Animation -->
    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.05; pointer-events: none;">
      <div style="position: absolute; width: 200px; height: 200px; background: radial-gradient(circle, #4338ca 0%, transparent 70%); border-radius: 50%; top: -100px; left: -100px; animation: float 6s ease-in-out infinite;"></div>
      <div style="position: absolute; width: 150px; height: 150px; background: radial-gradient(circle, #f59e0b 0%, transparent 70%); border-radius: 50%; top: 50%; right: -75px; animation: float 8s ease-in-out infinite reverse;"></div>
    </div>
    
    <div style="max-width: 1400px; margin: 0 auto; position: relative; z-index: 2;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 3rem;">
        <!-- Brand Section -->
        <div style="transform: translateY(0); transition: transform 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'" onmouseleave="this.style.transform='translateY(0)'">
          <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
            <div style="position: relative; cursor: pointer;" onclick="logoAnimation(this)">
              <img src="/assets/img/logo.png" alt="Flow Logo" style="width: 48px; height: 48px; border-radius: 50%; box-shadow: 0 4px 15px rgba(67, 56, 202, 0.3); transition: all 0.3s ease;">
              <div style="position: absolute; inset: -2px; border-radius: 50%; background: linear-gradient(45deg, #4338ca, #f59e0b); z-index: -1; opacity: 0; transition: opacity 0.3s ease;"></div>
            </div>
            <div>
              <h3 style="margin: 0; font-size: 1.75rem; font-weight: 700; background: linear-gradient(135deg, #4338ca, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; cursor: pointer;" onclick="brandPulse(this)">Flow</h3>
              <p style="margin: 0; font-size: 0.875rem; color: rgba(255, 255, 255, 0.7);">Counselor Portal</p>
            </div>
          </div>
          <p style="color: rgba(255, 255, 255, 0.8); line-height: 1.6; margin-bottom: 1.5rem;">
            Empowering counselors with advanced tools to guide students towards their academic and career success.
          </p>
          <div style="display: flex; gap: 1rem;">
            <a href="#" onclick="socialClick('twitter')" style="width: 44px; height: 44px; background: linear-gradient(135deg, rgba(29, 161, 242, 0.2), rgba(29, 161, 242, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #1da1f2; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(15px); border: 1px solid rgba(29, 161, 242, 0.3);" onmouseenter="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 8px 25px rgba(29, 161, 242, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
              <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
              </svg>
            </a>
            <a href="#" onclick="socialClick('facebook')" style="width: 44px; height: 44px; background: linear-gradient(135deg, rgba(24, 119, 242, 0.2), rgba(24, 119, 242, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #1877f2; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(15px); border: 1px solid rgba(24, 119, 242, 0.3);" onmouseenter="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 8px 25px rgba(24, 119, 242, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
              <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
            <a href="#" onclick="socialClick('discord')" style="width: 44px; height: 44px; background: linear-gradient(135deg, rgba(114, 137, 218, 0.2), rgba(114, 137, 218, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #7289da; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(15px); border: 1px solid rgba(114, 137, 218, 0.3);" onmouseenter="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 8px 25px rgba(114, 137, 218, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
              <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9460 2.4189-2.1568 2.4189Z"/>
              </svg>
            </a>
            <a href="#" onclick="socialClick('linkedin')" style="width: 44px; height: 44px; background: linear-gradient(135deg, rgba(10, 102, 194, 0.2), rgba(10, 102, 194, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #0a66c2; text-decoration: none; transition: all 0.3s ease; backdrop-filter: blur(15px); border: 1px solid rgba(10, 102, 194, 0.3);" onmouseenter="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 8px 25px rgba(10, 102, 194, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
              <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Quick Access -->
        <div style="transform: translateY(0); transition: transform 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'" onmouseleave="this.style.transform='translateY(0)'">
          <h4 style="color: white; font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
            <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #4338ca, #6366f1); border-radius: 8px; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite;">
              <svg width="18" height="18" fill="none" stroke="white" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
            </div>
            Quick Access
          </h4>
          <nav style="display: flex; flex-direction: column; gap: 0.75rem;">
            <a href="/counselors/" onclick="quickAccess('dashboard')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(67, 56, 202, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 7 5 5 5-5"/>
                </svg>
              </div>
              Dashboard
            </a>
            <a href="/counselors/#students" onclick="quickAccess('students')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(16, 185, 129, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
                </svg>
              </div>
              Student Management
            </a>
            <a href="/counselors/messages.html" onclick="quickAccess('messages')" style="color: #f59e0b; text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3);" onmouseenter="this.style.background='rgba(245, 158, 11, 0.2)'; this.style.transform='translateX(8px) scale(1.02)'; this.style.boxShadow='0 4px 15px rgba(245, 158, 11, 0.3)'" onmouseleave="this.style.background='rgba(245, 158, 11, 0.1)'; this.style.transform=''; this.style.boxShadow=''">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
              </div>
              Messages
              <div style="margin-left: auto; width: 6px; height: 6px; background: #f59e0b; border-radius: 50%; animation: pulse 1.5s infinite;"></div>
            </a>
            <a href="/counselors/#analytics" onclick="quickAccess('analytics')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(139, 92, 246, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
              </div>
              Analytics
            </a>
            <a href="/counselors/settings.html" onclick="quickAccess('settings')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(75, 85, 99, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #6b7280, #4b5563); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
              </div>
              Settings
            </a>
          </nav>
        </div>

        <!-- Resources -->
        <div style="transform: translateY(0); transition: transform 0.3s ease;" onmouseenter="this.style.transform='translateY(-5px)'" onmouseleave="this.style.transform='translateY(0)'">
          <h4 style="color: white; font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
            <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 8px; display: flex; align-items: center; justify-content: center; animation: pulse 2s infinite;">
              <svg width="18" height="18" fill="none" stroke="white" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
              </svg>
            </div>
            Resources
          </h4>
          <nav style="display: flex; flex-direction: column; gap: 0.75rem;">
            <a href="#" onclick="resourceClick('help')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(59, 130, 246, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              Help Center
            </a>
            <a href="#" onclick="resourceClick('docs')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(16, 185, 129, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              Documentation
            </a>
            <a href="#" onclick="resourceClick('videos')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(239, 68, 68, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #ef4444, #dc2626); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              Training Videos
            </a>
            <a href="#" onclick="resourceClick('forum')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(139, 92, 246, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/>
                </svg>
              </div>
              Community Forum
            </a>
            <a href="#" onclick="resourceClick('support')" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border-radius: 12px; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.02);" onmouseenter="this.style.background='rgba(245, 158, 11, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.02)'; this.style.transform=''; this.style.color='rgba(255, 255, 255, 0.8)'">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                <svg width="12" height="12" fill="none" stroke="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                </svg>
              </div>
              Contact Support
            </a>
          </nav>
        </div>
      </div>

      <div style="border-top: 1px solid rgba(255, 255, 255, 0.2); margin-top: 3rem; padding-top: 2rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
        <p style="margin: 0; color: rgba(255, 255, 255, 0.6); font-size: 0.875rem;">
          © 2024 Flow Education Platform. All rights reserved.
        </p>
        <div style="display: flex; gap: 1.5rem;">
          <a href="#" onclick="policyClick('privacy')" style="color: rgba(255, 255, 255, 0.6); text-decoration: none; font-size: 0.875rem; transition: all 0.3s ease; padding: 0.25rem 0.5rem; border-radius: 4px;" onmouseenter="this.style.color='white'; this.style.background='rgba(255, 255, 255, 0.1)'" onmouseleave="this.style.color='rgba(255, 255, 255, 0.6)'; this.style.background=''">Privacy Policy</a>
          <a href="#" onclick="policyClick('terms')" style="color: rgba(255, 255, 255, 0.6); text-decoration: none; font-size: 0.875rem; transition: all 0.3s ease; padding: 0.25rem 0.5rem; border-radius: 4px;" onmouseenter="this.style.color='white'; this.style.background='rgba(255, 255, 255, 0.1)'" onmouseleave="this.style.color='rgba(255, 255, 255, 0.6)'; this.style.background=''">Terms of Service</a>
          <a href="#" onclick="policyClick('accessibility')" style="color: rgba(255, 255, 255, 0.6); text-decoration: none; font-size: 0.875rem; transition: all 0.3s ease; padding: 0.25rem 0.5rem; border-radius: 4px;" onmouseenter="this.style.color='white'; this.style.background='rgba(255, 255, 255, 0.1)'" onmouseleave="this.style.color='rgba(255, 255, 255, 0.6)'; this.style.background=''">Accessibility</a>
        </div>
      </div>
    </div>
  </footer>
  
  <!-- Advanced Footer Animations -->
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      33% { transform: translateY(-10px) rotate(120deg); }
      66% { transform: translateY(5px) rotate(240deg); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.05); }
    }
    
    @keyframes glow {
      0%, 100% { box-shadow: 0 0 5px rgba(67, 56, 202, 0.5); }
      50% { box-shadow: 0 0 20px rgba(67, 56, 202, 0.8), 0 0 30px rgba(245, 158, 11, 0.6); }
    }
  </style>
  
  <script>
    // Advanced Footer Functionalities
    
    // Logo Animation
    function logoAnimation(element) {
      const img = element.querySelector('img');
      const overlay = element.querySelector('div');
      
      img.style.transform = 'rotate(360deg) scale(1.1)';
      overlay.style.opacity = '1';
      
      setTimeout(() => {
        img.style.transform = '';
        overlay.style.opacity = '0';
      }, 600);
      
      showAdvancedNotification('Flow Logo clicked! 🚀', 'info');
    }
    
    // Brand Pulse Effect
    function brandPulse(element) {
      element.style.animation = 'none';
      element.offsetHeight; // Trigger reflow
      element.style.animation = 'pulse 0.6s ease-in-out';
      
      setTimeout(() => {
        element.style.animation = '';
      }, 600);
      
      showAdvancedNotification('Welcome to Flow Education Platform! 📚', 'success');
    }
    
    // Social Media Click Handlers
    function socialClick(platform) {
      const platforms = {
        twitter: { name: 'X (Twitter)', color: '#1da1f2', icon: '🐦' },
        facebook: { name: 'Facebook', color: '#1877f2', icon: '📘' },
        discord: { name: 'Discord', color: '#7289da', icon: '🎮' },
        linkedin: { name: 'LinkedIn', color: '#0a66c2', icon: '💼' }
      };
      
      const platformData = platforms[platform];
      showAdvancedNotification(`Opening ${platformData.name} ${platformData.icon}`, 'info');
      
      // In a real app, this would open the actual social media links
      setTimeout(() => {
        showAdvancedNotification(`${platformData.name} community coming soon!`, 'warning');
      }, 1000);
    }
    
    // Quick Access Handlers
    function quickAccess(section) {
      const sections = {
        dashboard: { name: 'Dashboard', icon: '📊', action: () => window.location.href = '/counselors/' },
        students: { name: 'Student Management', icon: '👥', action: () => window.location.href = '/counselors/#students' },
        messages: { name: 'Messages', icon: '💬', action: () => showAdvancedNotification('You are already on the Messages page!', 'info') },
        analytics: { name: 'Analytics', icon: '📈', action: () => window.location.href = '/counselors/#analytics' },
        settings: { name: 'Settings', icon: '⚙️', action: () => window.location.href = '/counselors/settings.html' }
      };
      
      const sectionData = sections[section];
      showAdvancedNotification(`Navigating to ${sectionData.name} ${sectionData.icon}`, 'info');
      
      // Add loading animation
      setTimeout(() => {
        sectionData.action();
      }, 500);
    }
    
    // Resource Click Handlers
    function resourceClick(resource) {
      const resources = {
        help: { name: 'Help Center', icon: '❓', description: 'Get assistance and find answers' },
        docs: { name: 'Documentation', icon: '📖', description: 'Comprehensive guides and tutorials' },
        videos: { name: 'Training Videos', icon: '🎥', description: 'Video tutorials and walkthroughs' },
        forum: { name: 'Community Forum', icon: '💬', description: 'Connect with other counselors' },
        support: { name: 'Contact Support', icon: '📞', description: '24/7 technical assistance' }
      };
      
      const resourceData = resources[resource];
      showAdvancedModal(
        `${resourceData.icon} ${resourceData.name}`,
        resourceData.description,
        `Welcome to ${resourceData.name}! This feature provides ${resourceData.description.toLowerCase()}. Our team is constantly working to improve your experience.`
      );
    }
    
    // Policy Click Handlers
    function policyClick(policy) {
      const policies = {
        privacy: { name: 'Privacy Policy', icon: '🔒', description: 'How we protect your data' },
        terms: { name: 'Terms of Service', icon: '📋', description: 'Our service agreement' },
        accessibility: { name: 'Accessibility', icon: '♿', description: 'Our commitment to inclusivity' }
      };
      
      const policyData = policies[policy];
      showAdvancedModal(
        `${policyData.icon} ${policyData.name}`,
        policyData.description,
        `Our ${policyData.name} outlines ${policyData.description.toLowerCase()}. We are committed to transparency and user rights. Please contact our legal team for specific questions.`
      );
    }
    
    // Advanced Notification System
    function showAdvancedNotification(message, type = 'info', duration = 3000) {
      const notification = document.createElement('div');
      const colors = {
        success: 'linear-gradient(135deg, #10b981, #059669)',
        error: 'linear-gradient(135deg, #ef4444, #dc2626)',
        warning: 'linear-gradient(135deg, #f59e0b, #d97706)',
        info: 'linear-gradient(135deg, #3b82f6, #1d4ed8)'
      };
      
      const icons = {
        success: '✅',
        error: '❌',
        warning: '⚠️',
        info: 'ℹ️'
      };
      
      notification.style.cssText = `
        position: fixed; top: 2rem; right: 2rem; z-index: 9999;
        background: ${colors[type]}; color: white;
        padding: 1rem 1.5rem; border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        transform: translateX(100%) scale(0.8); 
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        max-width: 350px; backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        display: flex; align-items: center; gap: 0.75rem;
      `;
      
      notification.innerHTML = `
        <span style="font-size: 1.25rem;">${icons[type]}</span>
        <span style="font-weight: 500;">${message}</span>
      `;
      
      document.body.appendChild(notification);
      
      // Show animation
      setTimeout(() => {
        notification.style.transform = 'translateX(0) scale(1)';
      }, 100);
      
      // Hide animation
      setTimeout(() => {
        notification.style.transform = 'translateX(100%) scale(0.8)';
        setTimeout(() => notification.remove(), 400);
      }, duration);
    }
    
    // Advanced Modal System
    function showAdvancedModal(title, subtitle, content) {
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.6); display: flex; align-items: center;
        justify-content: center; z-index: 10000; backdrop-filter: blur(5px);
        opacity: 0; transition: opacity 0.3s ease;
      `;
      
      modal.innerHTML = `
        <div style="
          background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
          border-radius: 16px; padding: 2rem; max-width: 500px; width: 90%;
          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
          border: 1px solid rgba(255, 255, 255, 0.1);
          transform: scale(0.8) translateY(20px);
          transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
          color: white;
        ">
          <div style="text-align: center; margin-bottom: 1.5rem;">
            <h3 style="margin: 0 0 0.5rem 0; font-size: 1.5rem; font-weight: 700;">${title}</h3>
            <p style="margin: 0; color: rgba(255, 255, 255, 0.7); font-size: 0.875rem;">${subtitle}</p>
          </div>
          <p style="color: rgba(255, 255, 255, 0.8); line-height: 1.6; margin-bottom: 2rem;">${content}</p>
          <div style="display: flex; gap: 1rem; justify-content: center;">
            <button onclick="closeAdvancedModal(this)" style="
              padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px;
              color: white; cursor: pointer; transition: all 0.3s ease;
              font-weight: 500;
            " onmouseenter="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.1)'">
              Close
            </button>
            <button onclick="showAdvancedNotification('Feature coming soon!', 'info'); closeAdvancedModal(this)" style="
              padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #4338ca, #6366f1);
              border: none; border-radius: 8px; color: white; cursor: pointer;
              transition: all 0.3s ease; font-weight: 500;
            " onmouseenter="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(67, 56, 202, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
              Learn More
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Show animation
      setTimeout(() => {
        modal.style.opacity = '1';
        const content = modal.querySelector('div');
        content.style.transform = 'scale(1) translateY(0)';
      }, 100);
      
      // Close on outside click
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          closeAdvancedModal(modal);
        }
      });
    }
    
    function closeAdvancedModal(element) {
      const modal = element.closest('[style*="position: fixed"]');
      modal.style.opacity = '0';
      const content = modal.querySelector('div');
      content.style.transform = 'scale(0.8) translateY(20px)';
      
      setTimeout(() => modal.remove(), 300);
    }
  </script>

  <!-- Floating Settings Button -->
  <div style="
    position: fixed; bottom: 2rem; right: 2rem; z-index: 1000;
    width: 56px; height: 56px; 
    background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
    border-radius: 50%; box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: all 0.3s ease;
    border: 2px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
  " onclick="openSettingsModal()" 
     onmouseenter="this.style.transform='translateY(-3px) scale(1.1)'; this.style.boxShadow='0 12px 30px rgba(139, 92, 246, 0.6)'" 
     onmouseleave="this.style.transform=''; this.style.boxShadow='0 8px 25px rgba(139, 92, 246, 0.4)'">
    <svg width="24" height="24" fill="none" stroke="white" viewBox="0 0 24 24" style="transition: transform 0.3s ease;">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
    </svg>
  </div>

  <script>
    function openSettingsModal() {
      // Animate the settings button
      const settingsBtn = document.querySelector('[onclick="openSettingsModal()"]');
      const icon = settingsBtn.querySelector('svg');
      icon.style.transform = 'rotate(180deg)';
      
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.7); display: flex; align-items: center;
        justify-content: center; z-index: 10001; backdrop-filter: blur(8px);
        opacity: 0; transition: opacity 0.4s ease;
      `;
      
      modal.innerHTML = `
        <div style="
          background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
          border-radius: 20px; padding: 2.5rem; max-width: 600px; width: 90%;
          box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
          border: 1px solid rgba(255, 255, 255, 0.1);
          transform: scale(0.8) translateY(30px);
          transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
          color: white; max-height: 80vh; overflow-y: auto;
        ">
          <div style="text-align: center; margin-bottom: 2rem;">
            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #8b5cf6, #a855f7); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
              <svg width="32" height="32" fill="none" stroke="white" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
            <h2 style="margin: 0 0 0.5rem 0; font-size: 1.75rem; font-weight: 700;">Settings & Preferences</h2>
            <p style="margin: 0; color: rgba(255, 255, 255, 0.7);">Customize your counselor experience</p>
          </div>
          
          <div style="display: grid; gap: 1.5rem;">
            <!-- Message Settings -->
            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
              <h3 style="margin: 0 0 1rem 0; color: #f59e0b; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
                Message Settings
              </h3>
              <div style="display: grid; gap: 1rem;">
                <label style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                  <span style="color: rgba(255, 255, 255, 0.9);">Enable message notifications</span>
                  <div style="width: 48px; height: 24px; background: #10b981; border-radius: 12px; position: relative; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; right: 2px; transition: all 0.3s;"></div>
                  </div>
                </label>
                <label style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                  <span style="color: rgba(255, 255, 255, 0.9);">Auto-save draft messages</span>
                  <div style="width: 48px; height: 24px; background: #10b981; border-radius: 12px; position: relative; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; right: 2px; transition: all 0.3s;"></div>
                  </div>
                </label>
              </div>
            </div>

            <!-- Privacy Settings -->
            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
              <h3 style="margin: 0 0 1rem 0; color: #ef4444; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 1l3.09 6.26L22 9l-5 4.87L18.18 21L12 17.77L5.82 21L7 13.87L2 9l6.91-1.74L12 1z"/>
                </svg>
                Privacy & Security
              </h3>
              <div style="display: grid; gap: 1rem;">
                <label style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                  <span style="color: rgba(255, 255, 255, 0.9);">Show online status</span>
                  <div style="width: 48px; height: 24px; background: #6b7280; border-radius: 12px; position: relative; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: all 0.3s;"></div>
                  </div>
                </label>
                <label style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                  <span style="color: rgba(255, 255, 255, 0.9);">Read receipts</span>
                  <div style="width: 48px; height: 24px; background: #10b981; border-radius: 12px; position: relative; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; right: 2px; transition: all 0.3s;"></div>
                  </div>
                </label>
              </div>
            </div>

            <!-- Theme Settings -->
            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
              <h3 style="margin: 0 0 1rem 0; color: #8b5cf6; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                </svg>
                Appearance
              </h3>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem;">
                <div onclick="selectTheme(this, 'dark')" style="padding: 1rem; border-radius: 8px; background: linear-gradient(135deg, #1e293b, #334155); border: 2px solid #8b5cf6; cursor: pointer; text-align: center; transition: all 0.3s;">
                  <div style="width: 24px; height: 16px; background: #1e293b; border-radius: 4px; margin: 0 auto 0.5rem; border: 1px solid rgba(255,255,255,0.2);"></div>
                  <small style="color: white;">Dark</small>
                </div>
                <div onclick="selectTheme(this, 'light')" style="padding: 1rem; border-radius: 8px; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border: 2px solid transparent; cursor: pointer; text-align: center; transition: all 0.3s;">
                  <div style="width: 24px; height: 16px; background: white; border-radius: 4px; margin: 0 auto 0.5rem; border: 1px solid #e5e7eb;"></div>
                  <small style="color: #1e293b;">Light</small>
                </div>
                <div onclick="selectTheme(this, 'auto')" style="padding: 1rem; border-radius: 8px; background: linear-gradient(135deg, #6b7280, #9ca3af); border: 2px solid transparent; cursor: pointer; text-align: center; transition: all 0.3s;">
                  <div style="width: 24px; height: 16px; background: linear-gradient(to right, #1e293b 50%, white 50%); border-radius: 4px; margin: 0 auto 0.5rem; border: 1px solid rgba(255,255,255,0.3);"></div>
                  <small style="color: white;">Auto</small>
                </div>
              </div>
            </div>
          </div>

          <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
            <button onclick="closeSettingsModal(this)" style="
              padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.1);
              border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 10px;
              color: white; cursor: pointer; transition: all 0.3s ease;
              font-weight: 500; font-size: 0.875rem;
            " onmouseenter="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.1)'">
              Cancel
            </button>
            <button onclick="saveSettings(); closeSettingsModal(this)" style="
              padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #8b5cf6, #a855f7);
              border: none; border-radius: 10px; color: white; cursor: pointer;
              transition: all 0.3s ease; font-weight: 500; font-size: 0.875rem;
            " onmouseenter="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(139, 92, 246, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
              Save Changes
            </button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Show animation
      setTimeout(() => {
        modal.style.opacity = '1';
        const content = modal.querySelector('div');
        content.style.transform = 'scale(1) translateY(0)';
      }, 100);
      
      // Close on outside click
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          closeSettingsModal(modal);
        }
      });
      
      setTimeout(() => {
        icon.style.transform = '';
      }, 400);
    }

    function closeSettingsModal(element) {
      const modal = element.closest('[style*="position: fixed"]');
      modal.style.opacity = '0';
      const content = modal.querySelector('div');
      content.style.transform = 'scale(0.8) translateY(30px)';
      
      setTimeout(() => modal.remove(), 400);
    }

    function selectTheme(element, theme) {
      // Remove selection from all theme options
      const themes = element.parentElement.children;
      for (let i = 0; i < themes.length; i++) {
        themes[i].style.border = '2px solid transparent';
      }
      
      // Select current theme
      element.style.border = '2px solid #8b5cf6';
      
      showAdvancedNotification(`${theme.charAt(0).toUpperCase() + theme.slice(1)} theme selected! 🎨`, 'success');
    }

    function saveSettings() {
      showAdvancedNotification('Settings saved successfully! ⚙️', 'success');
    }

    // Cookie Consent System
    class CookieConsent {
      constructor() {
        this.cookieName = 'flow_cookie_consent';
        this.cookieExpires = 365; // days
        this.init();
      }

      init() {
        if (!this.hasConsent()) {
          this.showBanner();
        }
      }

      hasConsent() {
        return localStorage.getItem(this.cookieName) !== null;
      }

      setConsent(preferences) {
        localStorage.setItem(this.cookieName, JSON.stringify({
          necessary: true,
          analytics: preferences.analytics || false,
          marketing: preferences.marketing || false,
          preferences: preferences.preferences || false,
          timestamp: new Date().getTime()
        }));
        this.hideBanner();
      }

      getConsent() {
        const consent = localStorage.getItem(this.cookieName);
        return consent ? JSON.parse(consent) : null;
      }

      showBanner() {
        const banner = document.createElement('div');
        banner.id = 'cookie-banner';
        banner.style.cssText = `
          position: fixed; bottom: 0; left: 0; right: 0; z-index: 10002;
          background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
          border-top: 3px solid rgba(245, 158, 11, 0.8);
          box-shadow: 0 -8px 25px rgba(0, 0, 0, 0.2);
          backdrop-filter: blur(15px);
          transform: translateY(100%);
          transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        `;

        banner.innerHTML = `
          <div style="max-width: 1400px; margin: 0 auto; padding: 1.5rem 2rem;">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
              <div style="display: flex; align-items: center; gap: 1rem; flex: 1; min-width: 300px;">
                <div style="
                  width: 48px; height: 48px; 
                  background: linear-gradient(135deg, #f59e0b, #d97706);
                  border-radius: 50%; display: flex; align-items: center; justify-content: center;
                  flex-shrink: 0;
                ">
                  <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.09 0 2.14-.18 3.12-.5l1.42 1.42C15.12 23.58 13.6 24 12 24 5.37 24 0 18.63 0 12S5.37 0 12 0s12 5.37 12 12c0 1.6-.42 3.12-1.08 4.54l-1.42-1.42c.32-.98.5-2.03.5-3.12 0-5.52-4.48-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                  </svg>
                </div>
                <div style="color: white; flex: 1;">
                  <h3 style="margin: 0 0 0.25rem 0; font-size: 1.1rem; font-weight: 600;">
                    🍪 We use cookies to enhance your experience
                  </h3>
                  <p style="margin: 0; font-size: 0.875rem; color: rgba(255, 255, 255, 0.8); line-height: 1.4;">
                    We use essential cookies to make our site work. We'd also like to set analytics cookies to help us improve our platform. 
                    <button onclick="cookieConsent.showSettings()" style="color: #f59e0b; background: none; border: none; text-decoration: underline; cursor: pointer; font-size: inherit;">
                      Customize your preferences
                    </button>
                  </p>
                </div>
              </div>
              <div style="display: flex; gap: 0.75rem; align-items: center; flex-shrink: 0;">
                <button onclick="cookieConsent.rejectAll()" style="
                  padding: 0.75rem 1.25rem; background: rgba(255, 255, 255, 0.1);
                  border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px;
                  color: rgba(255, 255, 255, 0.9); cursor: pointer; transition: all 0.3s ease;
                  font-weight: 500; font-size: 0.875rem;
                " onmouseenter="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.1)'">
                  Reject All
                </button>
                <button onclick="cookieConsent.acceptAll()" style="
                  padding: 0.75rem 1.25rem; background: linear-gradient(135deg, #f59e0b, #d97706);
                  border: none; border-radius: 8px; color: white; cursor: pointer;
                  transition: all 0.3s ease; font-weight: 600; font-size: 0.875rem;
                " onmouseenter="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(245, 158, 11, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
                  Accept All
                </button>
              </div>
            </div>
          </div>
        `;

        document.body.appendChild(banner);
        
        // Show banner with animation
        setTimeout(() => {
          banner.style.transform = 'translateY(0)';
        }, 100);
      }

      hideBanner() {
        const banner = document.getElementById('cookie-banner');
        if (banner) {
          banner.style.transform = 'translateY(100%)';
          setTimeout(() => banner.remove(), 400);
        }
      }

      acceptAll() {
        this.setConsent({
          analytics: true,
          marketing: true,
          preferences: true
        });
        showAdvancedNotification('All cookies accepted! 🍪', 'success');
      }

      rejectAll() {
        this.setConsent({
          analytics: false,
          marketing: false,
          preferences: false
        });
        showAdvancedNotification('Only essential cookies will be used', 'info');
      }

      showSettings() {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed; top: 0; left: 0; width: 100%; height: 100%;
          background: rgba(0, 0, 0, 0.7); display: flex; align-items: center;
          justify-content: center; z-index: 10003; backdrop-filter: blur(8px);
          opacity: 0; transition: opacity 0.4s ease;
        `;

        modal.innerHTML = `
          <div style="
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border-radius: 20px; padding: 2.5rem; max-width: 650px; width: 90%;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: scale(0.8) translateY(30px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            color: white; max-height: 85vh; overflow-y: auto;
          ">
            <div style="text-align: center; margin-bottom: 2rem;">
              <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <svg width="32" height="32" fill="white" viewBox="0 0 24 24">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.09 0 2.14-.18 3.12-.5l1.42 1.42C15.12 23.58 13.6 24 12 24 5.37 24 0 18.63 0 12S5.37 0 12 0s12 5.37 12 12c0 1.6-.42 3.12-1.08 4.54l-1.42-1.42c.32-.98.5-2.03.5-3.12 0-5.52-4.48-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                </svg>
              </div>
              <h2 style="margin: 0 0 0.5rem 0; font-size: 1.75rem; font-weight: 700;">Cookie Preferences</h2>
              <p style="margin: 0; color: rgba(255, 255, 255, 0.7);">Choose which cookies you want to accept</p>
            </div>

            <div style="display: grid; gap: 1.5rem; margin-bottom: 2rem;">
              <!-- Essential Cookies -->
              <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                  <h3 style="margin: 0; color: #10b981; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 1l3.09 6.26L22 9l-5 4.87L18.18 21L12 17.77L5.82 21L7 13.87L2 9l6.91-1.74L12 1z"/>
                    </svg>
                    Essential Cookies
                  </h3>
                  <div style="width: 48px; height: 24px; background: #10b981; border-radius: 12px; position: relative;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; right: 2px;"></div>
                  </div>
                </div>
                <p style="margin: 0; color: rgba(255, 255, 255, 0.8); font-size: 0.875rem; line-height: 1.4;">
                  These cookies are necessary for the website to function and cannot be switched off. They enable core functionality such as security, network management, and accessibility.
                </p>
              </div>

              <!-- Analytics Cookies -->
              <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                  <h3 style="margin: 0; color: #3b82f6; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                    Analytics Cookies
                  </h3>
                  <div id="analytics-toggle" onclick="toggleCookie('analytics')" style="width: 48px; height: 24px; background: #6b7280; border-radius: 12px; position: relative; cursor: pointer; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: all 0.3s;"></div>
                  </div>
                </div>
                <p style="margin: 0; color: rgba(255, 255, 255, 0.8); font-size: 0.875rem; line-height: 1.4;">
                  These cookies help us understand how visitors interact with our website by collecting and reporting anonymous information. This helps us improve our services.
                </p>
              </div>

              <!-- Marketing Cookies -->
              <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                  <h3 style="margin: 0; color: #ef4444; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                    </svg>
                    Marketing Cookies
                  </h3>
                  <div id="marketing-toggle" onclick="toggleCookie('marketing')" style="width: 48px; height: 24px; background: #6b7280; border-radius: 12px; position: relative; cursor: pointer; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: all 0.3s;"></div>
                  </div>
                </div>
                <p style="margin: 0; color: rgba(255, 255, 255, 0.8); font-size: 0.875rem; line-height: 1.4;">
                  These cookies are used to track visitors across websites to display relevant and engaging advertisements for individual users.
                </p>
              </div>

              <!-- Preference Cookies -->
              <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.1);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                  <h3 style="margin: 0; color: #8b5cf6; font-size: 1.125rem; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9l-5 4.87L18.18 21L12 17.77L5.82 21L7 13.87L2 9l6.91-1.74L12 1z"/>
                    </svg>
                    Preference Cookies
                  </h3>
                  <div id="preferences-toggle" onclick="toggleCookie('preferences')" style="width: 48px; height: 24px; background: #6b7280; border-radius: 12px; position: relative; cursor: pointer; transition: background 0.3s;">
                    <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: all 0.3s;"></div>
                  </div>
                </div>
                <p style="margin: 0; color: rgba(255, 255, 255, 0.8); font-size: 0.875rem; line-height: 1.4;">
                  These cookies remember choices you make to give you better functionality and personal features such as language selection and region.
                </p>
              </div>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: flex-end; padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
              <button onclick="closeCookieSettings()" style="
                padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 10px;
                color: white; cursor: pointer; transition: all 0.3s ease;
                font-weight: 500; font-size: 0.875rem;
              " onmouseenter="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseleave="this.style.background='rgba(255, 255, 255, 0.1)'">
                Cancel
              </button>
              <button onclick="saveCookiePreferences()" style="
                padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #f59e0b, #d97706);
                border: none; border-radius: 10px; color: white; cursor: pointer;
                transition: all 0.3s ease; font-weight: 500; font-size: 0.875rem;
              " onmouseenter="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(245, 158, 11, 0.4)'" onmouseleave="this.style.transform=''; this.style.boxShadow=''">
                Save Preferences
              </button>
            </div>
          </div>
        `;

        document.body.appendChild(modal);

        // Show modal with animation
        setTimeout(() => {
          modal.style.opacity = '1';
          const content = modal.querySelector('div');
          content.style.transform = 'scale(1) translateY(0)';
        }, 100);

        // Close on outside click
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            closeCookieSettings();
          }
        });
      }
    }

    // Cookie toggle states
    const cookieStates = {
      analytics: false,
      marketing: false,
      preferences: false
    };

    function toggleCookie(type) {
      cookieStates[type] = !cookieStates[type];
      const toggle = document.getElementById(`${type}-toggle`);
      const indicator = toggle.querySelector('div');
      
      if (cookieStates[type]) {
        toggle.style.background = '#10b981';
        indicator.style.transform = 'translateX(24px)';
      } else {
        toggle.style.background = '#6b7280';
        indicator.style.transform = 'translateX(0)';
      }
    }

    function saveCookiePreferences() {
      cookieConsent.setConsent(cookieStates);
      closeCookieSettings();
      showAdvancedNotification('Cookie preferences saved! 🍪', 'success');
    }

    function closeCookieSettings() {
      const modal = document.querySelector('[style*="z-index: 10003"]');
      if (modal) {
        modal.style.opacity = '0';
        const content = modal.querySelector('div');
        content.style.transform = 'scale(0.8) translateY(30px)';
        setTimeout(() => modal.remove(), 400);
      }
    }

    // Initialize cookie consent system
    const cookieConsent = new CookieConsent();

    // Add cookie management to footer
    function addCookieFooterButton() {
      const footer = document.querySelector('footer');
      if (footer) {
        const policyLinks = footer.querySelector('div[style*="display: flex; gap: 1.5rem"]');
        if (policyLinks) {
          const cookieButton = document.createElement('a');
          cookieButton.href = '#';
          cookieButton.onclick = (e) => {
            e.preventDefault();
            cookieConsent.showSettings();
          };
          cookieButton.style.cssText = 'color: rgba(255, 255, 255, 0.6); text-decoration: none; font-size: 0.875rem; transition: all 0.3s ease; padding: 0.25rem 0.5rem; border-radius: 4px;';
          cookieButton.onmouseenter = function() {
            this.style.color = 'white';
            this.style.background = 'rgba(255, 255, 255, 0.1)';
          };
          cookieButton.onmouseleave = function() {
            this.style.color = 'rgba(255, 255, 255, 0.6)';
            this.style.background = '';
          };
          cookieButton.textContent = 'Cookie Settings';
          
          policyLinks.appendChild(cookieButton);
        }
      }
    }

    // Initialize cookie footer button when page loads
    document.addEventListener('DOMContentLoaded', addCookieFooterButton);
  </script>
</body>
</html>