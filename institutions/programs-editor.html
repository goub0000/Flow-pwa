<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Programs Workspace - Flow</title>
  
  <!-- External CSS -->
  <link rel="stylesheet" href="/assets/css/base.css">
  <link rel="stylesheet" href="/assets/css/institutions.css">
  
  <!-- jsPDF library for direct PDF generation -->
  <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
  
  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/img/favicon.png" type="image/png">
  
  <style>
    /* Reset and base styles */
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #f8fafc;
      overflow: hidden;
    }

    /* Main workspace container - fixed height, flexible layout */
    .workspace-container {
      position: fixed;
      top: 60px; /* Account for navigation header */
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      background: #ffffff;
    }

    /* Left Sidebar - Programs List */
    .sidebar {
      width: 320px;
      min-width: 320px;
      background: #ffffff;
      border-right: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-header {
      padding: 24px;
      border-bottom: 1px solid #e5e7eb;
      background: #ffffff;
      flex-shrink: 0;
    }

    .sidebar-title {
      margin: 0 0 20px 0;
      font-size: 1.5rem;
      font-weight: 700;
      color: #111827;
    }

    .search-container {
      position: relative;
      margin-bottom: 16px;
    }

    .search-input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
      background: #f9fafb;
      transition: all 0.2s;
    }

    .search-input:focus {
      outline: none;
      border-color: #3b82f6;
      background: #ffffff;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      color: #6b7280;
    }

    .filter-tabs {
      display: flex;
      gap: 4px;
      background: #f1f5f9;
      padding: 4px;
      border-radius: 8px;
    }

    .filter-tab {
      flex: 1;
      padding: 8px 12px;
      background: transparent;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      color: #64748b;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .filter-tab.active {
      background: #ffffff;
      color: #1e293b;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .programs-list {
      flex: 1;
      overflow-y: auto;
      padding: 16px 24px;
    }

    .new-program-btn {
      width: 100%;
      padding: 16px;
      border: 2px dashed #cbd5e1;
      border-radius: 8px;
      background: #f8fafc;
      color: #64748b;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .new-program-btn:hover {
      border-color: #3b82f6;
      background: #eff6ff;
      color: #1d4ed8;
    }

    .program-item {
      padding: 16px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      background: #ffffff;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .program-item:hover {
      border-color: #3b82f6;
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
    }

    .program-item.active {
      border-color: #3b82f6;
      background: #eff6ff;
    }

    .program-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .program-title {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      margin: 0;
      line-height: 1.4;
    }

    .status-badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.025em;
    }

    .status-badge.draft {
      background: #fef3c7;
      color: #92400e;
    }

    .status-badge.review {
      background: #dbeafe;
      color: #1e40af;
    }

    .status-badge.published {
      background: #d1fae5;
      color: #065f46;
    }

    .status-badge.pending-review {
      background: #fef3c7;
      color: #92400e;
    }

    .program-meta {
      font-size: 12px;
      color: #6b7280;
      line-height: 1.4;
    }

    /* Main Content Area */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: #ffffff;
    }

    /* Empty State */
    .empty-state {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 48px;
      text-align: center;
    }

    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: 24px;
      opacity: 0.7;
    }

    .empty-state h2 {
      margin: 0 0 12px 0;
      font-size: 1.75rem;
      font-weight: 700;
      color: #111827;
    }

    .empty-state p {
      margin: 0 0 32px 0;
      font-size: 1rem;
      color: #6b7280;
      max-width: 480px;
      line-height: 1.6;
    }

    .empty-state-actions {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
    }

    /* Program Editor */
    .program-editor {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .editor-header {
      padding: 24px 32px;
      border-bottom: 1px solid #e5e7eb;
      background: #ffffff;
      flex-shrink: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .editor-title-section h1 {
      margin: 0 0 8px 0;
      font-size: 1.75rem;
      font-weight: 700;
      color: #111827;
    }

    .editor-meta {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 14px;
      color: #6b7280;
    }

    .language-selector {
      display: flex;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      overflow: hidden;
    }

    .language-btn {
      padding: 8px 16px;
      background: #ffffff;
      border: none;
      font-size: 13px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s;
    }

    .language-btn.active {
      background: #3b82f6;
      color: #ffffff;
    }

    .editor-tabs {
      display: flex;
      background: #f8fafc;
      border-bottom: 1px solid #e5e7eb;
      overflow-x: auto;
      flex-shrink: 0;
    }

    .editor-tab {
      padding: 16px 24px;
      background: transparent;
      border: none;
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .editor-tab:hover {
      color: #374151;
    }

    .editor-tab.active {
      color: #3b82f6;
      background: #ffffff;
      border-bottom-color: #3b82f6;
    }

    .editor-content {
      flex: 1;
      overflow-y: auto;
      padding: 32px;
      background: #ffffff;
    }

    /* Form Styles */
    .form-section {
      margin-bottom: 40px;
    }

    .form-section-title {
      margin: 0 0 24px 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: #111827;
    }

    .form-row {
      display: flex;
      gap: 24px;
      margin-bottom: 24px;
    }

    .form-col {
      flex: 1;
    }

    .form-col-2 {
      flex: 2;
    }

    .form-field {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
    }

    .form-label.required::after {
      content: " *";
      color: #dc2626;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.2s;
      background: #ffffff;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    /* Right Actions Panel */
    .actions-panel {
      width: 280px;
      min-width: 280px;
      background: #ffffff;
      border-left: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .actions-header {
      padding: 24px;
      border-bottom: 1px solid #e5e7eb;
      background: #ffffff;
      flex-shrink: 0;
    }

    .actions-title {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: #111827;
    }

    .actions-content {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }

    .action-group {
      margin-bottom: 32px;
    }

    .action-group-title {
      margin: 0 0 16px 0;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      text-transform: uppercase;
      letter-spacing: 0.025em;
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    /* Button Styles */
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 16px;
      border: 1px solid;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
    }

    .btn-primary {
      background: #3b82f6;
      border-color: #3b82f6;
      color: #000000 !important;
    }

    .btn-primary:hover {
      background: #2563eb;
      border-color: #2563eb;
      color: #000000 !important;
    }

    .btn-primary svg {
      fill: #000000 !important;
      stroke: #000000 !important;
    }

    .btn-primary:hover svg {
      fill: #000000 !important;
      stroke: #000000 !important;
    }

    .btn-secondary {
      background: #ffffff;
      border-color: #d1d5db;
      color: #374151;
    }

    .btn-secondary:hover {
      background: #f9fafb;
      border-color: #9ca3af;
    }

    .btn-success {
      background: #10b981;
      border-color: #10b981;
      color: #ffffff;
    }

    .btn-success:hover {
      background: #059669;
      border-color: #059669;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn:disabled:hover {
      background: initial;
      border-color: initial;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .sidebar {
        width: 280px;
        min-width: 280px;
      }
      
      .actions-panel {
        width: 240px;
        min-width: 240px;
      }
      
      .form-row {
        flex-direction: column;
        gap: 16px;
      }
    }

    @media (max-width: 768px) {
      .workspace-container {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        min-width: auto;
        height: 200px;
        border-right: none;
        border-bottom: 1px solid #e5e7eb;
      }
      
      .actions-panel {
        position: fixed;
        top: 0;
        right: -280px;
        height: 100vh;
        z-index: 1000;
        transition: right 0.3s ease;
        box-shadow: -4px 0 8px rgba(0, 0, 0, 0.1);
      }
      
      .actions-panel.open {
        right: 0;
      }
      
      .editor-content {
        padding: 24px;
      }
    }

    /* Tab placeholder styling */
    .tab-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 80px 40px;
      text-align: center;
      color: #6b7280;
      font-size: 16px;
      background: #f8fafc;
      border-radius: 8px;
      border: 2px dashed #d1d5db;
    }

    /* Utilities */
    .hidden {
      display: none !important;
    }

    .icon {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }
  </style>
</head>

<body>
  <!-- Navigation Header -->
  <header style="background: #ffffff; border-bottom: 1px solid #e5e7eb; padding: 12px 24px; position: sticky; top: 0; z-index: 100;">
    <nav style="display: flex; align-items: center; gap: 12px;">
      <a href="/institutions/programs.html" style="display: flex; align-items: center; gap: 8px; text-decoration: none; color: #5a5bb8; font-weight: 500; padding: 8px 12px; border-radius: 6px; transition: all 0.2s ease;" onmouseover="this.style.background='rgba(90, 91, 184, 0.1)'" onmouseout="this.style.background='transparent'">
        <svg style="width: 16px; height: 16px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
        </svg>
        Programs Management
      </a>
      <span style="color: #d1d5db;">/</span>
      <span style="color: #6b7280; font-weight: 500;">Program Editor</span>
    </nav>
  </header>

  <div class="workspace-container">
    
    <!-- Left Sidebar: Programs List -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2 class="sidebar-title">Programs</h2>
        
        <!-- Search -->
        <div class="search-container">
          <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          <input type="text" class="search-input" placeholder="Search programs..." id="searchInput">
        </div>
        
        <!-- Filter Tabs -->
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="all">All</button>
          <button class="filter-tab" data-filter="draft">Draft</button>
          <button class="filter-tab" data-filter="review">Review</button>
          <button class="filter-tab" data-filter="published">Published</button>
        </div>
      </div>
      
      <div class="programs-list">
        <!-- New Program Button -->
        <button class="new-program-btn" onclick="showNewProgramModal()">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
          </svg>
          New Program
        </button>
        
        <!-- Sample Programs -->
        <div class="program-item active" data-program-id="cs-bachelor" onclick="loadProgram('cs-bachelor')">
          <div class="program-header">
            <h4 class="program-title">Bachelor of Computer Science</h4>
            <span class="status-badge draft">Draft</span>
          </div>
          <div class="program-meta">
            Undergraduate â€¢ 120 credits<br>
            Modified 2 hours ago
          </div>
        </div>
        
        <div class="program-item" data-program-id="mba-program" onclick="loadProgram('mba-program')">
          <div class="program-header">
            <h4 class="program-title">Master of Business Administration</h4>
            <span class="status-badge review">Review</span>
          </div>
          <div class="program-meta">
            Graduate â€¢ 60 credits<br>
            Modified yesterday
          </div>
        </div>
        
        <div class="program-item" data-program-id="data-cert" onclick="loadProgram('data-cert')">
          <div class="program-header">
            <h4 class="program-title">Data Science Certificate</h4>
            <span class="status-badge published">Published</span>
          </div>
          <div class="program-meta">
            Certificate â€¢ 18 credits<br>
            Modified 3 days ago
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      
      <!-- Empty State (shown initially) -->
      <div class="empty-state" id="emptyState">
        <div class="empty-state-icon">ðŸ“š</div>
        <h2>Welcome to Programs Workspace</h2>
        <p>Create and manage your academic programs with powerful tools and templates. Get started by choosing an option below to build comprehensive program information.</p>
        <div class="empty-state-actions">
          <button class="btn btn-primary" onclick="showTemplateSelector()">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            Start from Template
          </button>
          <button class="btn btn-secondary" onclick="startFromScratch()">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            Design from Scratch
          </button>
        </div>
      </div>

      <!-- Program Editor (hidden initially) -->
      <div class="program-editor hidden" id="programEditor">
        
        <!-- Editor Header -->
        <div class="editor-header">
          <div class="editor-title-section">
            <h1 id="editorTitle">Bachelor of Computer Science</h1>
            <div class="editor-meta">
              <span>Last saved: <span id="lastSaved">2 minutes ago</span></span>
              <span>â€¢</span>
              <span>Version: <span id="currentVersion">1.2</span></span>
              <span>â€¢</span>
              <span>Status: <span id="currentStatus">Draft</span></span>
            </div>
          </div>
          <div class="language-selector">
            <button class="language-btn active">EN</button>
            <button class="language-btn">FR</button>
          </div>
        </div>

        <!-- Editor Tabs -->
        <nav class="editor-tabs">
          <button class="editor-tab active" data-tab="overview">Overview</button>
          <button class="editor-tab" data-tab="outcomes">Outcomes</button>
          <button class="editor-tab" data-tab="curriculum">Curriculum</button>
          <button class="editor-tab" data-tab="admissions">Admissions</button>
          <button class="editor-tab" data-tab="tuition">Tuition & Fees</button>
          <button class="editor-tab" data-tab="delivery">Delivery & Location</button>
          <button class="editor-tab" data-tab="faculty">Faculty & Contacts</button>
          <button class="editor-tab" data-tab="faq">FAQ</button>
          <button class="editor-tab" data-tab="marketing">Marketing</button>
          <button class="editor-tab" data-tab="policies">Policies</button>
        </nav>

        <!-- Editor Content -->
        <div class="editor-content" id="editorContent">
          <!-- Content will be loaded dynamically based on active tab -->
        </div>
      </div>
    </main>

    <!-- Right Actions Panel -->
    <aside class="actions-panel">
      <div class="actions-header">
        <h3 class="actions-title">Actions</h3>
      </div>
      
      <div class="actions-content">
        
        <!-- Publishing Actions -->
        <div class="action-group">
          <h4 class="action-group-title">Publishing</h4>
          <div class="action-buttons">
            <button class="btn btn-primary" onclick="saveProgram()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
              Save
            </button>
            <button class="btn btn-secondary" onclick="previewProgram()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
              </svg>
              Preview
            </button>
            <button class="btn btn-secondary" onclick="submitForReview()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
              </svg>
              Submit for Review
            </button>
            <button class="btn btn-success" onclick="publishProgram()" disabled>
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
              </svg>
              Publish
            </button>
          </div>
        </div>

        <!-- Tools -->
        <div class="action-group">
          <h4 class="action-group-title">Tools</h4>
          <div class="action-buttons">
            <button class="btn btn-secondary" onclick="duplicateProgram()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
              </svg>
              Duplicate
            </button>
            <button class="btn btn-secondary" onclick="exportProgram()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              Export
            </button>
            <button class="btn btn-secondary" onclick="showVersionHistory()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Version History
            </button>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <script>
    // Global state
    let currentProgram = null;
    let programsData = [];
    let isDirty = false;

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      initializeWorkspace();
    });

    // Initialize the workspace
    function initializeWorkspace() {
      console.log('ðŸš€ Initializing Programs Workspace');
      
      // Load sample data
      loadSampleData();
      
      // Set up event listeners
      setupEventListeners();
      
      // Load first program by default and switch to overview tab
      // First switch to overview tab, then load program data
      switchTab('overview');
      loadProgram('cs-bachelor');
    }

    // Load sample program data
    function loadSampleData() {
      programsData = [
        {
          id: 'cs-bachelor',
          title: 'Bachelor of Computer Science',
          code: 'CS-BACH-001',
          type: 'undergraduate',
          degree: 'Bachelor of Science',
          description: 'Our Computer Science program provides students with a comprehensive foundation in computing principles, software development, and problem-solving techniques essential for success in the rapidly evolving technology industry.',
          duration: '4 years',
          credits: 120,
          startDate: '2024-09-01',
          status: 'draft',
          lastModified: new Date(Date.now() - 2 * 60 * 60 * 1000),
          version: '1.2'
        },
        {
          id: 'mba-program',
          title: 'Master of Business Administration',
          code: 'MBA-001',
          type: 'graduate',
          degree: 'Master of Business Administration',
          description: 'A comprehensive graduate program designed to develop strategic thinking, leadership skills, and business acumen for the modern marketplace.',
          duration: '2 years',
          credits: 60,
          startDate: '2024-09-01',
          status: 'review',
          lastModified: new Date(Date.now() - 24 * 60 * 60 * 1000),
          version: '2.1'
        },
        {
          id: 'data-cert',
          title: 'Data Science Certificate',
          code: 'DS-CERT-001',
          type: 'certificate',
          degree: 'Certificate in Data Science',
          description: 'An intensive program covering statistical analysis, machine learning, and data visualization using modern tools and techniques.',
          duration: '6 months',
          credits: 18,
          startDate: '2024-09-01',
          status: 'published',
          lastModified: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
          version: '1.0'
        }
      ];
    }

    // Set up event listeners
    function setupEventListeners() {
      // Filter tabs
      document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          filterPrograms(this.dataset.filter);
        });
      });

      // Search input
      const searchInput = document.getElementById('searchInput');
      searchInput.addEventListener('input', function() {
        searchPrograms(this.value);
      });

      // Form inputs for auto-save
      const formInputs = document.querySelectorAll('#programEditor input, #programEditor select, #programEditor textarea');
      formInputs.forEach(input => {
        input.addEventListener('input', function() {
          isDirty = true;
          debounce(autoSave, 2000)();
        });
      });

      // Tab switching
      document.querySelectorAll('.editor-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          switchTab(this.dataset.tab);
        });
      });
    }

    // Load a specific program
    function loadProgram(programId) {
      console.log('ðŸ“‚ Loading program:', programId);
      
      const program = programsData.find(p => p.id === programId);
      if (!program) {
        console.error('Program not found:', programId);
        return;
      }

      currentProgram = { ...program };
      
      // Update UI
      updateActiveProgram(programId);
      showEditor();
      loadProgramData(program);
      
      console.log('âœ… Program loaded:', program.title);
    }

    // Update active program in sidebar
    function updateActiveProgram(programId) {
      document.querySelectorAll('.program-item').forEach(item => {
        item.classList.remove('active');
      });
      
      const activeItem = document.querySelector(`[data-program-id="${programId}"]`);
      if (activeItem) {
        activeItem.classList.add('active');
      }
    }

    // Show editor and hide empty state
    function showEditor() {
      document.getElementById('emptyState').classList.add('hidden');
      document.getElementById('programEditor').classList.remove('hidden');
    }

    // Load program data into form
    function loadProgramData(program) {
      // Update title in header
      const editorTitle = document.getElementById('editorTitle');
      if (editorTitle) editorTitle.textContent = program.title;
      
      // Update version and status in sidebar
      const currentVersion = document.getElementById('currentVersion');
      if (currentVersion) currentVersion.textContent = program.version || '1.0';
      
      const currentStatus = document.getElementById('currentStatus');
      if (currentStatus) currentStatus.textContent = program.status || 'draft';
      
      // Try to set form values only if elements exist (defensive programming)
      const formFields = [
        { id: 'programTitle', value: program.title || '' },
        { id: 'programCode', value: program.code || '' },
        { id: 'programType', value: program.type || 'undergraduate' },
        { id: 'programDegree', value: program.degree || '' },
        { id: 'programDescription', value: program.description || '' },
        { id: 'programDuration', value: program.duration || '' },
        { id: 'programCredits', value: program.credits || '' },
        { id: 'programStartDate', value: program.startDate || '' }
      ];
      
      formFields.forEach(field => {
        const element = document.getElementById(field.id);
        if (element) {
          element.value = field.value;
        }
      });
      
      updateLastSavedTime(program.lastModified);
      isDirty = false;
    }

    // Update last saved time
    function updateLastSavedTime(date) {
      const now = new Date();
      const diff = now - date;
      const minutes = Math.floor(diff / 60000);
      const hours = Math.floor(diff / 3600000);
      const days = Math.floor(diff / 86400000);
      
      let timeText;
      if (minutes < 1) timeText = 'just now';
      else if (minutes < 60) timeText = `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
      else if (hours < 24) timeText = `${hours} hour${hours > 1 ? 's' : ''} ago`;
      else timeText = `${days} day${days > 1 ? 's' : ''} ago`;
      
      document.getElementById('lastSaved').textContent = timeText;
    }

    // Save program
    function saveProgram() {
      if (!currentProgram) {
        alert('No program loaded');
        return;
      }
      
      // Get form data from current tab and general program data
      const formData = {};
      
      // Save basic program info (always available)
      const basicFields = ['programTitle', 'programCode', 'programType', 'programDegree', 'programDescription', 'programDuration', 'programCredits', 'programStartDate'];
      basicFields.forEach(fieldId => {
        const element = document.getElementById(fieldId);
        if (element) {
          const key = fieldId.replace('program', '').toLowerCase();
          formData[key] = element.type === 'number' ? parseInt(element.value) || 0 : element.value;
        }
      });

      // Save current tab-specific data
      const activeTab = document.querySelector('.editor-tab.active');
      if (activeTab) {
        const tabName = activeTab.dataset.tab;
        
        if (tabName === 'outcomes') {
          // Save learning outcomes data
          formData.learningOutcomes = [...learningOutcomesData];
          
          // Save other outcomes fields
          const outcomeFields = [
            'outcomesFramework', 'outcomesAlignment', 'cognitiveSkills', 'technicalSkills',
            'interpersonalSkills', 'professionalSkills', 'outcomesAssessment', 
            'graduateAttributes', 'careerPaths', 'furtherStudy'
          ];
          
          outcomeFields.forEach(fieldId => {
            const element = document.getElementById(fieldId);
            if (element) {
              formData[fieldId] = element.value;
            }
          });

          // Save assessment methods
          const selectedMethods = [];
          document.querySelectorAll('input[name="assessmentMethod"]:checked').forEach(checkbox => {
            selectedMethods.push(checkbox.value);
          });
          formData.assessmentMethods = selectedMethods;
        } else if (tabName === 'curriculum') {
          // Save curriculum data
          formData.courseCategories = [...courseCategoriesData];
          formData.concentrations = [...concentrationsData];
          
          // Save other curriculum fields
          const curriculumFields = [
            'curriculumModel', 'academicYears', 'periodsPerYear', 'coreCredits', 'electiveCredits', 
            'generalEdCredits', 'minorOptions', 'dualDegreeOptions', 'internshipRequirements',
            'capstoneProject', 'admissionPrerequisites', 'progressionRequirements', 'minimumGPA', 'graduationRequirements'
          ];
          
          curriculumFields.forEach(fieldId => {
            const element = document.getElementById(fieldId);
            if (element) {
              formData[fieldId] = element.type === 'number' ? parseInt(element.value) || 0 : element.value;
            }
          });

          // Save experiential learning options
          const selectedExperiential = [];
          document.querySelectorAll('input[name="experientialLearning"]:checked').forEach(checkbox => {
            selectedExperiential.push(checkbox.value);
          });
          formData.experientialLearning = selectedExperiential;
        }
      }
      
      // Update program
      Object.assign(currentProgram, formData);
      currentProgram.lastModified = new Date();
      
      // Update in data array
      const index = programsData.findIndex(p => p.id === currentProgram.id);
      if (index >= 0) {
        programsData[index] = currentProgram;
      }
      
      // Update UI
      updateLastSavedTime(currentProgram.lastModified);
      if (document.getElementById('editorTitle')) {
        document.getElementById('editorTitle').textContent = currentProgram.title;
      }
      
      // Update sidebar
      const programItem = document.querySelector(`[data-program-id="${currentProgram.id}"] .program-title`);
      if (programItem) {
        programItem.textContent = currentProgram.title;
      }
      
      isDirty = false;
      console.log('ðŸ’¾ Program saved:', currentProgram.title);
      alert('Program saved successfully!');
    }

    // Auto-save function
    function autoSave() {
      if (isDirty && currentProgram) {
        // Save current version before auto-save (every 10th save to avoid spam)
        const saveCount = (currentProgram.saveCount || 0) + 1;
        currentProgram.saveCount = saveCount;
        
        if (saveCount % 10 === 0) {
          saveCurrentVersion('Auto-save checkpoint #' + Math.floor(saveCount / 10));
        }
        
        console.log('ðŸ”„ Auto-saving... (save #' + saveCount + ')');
        saveProgram();
      }
    }

    // Filter programs
    function filterPrograms(filter) {
      const items = document.querySelectorAll('.program-item');
      items.forEach(item => {
        const programId = item.dataset.programId;
        const program = programsData.find(p => p.id === programId);
        
        if (filter === 'all' || program.status === filter) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    }

    // Search programs
    function searchPrograms(query) {
      const items = document.querySelectorAll('.program-item');
      const lowerQuery = query.toLowerCase();
      
      items.forEach(item => {
        const title = item.querySelector('.program-title').textContent.toLowerCase();
        const meta = item.querySelector('.program-meta').textContent.toLowerCase();
        
        if (title.includes(lowerQuery) || meta.includes(lowerQuery)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    }

    // Tab content system
    const tabContents = {
      overview: () => `
        <div class="form-section">
          <h3 class="form-section-title">Program Information</h3>
          
          <div class="form-row">
            <div class="form-col-2">
              <div class="form-field">
                <label for="programTitle" class="form-label required">Program Title</label>
                <input type="text" id="programTitle" class="form-input" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="programCode" class="form-label">Program Code</label>
                <input type="text" id="programCode" class="form-input">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="programType" class="form-label required">Program Type</label>
                <select id="programType" class="form-select" required>
                  <option value="undergraduate">Undergraduate</option>
                  <option value="graduate">Graduate</option>
                  <option value="certificate">Certificate</option>
                  <option value="online">Online/Distance</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="programDegree" class="form-label required">Degree Awarded</label>
                <input type="text" id="programDegree" class="form-input" required>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="programDescription" class="form-label required">Program Description</label>
            <textarea id="programDescription" class="form-textarea" required></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="programDuration" class="form-label required">Duration</label>
                <input type="text" id="programDuration" class="form-input" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="programCredits" class="form-label required">Total Credits</label>
                <input type="number" id="programCredits" class="form-input" min="1" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="programStartDate" class="form-label">Start Date</label>
                <input type="date" id="programStartDate" class="form-input">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Program Details</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="programLevel" class="form-label">Academic Level</label>
                <select id="programLevel" class="form-select">
                  <option value="">Select Level</option>
                  <option value="associate">Associate</option>
                  <option value="bachelor">Bachelor</option>
                  <option value="master">Master</option>
                  <option value="doctoral">Doctoral</option>
                  <option value="certificate">Certificate</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="programDiscipline" class="form-label">Discipline</label>
                <input type="text" id="programDiscipline" class="form-input" placeholder="e.g., Computer Science, Business">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="programFormat" class="form-label">Delivery Format</label>
                <select id="programFormat" class="form-select">
                  <option value="on-campus">On-Campus</option>
                  <option value="online">Online</option>
                  <option value="hybrid">Hybrid</option>
                  <option value="evening">Evening</option>
                  <option value="weekend">Weekend</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="programLanguage" class="form-label">Primary Language</label>
                <select id="programLanguage" class="form-select">
                  <option value="en">English</option>
                  <option value="fr">French</option>
                  <option value="es">Spanish</option>
                  <option value="de">German</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="programObjectives" class="form-label">Program Objectives</label>
            <textarea id="programObjectives" class="form-textarea" placeholder="List the main objectives and goals of this program..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Accreditation & Recognition</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="accreditationBody" class="form-label">Accrediting Body</label>
                <input type="text" id="accreditationBody" class="form-input" placeholder="e.g., ABET, AACSB">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="accreditationStatus" class="form-label">Status</label>
                <select id="accreditationStatus" class="form-select">
                  <option value="">Select Status</option>
                  <option value="accredited">Accredited</option>
                  <option value="pending">Pending</option>
                  <option value="candidate">Candidate Status</option>
                  <option value="not-applicable">Not Applicable</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="programRecognition" class="form-label">Professional Recognition</label>
            <textarea id="programRecognition" class="form-textarea" placeholder="List any professional bodies, certifications, or industry recognition..."></textarea>
          </div>
        </div>
      `,
      outcomes: () => `
        <div class="form-section">
          <h3 class="form-section-title">Program Learning Outcomes</h3>
          <p style="color: #6b7280; margin: 0 0 24px 0;">Define what students will know, understand, and be able to do upon successful completion of this program.</p>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="outcomesFramework" class="form-label">Learning Framework</label>
                <select id="outcomesFramework" class="form-select">
                  <option value="">Select Framework</option>
                  <option value="blooms">Bloom's Taxonomy</option>
                  <option value="solo">SOLO Taxonomy</option>
                  <option value="abet">ABET Criteria</option>
                  <option value="qaa">QAA Framework</option>
                  <option value="custom">Custom Framework</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="outcomesAlignment" class="form-label">Alignment</label>
                <select id="outcomesAlignment" class="form-select">
                  <option value="">Select Alignment</option>
                  <option value="institutional">Institutional Goals</option>
                  <option value="disciplinary">Disciplinary Standards</option>
                  <option value="professional">Professional Bodies</option>
                  <option value="industry">Industry Requirements</option>
                </select>
              </div>
            </div>
          </div>

          <div id="learningOutcomesList" style="margin-top: 24px;">
            <!-- Learning outcomes will be dynamically added here -->
          </div>

          <button type="button" class="btn btn-secondary" onclick="addLearningOutcome()" style="margin-top: 16px;">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
            Add Learning Outcome
          </button>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Skills & Competencies</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="cognitiveSkills" class="form-label">Cognitive Skills</label>
                <textarea id="cognitiveSkills" class="form-textarea" placeholder="Critical thinking, problem-solving, analysis, synthesis..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="technicalSkills" class="form-label">Technical Skills</label>
                <textarea id="technicalSkills" class="form-textarea" placeholder="Subject-specific knowledge, tools, methods, techniques..."></textarea>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="interpersonalSkills" class="form-label">Interpersonal Skills</label>
                <textarea id="interpersonalSkills" class="form-textarea" placeholder="Communication, teamwork, leadership, cultural awareness..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="professionalSkills" class="form-label">Professional Skills</label>
                <textarea id="professionalSkills" class="form-textarea" placeholder="Ethics, responsibility, lifelong learning, adaptability..."></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Assessment Strategy</h3>
          
          <div class="form-field">
            <label for="assessmentMethods" class="form-label">Assessment Methods</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="assessmentMethod" value="portfolio"> Portfolio Assessment
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="assessmentMethod" value="capstone"> Capstone Project
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="assessmentMethod" value="thesis"> Thesis/Dissertation
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="assessmentMethod" value="internship"> Internship/Practicum
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="assessmentMethod" value="examination"> Comprehensive Exam
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="assessmentMethod" value="presentation"> Oral Presentation
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="outcomesAssessment" class="form-label">Assessment Details</label>
            <textarea id="outcomesAssessment" class="form-textarea" placeholder="Describe how learning outcomes will be assessed and measured throughout the program..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Graduate Attributes & Employability</h3>
          
          <div class="form-field">
            <label for="graduateAttributes" class="form-label">Graduate Attributes</label>
            <textarea id="graduateAttributes" class="form-textarea" placeholder="Describe the key attributes and characteristics graduates will possess..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="careerPaths" class="form-label">Career Pathways</label>
                <textarea id="careerPaths" class="form-textarea" placeholder="List typical career paths and employment opportunities for graduates..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="furtherStudy" class="form-label">Further Study Options</label>
                <textarea id="furtherStudy" class="form-textarea" placeholder="Describe opportunities for further study and advanced degrees..."></textarea>
              </div>
            </div>
          </div>
        </div>
      `,
      curriculum: () => `
        <div class="form-section">
          <h3 class="form-section-title">Curriculum Structure</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="curriculumModel" class="form-label">Curriculum Model</label>
                <select id="curriculumModel" class="form-select">
                  <option value="">Select Model</option>
                  <option value="semester">Semester System</option>
                  <option value="quarter">Quarter System</option>
                  <option value="trimester">Trimester System</option>
                  <option value="modular">Modular System</option>
                  <option value="flexible">Flexible/Self-Paced</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="academicYears" class="form-label">Academic Years</label>
                <select id="academicYears" class="form-select">
                  <option value="1">1 Year</option>
                  <option value="2">2 Years</option>
                  <option value="3">3 Years</option>
                  <option value="4" selected>4 Years</option>
                  <option value="5">5 Years</option>
                  <option value="6">6 Years</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="periodsPerYear" class="form-label">Periods per Year</label>
                <select id="periodsPerYear" class="form-select">
                  <option value="2" selected>2 (Fall/Spring)</option>
                  <option value="3">3 (Fall/Winter/Spring)</option>
                  <option value="4">4 (Quarters)</option>
                  <option value="6">6 (Modules)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="coreCredits" class="form-label">Core Credits</label>
                <input type="number" id="coreCredits" class="form-input" value="60" min="0">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="electiveCredits" class="form-label">Elective Credits</label>
                <input type="number" id="electiveCredits" class="form-input" value="40" min="0">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="generalEdCredits" class="form-label">General Education</label>
                <input type="number" id="generalEdCredits" class="form-input" value="20" min="0">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Course Requirements</h3>
          
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div style="display: flex; gap: 12px;">
              <button type="button" class="btn btn-secondary" onclick="addCourseCategory()">
                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                Add Category
              </button>
              <button type="button" class="btn btn-secondary" onclick="importCourses()">
                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                </svg>
                Import Courses
              </button>
            </div>
            <div style="font-size: 14px; color: #6b7280;">
              Total Credits: <span id="totalCurriculumCredits" style="font-weight: 600;">0</span>
            </div>
          </div>

          <div id="courseCategoriesList">
            <!-- Course categories will be dynamically added here -->
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Academic Pathways & Specializations</h3>
          
          <div class="form-field">
            <label for="concentrations" class="form-label">Concentrations/Specializations</label>
            <div id="concentrationsList" style="margin-bottom: 16px;">
              <!-- Concentrations will be added here -->
            </div>
            <button type="button" class="btn btn-secondary" onclick="addConcentration()">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              Add Concentration
            </button>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="minorOptions" class="form-label">Available Minors</label>
                <textarea id="minorOptions" class="form-textarea" placeholder="List available minor programs and requirements..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="dualDegreeOptions" class="form-label">Dual Degree Options</label>
                <textarea id="dualDegreeOptions" class="form-textarea" placeholder="Describe dual degree programs and partnerships..."></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Experiential Learning</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="internshipRequirements" class="form-label">Internship Requirements</label>
                <textarea id="internshipRequirements" class="form-textarea" placeholder="Describe internship requirements, duration, and expectations..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="capstoneProject" class="form-label">Capstone Project</label>
                <textarea id="capstoneProject" class="form-textarea" placeholder="Describe the culminating capstone experience..."></textarea>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="practicalExperience" class="form-label">Other Practical Experiences</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="experientialLearning" value="co-op"> Co-operative Education
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="experientialLearning" value="service-learning"> Service Learning
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="experientialLearning" value="research"> Research Projects
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="experientialLearning" value="study-abroad"> Study Abroad
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="experientialLearning" value="clinical"> Clinical Experience
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="experientialLearning" value="practicum"> Field Practicum
              </label>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Prerequisites & Progression</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="admissionPrerequisites" class="form-label">Admission Prerequisites</label>
                <textarea id="admissionPrerequisites" class="form-textarea" placeholder="List required courses or qualifications for program entry..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="progressionRequirements" class="form-label">Progression Requirements</label>
                <textarea id="progressionRequirements" class="form-textarea" placeholder="Describe requirements to advance through the program..."></textarea>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="minimumGPA" class="form-label">Minimum GPA</label>
                <input type="number" id="minimumGPA" class="form-input" step="0.1" min="0" max="4" placeholder="e.g., 2.5">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="graduationRequirements" class="form-label">Graduation Requirements</label>
                <textarea id="graduationRequirements" class="form-textarea" placeholder="Describe specific requirements for graduation..."></textarea>
              </div>
            </div>
          </div>
        </div>
      `,
      admissions: () => `
        <div class="form-section">
          <h3 class="form-section-title">Basic Admission Requirements</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="admissionType" class="form-label">Admission Type</label>
                <select id="admissionType" class="form-select">
                  <option value="">Select Type</option>
                  <option value="open">Open Admission</option>
                  <option value="competitive">Competitive Admission</option>
                  <option value="selective">Selective Admission</option>
                  <option value="conditional">Conditional Admission</option>
                  <option value="rolling">Rolling Admission</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="applicationDeadline" class="form-label">Application Deadline</label>
                <input type="date" id="applicationDeadline" class="form-input">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="enrollmentCap" class="form-label">Enrollment Cap</label>
                <input type="number" id="enrollmentCap" class="form-input" placeholder="e.g., 150" min="1">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="minimumAge" class="form-label">Minimum Age</label>
                <input type="number" id="minimumAge" class="form-input" value="16" min="14" max="25">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="residencyRequirement" class="form-label">Residency Requirement</label>
                <select id="residencyRequirement" class="form-select">
                  <option value="none">No Requirement</option>
                  <option value="state">State Residents Only</option>
                  <option value="domestic">Domestic Students Only</option>
                  <option value="international">International Students Welcome</option>
                  <option value="preference">State Resident Preference</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="admissionPriority" class="form-label">Admission Priority</label>
                <select id="admissionPriority" class="form-select">
                  <option value="merit">Merit-Based</option>
                  <option value="first-come">First Come, First Served</option>
                  <option value="lottery">Lottery System</option>
                  <option value="weighted">Weighted Criteria</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Academic Prerequisites</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="minimumGPA" class="form-label">Minimum GPA</label>
                <input type="number" id="minimumGPA" class="form-input" step="0.1" min="0" max="4.0" placeholder="e.g., 2.5">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="gpaScale" class="form-label">GPA Scale</label>
                <select id="gpaScale" class="form-select">
                  <option value="4.0">4.0 Scale</option>
                  <option value="5.0">5.0 Scale</option>
                  <option value="100">100 Point Scale</option>
                  <option value="letter">Letter Grade</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="highSchoolDiploma" class="form-label">High School Diploma</label>
                <select id="highSchoolDiploma" class="form-select">
                  <option value="required">Required</option>
                  <option value="ged-accepted">GED Accepted</option>
                  <option value="equivalent">International Equivalent</option>
                  <option value="not-required">Not Required</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Required High School Courses</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="requiredCourse" value="english" checked> English (4 years)
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="requiredCourse" value="math" checked> Mathematics (3 years)
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="requiredCourse" value="science" checked> Science (2 years)
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="requiredCourse" value="social-studies" checked> Social Studies (2 years)
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="requiredCourse" value="foreign-language"> Foreign Language (2 years)
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="requiredCourse" value="fine-arts"> Fine Arts (1 year)
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="specificPrerequisites" class="form-label">Program-Specific Prerequisites</label>
            <textarea id="specificPrerequisites" class="form-textarea" placeholder="List any specific courses or requirements unique to this program (e.g., Advanced Calculus, Chemistry, Portfolio submission)..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Standardized Test Requirements</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Required Tests</label>
                <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="requiredTest" value="sat"> SAT
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="requiredTest" value="act"> ACT
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="requiredTest" value="gre"> GRE (Graduate)
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="requiredTest" value="gmat"> GMAT (Business)
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="requiredTest" value="toefl"> TOEFL/IELTS (International)
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="requiredTest" value="none"> No Tests Required
                  </label>
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="minimumSAT" class="form-label">Minimum SAT Score</label>
                <input type="number" id="minimumSAT" class="form-input" placeholder="e.g., 1200" min="400" max="1600">
              </div>
              <div class="form-field">
                <label for="minimumACT" class="form-label">Minimum ACT Score</label>
                <input type="number" id="minimumACT" class="form-input" placeholder="e.g., 24" min="1" max="36">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="minimumTOEFL" class="form-label">Minimum TOEFL Score</label>
                <input type="number" id="minimumTOEFL" class="form-input" placeholder="e.g., 80" min="0" max="120">
              </div>
              <div class="form-field">
                <label for="testOptional" class="form-label">Test Optional Policy</label>
                <select id="testOptional" class="form-select">
                  <option value="required">Tests Required</option>
                  <option value="optional">Test Optional</option>
                  <option value="conditional">Conditional (GPA threshold)</option>
                  <option value="blind">Test Blind</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Application Requirements</h3>
          
          <div class="form-field">
            <label class="form-label">Required Application Materials</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="application-form" checked> Completed Application Form
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="transcripts" checked> Official Transcripts
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="personal-statement" checked> Personal Statement/Essay
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="letters-recommendation"> Letters of Recommendation
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="resume"> Resume/CV
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="portfolio"> Portfolio (if applicable)
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="interview"> Interview
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="applicationMaterial" value="audition"> Audition (Arts programs)
              </label>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="personalStatementPrompt" class="form-label">Personal Statement Prompt</label>
                <textarea id="personalStatementPrompt" class="form-textarea" placeholder="Provide the essay prompt or personal statement guidelines for applicants..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="recommendationLetters" class="form-label">Letters of Recommendation</label>
                <select id="recommendationLetters" class="form-select">
                  <option value="0">Not Required</option>
                  <option value="1">1 Letter Required</option>
                  <option value="2">2 Letters Required</option>
                  <option value="3">3 Letters Required</option>
                  <option value="optional">Optional</option>
                </select>
              </div>
              <div class="form-field">
                <label for="interviewRequired" class="form-label">Interview Requirement</label>
                <select id="interviewRequired" class="form-select">
                  <option value="none">No Interview</option>
                  <option value="optional">Optional Interview</option>
                  <option value="invitation">By Invitation Only</option>
                  <option value="required">Required for All</option>
                  <option value="competitive">Competitive Applicants Only</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Transfer & International Students</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="transferStudents" class="form-label">Transfer Students Accepted</label>
                <select id="transferStudents" class="form-select">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                  <option value="limited">Limited Basis</option>
                  <option value="competitive">Competitive Only</option>
                </select>
              </div>
              <div class="form-field">
                <label for="minimumTransferCredits" class="form-label">Minimum Transfer Credits</label>
                <input type="number" id="minimumTransferCredits" class="form-input" placeholder="e.g., 12" min="0" max="120">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="internationalStudents" class="form-label">International Students</label>
                <select id="internationalStudents" class="form-select">
                  <option value="welcome">Welcome</option>
                  <option value="limited">Limited Enrollment</option>
                  <option value="not-accepted">Not Accepted</option>
                  <option value="conditional">Conditional Acceptance</option>
                </select>
              </div>
              <div class="form-field">
                <label for="englishProficiency" class="form-label">English Proficiency Requirement</label>
                <select id="englishProficiency" class="form-select">
                  <option value="required">Required (TOEFL/IELTS)</option>
                  <option value="waived">Waived for Native Speakers</option>
                  <option value="conditional">Conditional Based on Education</option>
                  <option value="not-required">Not Required</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="credentialEvaluation" class="form-label">Credential Evaluation</label>
                <select id="credentialEvaluation" class="form-select">
                  <option value="required">Required for International</option>
                  <option value="recommended">Recommended</option>
                  <option value="internal">Internal Evaluation</option>
                  <option value="not-required">Not Required</option>
                </select>
              </div>
              <div class="form-field">
                <label for="visaSupport" class="form-label">Visa Support Provided</label>
                <select id="visaSupport" class="form-select">
                  <option value="yes">Yes (I-20/DS-2019)</option>
                  <option value="limited">Limited Programs</option>
                  <option value="no">No</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Financial Requirements</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="applicationFee" class="form-label">Application Fee</label>
                <input type="number" id="applicationFee" class="form-input" placeholder="e.g., 50" min="0" step="5">
              </div>
              <div class="form-field">
                <label for="feeWaivers" class="form-label">Fee Waivers Available</label>
                <select id="feeWaivers" class="form-select">
                  <option value="yes">Yes</option>
                  <option value="limited">Limited Circumstances</option>
                  <option value="no">No</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="enrollmentDeposit" class="form-label">Enrollment Deposit</label>
                <input type="number" id="enrollmentDeposit" class="form-input" placeholder="e.g., 200" min="0" step="25">
              </div>
              <div class="form-field">
                <label for="depositRefundable" class="form-label">Deposit Refundable</label>
                <select id="depositRefundable" class="form-select">
                  <option value="yes">Yes</option>
                  <option value="partial">Partially</option>
                  <option value="no">No</option>
                  <option value="conditional">Under Certain Conditions</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="financialAidRequired" class="form-label">Financial Aid Information</label>
                <select id="financialAidRequired" class="form-select">
                  <option value="optional">Optional</option>
                  <option value="required">Required (FAFSA)</option>
                  <option value="recommended">Recommended</option>
                  <option value="not-applicable">Not Applicable</option>
                </select>
              </div>
              <div class="form-field">
                <label for="scholarshipConsideration" class="form-label">Scholarship Consideration</label>
                <select id="scholarshipConsideration" class="form-select">
                  <option value="automatic">Automatic with Application</option>
                  <option value="separate">Separate Application Required</option>
                  <option value="none">No Scholarships Available</option>
                  <option value="invitation">By Invitation Only</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Special Requirements & Considerations</h3>
          
          <div class="form-field">
            <label for="specialRequirements" class="form-label">Program-Specific Requirements</label>
            <textarea id="specialRequirements" class="form-textarea" placeholder="List any special requirements such as physical fitness standards, background checks, drug testing, etc..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="healthRequirements" class="form-label">Health Requirements</label>
                <select id="healthRequirements" class="form-select">
                  <option value="none">None</option>
                  <option value="immunization">Immunization Records</option>
                  <option value="physical">Physical Examination</option>
                  <option value="comprehensive">Comprehensive Health Screening</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="backgroundCheck" class="form-label">Background Check Required</label>
                <select id="backgroundCheck" class="form-select">
                  <option value="no">No</option>
                  <option value="yes">Yes</option>
                  <option value="conditional">For Certain Programs</option>
                  <option value="after-acceptance">After Acceptance</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="drugTesting" class="form-label">Drug Testing Required</label>
                <select id="drugTesting" class="form-select">
                  <option value="no">No</option>
                  <option value="yes">Yes</option>
                  <option value="random">Random Testing</option>
                  <option value="clinical">Clinical Programs Only</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="accommodations" class="form-label">Disability Accommodations</label>
            <textarea id="accommodations" class="form-textarea" placeholder="Describe how the program accommodates students with disabilities and the process for requesting accommodations..."></textarea>
          </div>

          <div class="form-field">
            <label for="additionalNotes" class="form-label">Additional Admission Notes</label>
            <textarea id="additionalNotes" class="form-textarea" placeholder="Any additional information, exceptions, or special considerations for prospective students..."></textarea>
          </div>
        </div>
      `,
      tuition: () => `
        <div class="form-section">
          <h3 class="form-section-title">Tuition Structure</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="tuitionModel" class="form-label">Tuition Model</label>
                <select id="tuitionModel" class="form-select">
                  <option value="">Select Model</option>
                  <option value="per-credit">Per Credit Hour</option>
                  <option value="flat-rate">Flat Rate per Semester</option>
                  <option value="program-fee">Program Fee (Total)</option>
                  <option value="block-tuition">Block Tuition</option>
                  <option value="tiered">Tiered Pricing</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="academicYear" class="form-label">Academic Year</label>
                <input type="text" id="academicYear" class="form-input" placeholder="e.g., 2024-2025" value="2024-2025">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="effectiveDate" class="form-label">Effective Date</label>
                <input type="date" id="effectiveDate" class="form-input">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="inStateTuition" class="form-label">In-State Tuition (per credit/semester)</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="inStateTuition" class="form-input" style="padding-left: 28px;" placeholder="450" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="outStateTuition" class="form-label">Out-of-State Tuition (per credit/semester)</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="outStateTuition" class="form-input" style="padding-left: 28px;" placeholder="850" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="internationalTuition" class="form-label">International Tuition (per credit/semester)</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="internationalTuition" class="form-input" style="padding-left: 28px;" placeholder="950" min="0" step="5">
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="fullTimeMinCredits" class="form-label">Full-Time Minimum Credits</label>
                <input type="number" id="fullTimeMinCredits" class="form-input" value="12" min="1" max="20">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="fullTimeMaxCredits" class="form-label">Full-Time Maximum Credits</label>
                <input type="number" id="fullTimeMaxCredits" class="form-input" value="18" min="12" max="24">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="overloadFee" class="form-label">Credit Overload Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="overloadFee" class="form-input" style="padding-left: 28px;" placeholder="100" min="0" step="5">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Required Fees</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="technologyFee" class="form-label">Technology Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="technologyFee" class="form-input" style="padding-left: 28px;" placeholder="150" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="activityFee" class="form-label">Student Activity Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="activityFee" class="form-input" style="padding-left: 28px;" placeholder="75" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="recreationFee" class="form-label">Recreation Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="recreationFee" class="form-input" style="padding-left: 28px;" placeholder="125" min="0" step="5">
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="laboratoryFee" class="form-label">Laboratory Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="laboratoryFee" class="form-input" style="padding-left: 28px;" placeholder="200" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="libraryFee" class="form-label">Library Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="libraryFee" class="form-input" style="padding-left: 28px;" placeholder="50" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="parkingFee" class="form-label">Parking Fee (optional)</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="parkingFee" class="form-input" style="padding-left: 28px;" placeholder="100" min="0" step="5">
                </div>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Additional Program Fees</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="programFee" value="clinical"> Clinical/Practicum Fee
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="programFee" value="materials"> Materials Fee
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="programFee" value="equipment"> Equipment Fee
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="programFee" value="certification"> Certification Fee
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="programFee" value="field-trip"> Field Trip Fee
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="programFee" value="software"> Software License Fee
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="additionalFeeDetails" class="form-label">Additional Fee Details</label>
            <textarea id="additionalFeeDetails" class="form-textarea" placeholder="Describe any additional fees, when they apply, and their amounts..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Payment Options & Plans</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Payment Methods Accepted</label>
                <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="paymentMethod" value="cash" checked> Cash
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="paymentMethod" value="check" checked> Check/Money Order
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="paymentMethod" value="credit-card" checked> Credit/Debit Card
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="paymentMethod" value="electronic" checked> Electronic Transfer
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="paymentMethod" value="financial-aid"> Financial Aid
                  </label>
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="paymentDeadline" class="form-label">Payment Deadline</label>
                <select id="paymentDeadline" class="form-select">
                  <option value="registration">At Registration</option>
                  <option value="before-classes">Before Classes Begin</option>
                  <option value="first-week">End of First Week</option>
                  <option value="30-days">30 Days After Registration</option>
                  <option value="installments">Payment Plan Available</option>
                </select>
              </div>
              <div class="form-field">
                <label for="latePaymentFee" class="form-label">Late Payment Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="latePaymentFee" class="form-input" style="padding-left: 28px;" placeholder="50" min="0" step="5">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="installmentPlan" class="form-label">Payment Plan Options</label>
                <select id="installmentPlan" class="form-select">
                  <option value="full-payment">Full Payment Only</option>
                  <option value="2-installments">2 Installments</option>
                  <option value="3-installments">3 Installments</option>
                  <option value="4-installments">4 Installments</option>
                  <option value="monthly">Monthly Payments</option>
                </select>
              </div>
              <div class="form-field">
                <label for="installmentFee" class="form-label">Payment Plan Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="installmentFee" class="form-input" style="padding-left: 28px;" placeholder="25" min="0" step="5">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Financial Aid & Scholarships</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Financial Aid Types Available</label>
                <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="financialAidType" value="federal-grants" checked> Federal Grants
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="financialAidType" value="state-grants" checked> State Grants
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="financialAidType" value="institutional-scholarships" checked> Institutional Scholarships
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="financialAidType" value="work-study" checked> Work-Study Programs
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="financialAidType" value="student-loans" checked> Student Loans
                  </label>
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="scholarshipAvailable" class="form-label">Program-Specific Scholarships</label>
                <select id="scholarshipAvailable" class="form-select">
                  <option value="none">None Available</option>
                  <option value="merit">Merit-Based</option>
                  <option value="need">Need-Based</option>
                  <option value="both">Merit & Need-Based</option>
                  <option value="external">External Scholarships Only</option>
                </select>
              </div>
              <div class="form-field">
                <label for="scholarshipAmount" class="form-label">Average Scholarship Amount</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="scholarshipAmount" class="form-input" style="padding-left: 28px;" placeholder="2500" min="0" step="100">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="financialAidEligibility" class="form-label">Financial Aid Eligibility</label>
                <select id="financialAidEligibility" class="form-select">
                  <option value="all-students">All Students Eligible</option>
                  <option value="domestic-only">Domestic Students Only</option>
                  <option value="degree-seeking">Degree-Seeking Only</option>
                  <option value="full-time">Full-Time Students Only</option>
                  <option value="limited">Limited Availability</option>
                </select>
              </div>
              <div class="form-field">
                <label for="employerTuition" class="form-label">Employer Tuition Assistance</label>
                <select id="employerTuition" class="form-select">
                  <option value="accepted">Accepted</option>
                  <option value="not-accepted">Not Accepted</option>
                  <option value="case-by-case">Case by Case</option>
                  <option value="preferred">Preferred Partnership</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="financialAidDetails" class="form-label">Financial Aid Information</label>
            <textarea id="financialAidDetails" class="form-textarea" placeholder="Provide details about available financial aid, application processes, deadlines, and eligibility requirements..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Refund Policy</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="refundPolicy" class="form-label">Refund Policy Type</label>
                <select id="refundPolicy" class="form-select">
                  <option value="pro-rated">Pro-Rated by Withdrawal Date</option>
                  <option value="percentage">Percentage-Based</option>
                  <option value="fixed-schedule">Fixed Schedule</option>
                  <option value="federal-policy">Federal Return Policy</option>
                  <option value="no-refund">No Refund Policy</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="refundDeadline" class="form-label">100% Refund Deadline</label>
                <select id="refundDeadline" class="form-select">
                  <option value="before-start">Before Classes Start</option>
                  <option value="first-week">End of First Week</option>
                  <option value="10-percent">10% of Term</option>
                  <option value="no-full-refund">No Full Refund</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="administrativeFee" class="form-label">Administrative/Processing Fee</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="administrativeFee" class="form-input" style="padding-left: 28px;" placeholder="100" min="0" step="5">
                </div>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="refundSchedule" class="form-label">Refund Schedule</label>
            <textarea id="refundSchedule" class="form-textarea" placeholder="Detail the refund percentages by withdrawal date (e.g., Week 1: 100%, Week 2: 75%, Week 3: 50%, etc.)..."></textarea>
          </div>

          <div class="form-field">
            <label for="refundExceptions" class="form-label">Refund Exceptions</label>
            <textarea id="refundExceptions" class="form-textarea" placeholder="List any fees that are non-refundable or special circumstances that affect refunds..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Cost Summary & Estimates</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="estimatedTotalCost" class="form-label">Estimated Total Program Cost</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="estimatedTotalCost" class="form-input" style="padding-left: 28px;" placeholder="45000" min="0" step="100" readonly>
                </div>
                <small style="color: #6b7280; font-size: 12px;">Automatically calculated based on tuition and fees</small>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="averageTextbookCost" class="form-label">Average Textbook Cost (per semester)</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="averageTextbookCost" class="form-input" style="padding-left: 28px;" placeholder="400" min="0" step="25">
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="additionalExpenses" class="form-label">Other Estimated Expenses</label>
                <div style="position: relative;">
                  <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280;">$</span>
                  <input type="number" id="additionalExpenses" class="form-input" style="padding-left: 28px;" placeholder="1500" min="0" step="50">
                </div>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="costBreakdownNotes" class="form-label">Cost Breakdown Notes</label>
            <textarea id="costBreakdownNotes" class="form-textarea" placeholder="Provide additional information about costs, what's included/excluded, and any cost variation details..."></textarea>
          </div>

          <div class="form-field">
            <label for="costComparison" class="form-label">Cost Comparison Information</label>
            <textarea id="costComparison" class="form-textarea" placeholder="Information comparing costs to similar programs or highlighting value proposition..."></textarea>
          </div>
        </div>
      `,
      delivery: () => `
        <div class="form-section">
          <h3 class="form-section-title">Program Delivery Method</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="deliveryFormat" class="form-label">Primary Delivery Format</label>
                <select id="deliveryFormat" class="form-select">
                  <option value="">Select Format</option>
                  <option value="on-campus">On-Campus (Traditional)</option>
                  <option value="online">Fully Online</option>
                  <option value="hybrid">Hybrid/Blended</option>
                  <option value="remote">Remote Synchronous</option>
                  <option value="competency">Competency-Based</option>
                  <option value="accelerated">Accelerated/Intensive</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="flexibilityLevel" class="form-label">Schedule Flexibility</label>
                <select id="flexibilityLevel" class="form-select">
                  <option value="fixed">Fixed Schedule</option>
                  <option value="flexible">Flexible Scheduling</option>
                  <option value="self-paced">Self-Paced</option>
                  <option value="asynchronous">Asynchronous Options</option>
                  <option value="multiple">Multiple Options Available</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="attendanceRequirement" class="form-label">Attendance Requirement</label>
                <select id="attendanceRequirement" class="form-select">
                  <option value="required">Required</option>
                  <option value="recommended">Recommended</option>
                  <option value="flexible">Flexible</option>
                  <option value="none">No Requirement</option>
                  <option value="hybrid">Mixed Requirements</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Available Delivery Options</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="deliveryOption" value="face-to-face" checked> Face-to-Face Classes
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="deliveryOption" value="live-streaming"> Live Streaming/Webinars
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="deliveryOption" value="recorded-lectures"> Recorded Lectures
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="deliveryOption" value="virtual-labs"> Virtual Laboratories
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="deliveryOption" value="field-work"> Field Work/Practicum
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="deliveryOption" value="internships"> Internships/Co-ops
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="deliveryDescription" class="form-label">Delivery Method Description</label>
            <textarea id="deliveryDescription" class="form-textarea" placeholder="Describe how the program is delivered, including any unique aspects of the delivery method..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Primary Campus Location</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="campusName" class="form-label">Campus Name</label>
                <input type="text" id="campusName" class="form-input" placeholder="e.g., Main Campus, Downtown Campus">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="buildingName" class="form-label">Primary Building</label>
                <input type="text" id="buildingName" class="form-input" placeholder="e.g., Science Hall, Business Center">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="roomNumbers" class="form-label">Room Numbers/Areas</label>
                <input type="text" id="roomNumbers" class="form-input" placeholder="e.g., Rooms 201-205, Lab Wing">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="streetAddress" class="form-label">Street Address</label>
                <input type="text" id="streetAddress" class="form-input" placeholder="123 University Avenue">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="city" class="form-label">City</label>
                <input type="text" id="city" class="form-input" placeholder="University City">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="state" class="form-label">State/Province</label>
                <input type="text" id="state" class="form-input" placeholder="State">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="zipCode" class="form-label">ZIP/Postal Code</label>
                <input type="text" id="zipCode" class="form-input" placeholder="12345">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="country" class="form-label">Country</label>
                <input type="text" id="country" class="form-input" value="United States">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="campusPhone" class="form-label">Campus Phone</label>
                <input type="tel" id="campusPhone" class="form-input" placeholder="(555) 123-4567">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Multiple Location Options</h3>
          
          <div class="form-field">
            <label class="form-label">Program Available At</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="locationOption" value="main-campus" checked> Main Campus
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="locationOption" value="satellite-campus"> Satellite Campus
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="locationOption" value="extension-center"> Extension Center
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="locationOption" value="online-campus"> Online Campus
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="locationOption" value="partner-sites"> Partner Institution Sites
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="locationOption" value="clinical-sites"> Clinical/Practicum Sites
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="additionalLocations" class="form-label">Additional Location Details</label>
            <textarea id="additionalLocations" class="form-textarea" placeholder="List any additional campuses, extension centers, or partner locations where this program is offered..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="servicePrimaryArea" class="form-label">Primary Service Area</label>
                <input type="text" id="servicePrimaryArea" class="form-input" placeholder="e.g., Metropolitan Area, Statewide">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="serviceRadius" class="form-label">Service Radius</label>
                <select id="serviceRadius" class="form-select">
                  <option value="local">Local (within 25 miles)</option>
                  <option value="regional">Regional (within 100 miles)</option>
                  <option value="statewide">Statewide</option>
                  <option value="multi-state">Multi-State</option>
                  <option value="national">National</option>
                  <option value="international">International</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="transportationAccess" class="form-label">Transportation Access</label>
                <select id="transportationAccess" class="form-select">
                  <option value="excellent">Excellent</option>
                  <option value="good">Good</option>
                  <option value="moderate">Moderate</option>
                  <option value="limited">Limited</option>
                  <option value="not-applicable">Not Applicable</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Facilities & Resources</h3>
          
          <div class="form-field">
            <label class="form-label">Available Facilities</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="classrooms" checked> Standard Classrooms
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="lecture-halls"> Lecture Halls
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="laboratories"> Laboratories
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="computer-labs"> Computer Labs
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="library"> Library Resources
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="study-spaces"> Study Spaces
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="simulation-center"> Simulation Center
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="workshop-spaces"> Workshop Spaces
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="conference-rooms"> Conference Rooms
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facility" value="student-lounge"> Student Lounge Areas
              </label>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="equipmentAvailable" class="form-label">Specialized Equipment</label>
                <textarea id="equipmentAvailable" class="form-textarea" placeholder="List any specialized equipment, technology, or tools available for this program..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="technologyResources" class="form-label">Technology Resources</label>
                <textarea id="technologyResources" class="form-textarea" placeholder="Describe available technology, software, online platforms, etc..."></textarea>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="libraryResources" class="form-label">Library & Research Resources</label>
                <textarea id="libraryResources" class="form-textarea" placeholder="Describe available library resources, databases, research materials specific to this program..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="accessibilityFeatures" class="form-label">Accessibility Features</label>
                <textarea id="accessibilityFeatures" class="form-textarea" placeholder="Describe accessibility features and accommodations available at program locations..."></textarea>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Schedule & Class Times</h3>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Class Days Available</label>
                <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 8px;">
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="monday" checked> Monday
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="tuesday" checked> Tuesday
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="wednesday" checked> Wednesday
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="thursday" checked> Thursday
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="friday" checked> Friday
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="saturday"> Saturday
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classDays" value="sunday"> Sunday
                  </label>
                </div>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Class Time Options</label>
                <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classTime" value="morning" checked> Morning (8:00 AM - 12:00 PM)
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classTime" value="afternoon" checked> Afternoon (12:00 PM - 5:00 PM)
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classTime" value="evening"> Evening (5:00 PM - 9:00 PM)
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classTime" value="weekend"> Weekend Options
                  </label>
                  <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" name="classTime" value="intensive"> Intensive/Block Schedule
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="typicalSchedule" class="form-label">Typical Weekly Schedule</label>
                <textarea id="typicalSchedule" class="form-textarea" placeholder="Describe a typical weekly schedule for students in this program..."></textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="intensiveOptions" class="form-label">Intensive/Accelerated Options</label>
                <textarea id="intensiveOptions" class="form-textarea" placeholder="Describe any intensive, accelerated, or alternative scheduling options available..."></textarea>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="sessionLength" class="form-label">Typical Session Length</label>
                <select id="sessionLength" class="form-select">
                  <option value="50-minutes">50 minutes</option>
                  <option value="75-minutes">75 minutes</option>
                  <option value="90-minutes">90 minutes</option>
                  <option value="3-hours">3 hours</option>
                  <option value="variable">Variable Length</option>
                  <option value="full-day">Full Day Sessions</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="breaksBetween" class="form-label">Breaks Between Classes</label>
                <select id="breaksBetween" class="form-select">
                  <option value="10-minutes">10 minutes</option>
                  <option value="15-minutes">15 minutes</option>
                  <option value="20-minutes">20 minutes</option>
                  <option value="30-minutes">30 minutes</option>
                  <option value="variable">Variable</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="holidaySchedule" class="form-label">Holiday/Break Schedule</label>
                <select id="holidaySchedule" class="form-select">
                  <option value="follows-academic">Follows Academic Calendar</option>
                  <option value="continuous">Continuous Operation</option>
                  <option value="modified">Modified Schedule</option>
                  <option value="program-specific">Program-Specific</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Student Support Services</h3>
          
          <div class="form-field">
            <label class="form-label">Available Support Services</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="academic-advising" checked> Academic Advising
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="tutoring" checked> Tutoring Services
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="technical-support" checked> Technical Support
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="career-services"> Career Services
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="counseling"> Counseling Services
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="disability-services"> Disability Services
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="writing-center"> Writing Center
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="supportService" value="study-groups"> Study Groups
              </label>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="parkingAvailability" class="form-label">Parking Availability</label>
                <select id="parkingAvailability" class="form-select">
                  <option value="ample">Ample Parking</option>
                  <option value="adequate">Adequate Parking</option>
                  <option value="limited">Limited Parking</option>
                  <option value="permit-required">Permit Required</option>
                  <option value="paid-parking">Paid Parking</option>
                  <option value="no-parking">No Parking Available</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="publicTransportation" class="form-label">Public Transportation</label>
                <select id="publicTransportation" class="form-select">
                  <option value="excellent">Excellent Access</option>
                  <option value="good">Good Access</option>
                  <option value="limited">Limited Access</option>
                  <option value="none">No Public Transportation</option>
                  <option value="shuttle">Campus Shuttle Available</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="foodServices" class="form-label">Food Services</label>
                <select id="foodServices" class="form-select">
                  <option value="cafeteria">Full Cafeteria</option>
                  <option value="snack-bar">Snack Bar/Cafe</option>
                  <option value="vending">Vending Machines</option>
                  <option value="nearby">Nearby Restaurants</option>
                  <option value="none">None Available</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="additionalAmenities" class="form-label">Additional Amenities & Services</label>
            <textarea id="additionalAmenities" class="form-textarea" placeholder="Describe any additional amenities, services, or unique features available to students in this program..."></textarea>
          </div>
        </div>
      `,
      faculty: () => `
        <div class="form-section">
          <h3 class="form-section-title">Program Leadership</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="programDirector" class="form-label">Program Director</label>
                <input type="text" id="programDirector" class="form-input" placeholder="Dr. Jane Smith">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="directorEmail" class="form-label">Director Email</label>
                <input type="email" id="directorEmail" class="form-input" placeholder="jane.smith@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="directorPhone" class="form-label">Director Phone</label>
                <input type="tel" id="directorPhone" class="form-input" placeholder="(555) 123-4567">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="assistantDirector" class="form-label">Assistant Director</label>
                <input type="text" id="assistantDirector" class="form-input" placeholder="Prof. John Doe">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="assistantEmail" class="form-label">Assistant Email</label>
                <input type="email" id="assistantEmail" class="form-input" placeholder="john.doe@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="assistantPhone" class="form-label">Assistant Phone</label>
                <input type="tel" id="assistantPhone" class="form-input" placeholder="(555) 123-4568">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="academicAdvisor" class="form-label">Academic Advisor</label>
                <input type="text" id="academicAdvisor" class="form-input" placeholder="Dr. Sarah Johnson">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="advisorEmail" class="form-label">Advisor Email</label>
                <input type="email" id="advisorEmail" class="form-input" placeholder="sarah.johnson@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="advisorOfficeHours" class="form-label">Office Hours</label>
                <input type="text" id="advisorOfficeHours" class="form-input" placeholder="Mon-Wed 2-4 PM">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Faculty Information</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="totalFaculty" class="form-label">Total Faculty Count</label>
                <input type="number" id="totalFaculty" class="form-input" placeholder="25" min="1">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="fullTimeFaculty" class="form-label">Full-Time Faculty</label>
                <input type="number" id="fullTimeFaculty" class="form-input" placeholder="18" min="0">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="partTimeFaculty" class="form-label">Part-Time Faculty</label>
                <input type="number" id="partTimeFaculty" class="form-input" placeholder="7" min="0">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="tenuredFaculty" class="form-label">Tenured Faculty</label>
                <input type="number" id="tenuredFaculty" class="form-input" placeholder="12" min="0">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="facultyToStudentRatio" class="form-label">Faculty-to-Student Ratio</label>
                <input type="text" id="facultyToStudentRatio" class="form-input" placeholder="1:15" pattern="[0-9]+:[0-9]+">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="averageClassSize" class="form-label">Average Class Size</label>
                <input type="number" id="averageClassSize" class="form-input" placeholder="22" min="1" max="200">
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Faculty Qualifications</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facultyQualification" value="phd" checked> Ph.D. Required
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facultyQualification" value="masters"> Master's Minimum
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facultyQualification" value="industry"> Industry Experience
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facultyQualification" value="certification"> Professional Certification
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facultyQualification" value="teaching"> Teaching Experience
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="facultyQualification" value="research"> Research Background
              </label>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Department Information</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="departmentName" class="form-label">Department/School</label>
                <input type="text" id="departmentName" class="form-input" placeholder="School of Business">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="departmentCode" class="form-label">Department Code</label>
                <input type="text" id="departmentCode" class="form-input" placeholder="BUS" maxlength="10">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="collegeName" class="form-label">College/Division</label>
                <input type="text" id="collegeName" class="form-input" placeholder="College of Business and Economics">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="departmentHead" class="form-label">Department Head</label>
                <input type="text" id="departmentHead" class="form-input" placeholder="Dr. Michael Brown">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="departmentEmail" class="form-label">Department Email</label>
                <input type="email" id="departmentEmail" class="form-input" placeholder="business@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="departmentPhone" class="form-label">Department Phone</label>
                <input type="tel" id="departmentPhone" class="form-input" placeholder="(555) 123-4500">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="departmentLocation" class="form-label">Department Building</label>
                <input type="text" id="departmentLocation" class="form-input" placeholder="Business Administration Building">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="departmentRoom" class="form-label">Suite/Room Number</label>
                <input type="text" id="departmentRoom" class="form-input" placeholder="Suite 200">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="departmentWebsite" class="form-label">Department Website</label>
                <input type="url" id="departmentWebsite" class="form-input" placeholder="https://business.university.edu">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Key Contacts</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="admissionsContact" class="form-label">Admissions Contact</label>
                <input type="text" id="admissionsContact" class="form-input" placeholder="Ms. Lisa Wilson">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="admissionsEmail" class="form-label">Admissions Email</label>
                <input type="email" id="admissionsEmail" class="form-input" placeholder="admissions@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="admissionsPhone" class="form-label">Admissions Phone</label>
                <input type="tel" id="admissionsPhone" class="form-input" placeholder="(555) 123-4600">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="studentServicesContact" class="form-label">Student Services Contact</label>
                <input type="text" id="studentServicesContact" class="form-input" placeholder="Mr. David Garcia">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="studentServicesEmail" class="form-label">Student Services Email</label>
                <input type="email" id="studentServicesEmail" class="form-input" placeholder="studentservices@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="studentServicesPhone" class="form-label">Student Services Phone</label>
                <input type="tel" id="studentServicesPhone" class="form-input" placeholder="(555) 123-4700">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="financialAidContact" class="form-label">Financial Aid Contact</label>
                <input type="text" id="financialAidContact" class="form-input" placeholder="Ms. Angela Davis">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="financialAidEmail" class="form-label">Financial Aid Email</label>
                <input type="email" id="financialAidEmail" class="form-input" placeholder="financialaid@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="financialAidPhone" class="form-label">Financial Aid Phone</label>
                <input type="tel" id="financialAidPhone" class="form-input" placeholder="(555) 123-4800">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Advisory Board</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="advisoryBoardChair" class="form-label">Board Chair</label>
                <input type="text" id="advisoryBoardChair" class="form-input" placeholder="Mr. Robert Thompson">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="boardMeetingFrequency" class="form-label">Meeting Frequency</label>
                <select id="boardMeetingFrequency" class="form-select">
                  <option value="">Select Frequency</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="bi-annual">Bi-Annual</option>
                  <option value="annual">Annual</option>
                  <option value="as-needed">As Needed</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="boardSize" class="form-label">Board Size</label>
                <input type="number" id="boardSize" class="form-input" placeholder="12" min="3" max="50">
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Board Composition</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="boardComposition" value="industry"> Industry Professionals
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="boardComposition" value="alumni"> Alumni Representatives
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="boardComposition" value="faculty"> Faculty Members
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="boardComposition" value="employers"> Employer Partners
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="boardComposition" value="community"> Community Leaders
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="boardComposition" value="government"> Government Representatives
              </label>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Office Hours & Availability</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="officeHoursStart" class="form-label">Office Hours Start</label>
                <input type="time" id="officeHoursStart" class="form-input" value="08:00">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="officeHoursEnd" class="form-label">Office Hours End</label>
                <input type="time" id="officeHoursEnd" class="form-input" value="17:00">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="appointmentRequired" class="form-label">Appointment Policy</label>
                <select id="appointmentRequired" class="form-select">
                  <option value="walk-in">Walk-In Welcome</option>
                  <option value="preferred">Appointment Preferred</option>
                  <option value="required">Appointment Required</option>
                  <option value="scheduled">Scheduled Hours Only</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Available Days</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="monday" checked> Monday
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="tuesday" checked> Tuesday
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="wednesday" checked> Wednesday
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="thursday" checked> Thursday
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="friday" checked> Friday
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="saturday"> Saturday
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="availableDays" value="sunday"> Sunday
              </label>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col full-width">
              <div class="form-field">
                <label for="contactNotes" class="form-label">Contact Notes & Instructions</label>
                <textarea id="contactNotes" class="form-textarea" rows="3" placeholder="Special instructions for contacting faculty, preferred communication methods, response time expectations, etc."></textarea>
              </div>
            </div>
          </div>
        </div>
      `,
      faq: () => `
        <div class="form-section">
          <h3 class="form-section-title">General Program Information</h3>
          <div class="form-field">
            <label for="faqProgram1" class="form-label">What is this program about?</label>
            <textarea id="faqProgram1" class="form-textarea" rows="3" placeholder="Provide a brief overview of the program, its purpose, and what students can expect to learn..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqProgram2" class="form-label">Who should apply to this program?</label>
            <textarea id="faqProgram2" class="form-textarea" rows="3" placeholder="Describe the ideal candidate profile, background, interests, and career goals..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqProgram3" class="form-label">What makes this program unique?</label>
            <textarea id="faqProgram3" class="form-textarea" rows="3" placeholder="Highlight distinctive features, specializations, partnerships, or opportunities..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqProgram4" class="form-label">What are the career outcomes for graduates?</label>
            <textarea id="faqProgram4" class="form-textarea" rows="3" placeholder="List typical job titles, employment sectors, salary ranges, and career advancement opportunities..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Admissions & Prerequisites</h3>
          <div class="form-field">
            <label for="faqAdmissions1" class="form-label">What are the admission requirements?</label>
            <textarea id="faqAdmissions1" class="form-textarea" rows="3" placeholder="List GPA requirements, test scores, prerequisite courses, and application materials..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqAdmissions2" class="form-label">When are application deadlines?</label>
            <textarea id="faqAdmissions2" class="form-textarea" rows="3" placeholder="Provide specific dates for regular admission, early admission, and rolling admission if applicable..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqAdmissions3" class="form-label">Is there an application fee?</label>
            <textarea id="faqAdmissions3" class="form-textarea" rows="2" placeholder="State the application fee amount and any fee waiver options..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqAdmissions4" class="form-label">Can I transfer credits from another institution?</label>
            <textarea id="faqAdmissions4" class="form-textarea" rows="3" placeholder="Explain transfer credit policies, maximum transferable credits, and evaluation process..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqAdmissions5" class="form-label">Do I need to submit test scores?</label>
            <textarea id="faqAdmissions5" class="form-textarea" rows="3" placeholder="Specify required standardized tests (SAT, ACT, GRE, etc.) and minimum scores..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Program Structure & Curriculum</h3>
          <div class="form-field">
            <label for="faqCurriculum1" class="form-label">How long does the program take to complete?</label>
            <textarea id="faqCurriculum1" class="form-textarea" rows="2" placeholder="Specify duration for full-time and part-time students..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCurriculum2" class="form-label">How many credits are required?</label>
            <textarea id="faqCurriculum2" class="form-textarea" rows="2" placeholder="State total credit hours and breakdown by core, elective, and practicum requirements..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCurriculum3" class="form-label">Are there internship or practicum requirements?</label>
            <textarea id="faqCurriculum3" class="form-textarea" rows="3" placeholder="Describe hands-on learning requirements, duration, placement assistance..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCurriculum4" class="form-label">Can I specialize in a particular area?</label>
            <textarea id="faqCurriculum4" class="form-textarea" rows="3" placeholder="List available concentrations, tracks, or specialization options..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCurriculum5" class="form-label">Is there a capstone project or thesis requirement?</label>
            <textarea id="faqCurriculum5" class="form-textarea" rows="3" placeholder="Explain final project requirements, research opportunities, and presentation formats..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Scheduling & Format</h3>
          <div class="form-field">
            <label for="faqSchedule1" class="form-label">What class schedules are available?</label>
            <textarea id="faqSchedule1" class="form-textarea" rows="3" placeholder="Detail day, evening, weekend, and hybrid scheduling options..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSchedule2" class="form-label">Are classes offered online?</label>
            <textarea id="faqSchedule2" class="form-textarea" rows="3" placeholder="Explain online, hybrid, and in-person delivery options..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSchedule3" class="form-label">Can I attend part-time?</label>
            <textarea id="faqSchedule3" class="form-textarea" rows="3" placeholder="Describe part-time enrollment options, course load, and completion timeline..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSchedule4" class="form-label">When do classes start?</label>
            <textarea id="faqSchedule4" class="form-textarea" rows="2" placeholder="List start dates for fall, spring, summer, and any rolling admission terms..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Costs & Financial Aid</h3>
          <div class="form-field">
            <label for="faqCosts1" class="form-label">What is the total cost of the program?</label>
            <textarea id="faqCosts1" class="form-textarea" rows="3" placeholder="Break down tuition, fees, books, and other expenses for residents and non-residents..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCosts2" class="form-label">What financial aid is available?</label>
            <textarea id="faqCosts2" class="form-textarea" rows="3" placeholder="List scholarships, grants, work-study, and loan options specific to this program..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCosts3" class="form-label">Are payment plans available?</label>
            <textarea id="faqCosts3" class="form-textarea" rows="2" placeholder="Describe installment payment options and payment deadlines..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqCosts4" class="form-label">Do costs differ for online vs. on-campus students?</label>
            <textarea id="faqCosts4" class="form-textarea" rows="3" placeholder="Explain any cost differences between delivery formats..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Student Support & Resources</h3>
          <div class="form-field">
            <label for="faqSupport1" class="form-label">What academic support services are available?</label>
            <textarea id="faqSupport1" class="form-textarea" rows="3" placeholder="List tutoring, writing centers, library resources, research support..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSupport2" class="form-label">Is career counseling provided?</label>
            <textarea id="faqSupport2" class="form-textarea" rows="3" placeholder="Describe career services, job placement assistance, resume help, interview prep..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSupport3" class="form-label">What technology requirements do I need?</label>
            <textarea id="faqSupport3" class="form-textarea" rows="3" placeholder="List computer specifications, software requirements, internet speed, equipment..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSupport4" class="form-label">Are there networking opportunities?</label>
            <textarea id="faqSupport4" class="form-textarea" rows="3" placeholder="Describe alumni networks, professional associations, industry partnerships..."></textarea>
          </div>

          <div class="form-field">
            <label for="faqSupport5" class="form-label">What disability accommodations are available?</label>
            <textarea id="faqSupport5" class="form-textarea" rows="3" placeholder="Explain accessibility services, assistive technology, and accommodation procedures..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Additional Questions</h3>
          <div class="form-field">
            <label for="customFaq1Question" class="form-label">Custom FAQ Question 1</label>
            <input type="text" id="customFaq1Question" class="form-input" placeholder="Enter your custom question...">
          </div>
          <div class="form-field">
            <label for="customFaq1Answer" class="form-label">Answer</label>
            <textarea id="customFaq1Answer" class="form-textarea" rows="3" placeholder="Provide the answer to your custom question..."></textarea>
          </div>

          <div class="form-field">
            <label for="customFaq2Question" class="form-label">Custom FAQ Question 2</label>
            <input type="text" id="customFaq2Question" class="form-input" placeholder="Enter your custom question...">
          </div>
          <div class="form-field">
            <label for="customFaq2Answer" class="form-label">Answer</label>
            <textarea id="customFaq2Answer" class="form-textarea" rows="3" placeholder="Provide the answer to your custom question..."></textarea>
          </div>

          <div class="form-field">
            <label for="customFaq3Question" class="form-label">Custom FAQ Question 3</label>
            <input type="text" id="customFaq3Question" class="form-input" placeholder="Enter your custom question...">
          </div>
          <div class="form-field">
            <label for="customFaq3Answer" class="form-label">Answer</label>
            <textarea id="customFaq3Answer" class="form-textarea" rows="3" placeholder="Provide the answer to your custom question..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col full-width">
              <div class="form-field">
                <label for="faqContactInfo" class="form-label">FAQ Contact Information</label>
                <textarea id="faqContactInfo" class="form-textarea" rows="3" placeholder="Provide contact details for students who have questions not covered in the FAQ..."></textarea>
              </div>
            </div>
          </div>
        </div>
      `,
      marketing: () => `
        <div class="form-section">
          <h3 class="form-section-title">Program Branding & Messaging</h3>
          <div class="form-field">
            <label for="programTagline" class="form-label">Program Tagline</label>
            <input type="text" id="programTagline" class="form-input" placeholder="e.g., 'Shaping Tomorrow's Business Leaders'">
          </div>

          <div class="form-field">
            <label for="valueProposition" class="form-label">Value Proposition</label>
            <textarea id="valueProposition" class="form-textarea" rows="3" placeholder="What unique value does this program offer? Why should students choose this program over competitors?"></textarea>
          </div>

          <div class="form-field">
            <label for="keySellingPoints" class="form-label">Key Selling Points</label>
            <textarea id="keySellingPoints" class="form-textarea" rows="4" placeholder="List 3-5 compelling reasons to choose this program (bullet points work well)..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="brandColors" class="form-label">Brand Colors</label>
                <input type="text" id="brandColors" class="form-input" placeholder="e.g., Navy Blue, Gold, White">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="brandPersonality" class="form-label">Brand Personality</label>
                <input type="text" id="brandPersonality" class="form-input" placeholder="e.g., Professional, Innovative, Supportive">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="tone" class="form-label">Communication Tone</label>
                <select id="tone" class="form-select">
                  <option value="">Select Tone</option>
                  <option value="professional">Professional</option>
                  <option value="friendly">Friendly</option>
                  <option value="academic">Academic</option>
                  <option value="inspiring">Inspiring</option>
                  <option value="approachable">Approachable</option>
                  <option value="authoritative">Authoritative</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Target Audience</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="primaryAudience" class="form-label">Primary Target Audience</label>
                <select id="primaryAudience" class="form-select">
                  <option value="">Select Primary Audience</option>
                  <option value="high-school">High School Graduates</option>
                  <option value="career-changers">Career Changers</option>
                  <option value="working-professionals">Working Professionals</option>
                  <option value="returning-students">Returning Students</option>
                  <option value="international">International Students</option>
                  <option value="military">Military/Veterans</option>
                  <option value="transfer">Transfer Students</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="ageRange" class="form-label">Target Age Range</label>
                <input type="text" id="ageRange" class="form-input" placeholder="e.g., 18-25, 25-35, 30+">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="geographicFocus" class="form-label">Geographic Focus</label>
                <select id="geographicFocus" class="form-select">
                  <option value="">Select Focus</option>
                  <option value="local">Local/Regional</option>
                  <option value="state">Statewide</option>
                  <option value="national">National</option>
                  <option value="international">International</option>
                  <option value="online-global">Online Global</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="audienceProfile" class="form-label">Detailed Audience Profile</label>
            <textarea id="audienceProfile" class="form-textarea" rows="4" placeholder="Describe your ideal student: demographics, motivations, challenges, career goals, lifestyle..."></textarea>
          </div>

          <div class="form-field">
            <label class="form-label">Student Motivations</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="motivation" value="career-advancement"> Career Advancement
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="motivation" value="salary-increase"> Salary Increase
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="motivation" value="career-change"> Career Change
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="motivation" value="skill-development"> Skill Development
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="motivation" value="personal-fulfillment"> Personal Fulfillment
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="motivation" value="entrepreneurship"> Entrepreneurship
              </label>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Marketing Channels & Strategy</h3>
          <div class="form-field">
            <label class="form-label">Primary Marketing Channels</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="social-media"> Social Media
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="search-engine"> Search Engine Marketing
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="content-marketing"> Content Marketing
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="email"> Email Marketing
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="print-media"> Print Media
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="radio-tv"> Radio/TV
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="direct-mail"> Direct Mail
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="partnerships"> Industry Partnerships
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="referrals"> Alumni Referrals
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingChannel" value="events"> Events/Webinars
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="marketingBudget" class="form-label">Annual Marketing Budget</label>
            <select id="marketingBudget" class="form-select">
              <option value="">Select Budget Range</option>
              <option value="under-10k">Under $10,000</option>
              <option value="10k-25k">$10,000 - $25,000</option>
              <option value="25k-50k">$25,000 - $50,000</option>
              <option value="50k-100k">$50,000 - $100,000</option>
              <option value="100k-250k">$100,000 - $250,000</option>
              <option value="over-250k">Over $250,000</option>
            </select>
          </div>

          <div class="form-field">
            <label for="campaignGoals" class="form-label">Campaign Goals & KPIs</label>
            <textarea id="campaignGoals" class="form-textarea" rows="3" placeholder="Define specific, measurable goals: enrollment targets, lead generation, brand awareness metrics..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Digital Marketing Assets</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="websiteUrl" class="form-label">Program Website URL</label>
                <input type="url" id="websiteUrl" class="form-input" placeholder="https://university.edu/programs/business">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="landingPageUrl" class="form-label">Landing Page URL</label>
                <input type="url" id="landingPageUrl" class="form-input" placeholder="https://university.edu/apply/business">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="virtualTourUrl" class="form-label">Virtual Tour URL</label>
                <input type="url" id="virtualTourUrl" class="form-input" placeholder="https://tour.university.edu/business">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="videoUrl" class="form-label">Program Video URL</label>
                <input type="url" id="videoUrl" class="form-input" placeholder="https://youtube.com/watch?v=...">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="brochureUrl" class="form-label">Digital Brochure URL</label>
                <input type="url" id="brochureUrl" class="form-input" placeholder="https://university.edu/brochures/business.pdf">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="facebookPage" class="form-label">Facebook Page</label>
                <input type="url" id="facebookPage" class="form-input" placeholder="https://facebook.com/universitybusiness">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="linkedinPage" class="form-label">LinkedIn Page</label>
                <input type="url" id="linkedinPage" class="form-input" placeholder="https://linkedin.com/school/university-business">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="instagramProfile" class="form-label">Instagram Profile</label>
                <input type="url" id="instagramProfile" class="form-input" placeholder="https://instagram.com/universitybusiness">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="youtubeChannel" class="form-label">YouTube Channel</label>
                <input type="url" id="youtubeChannel" class="form-input" placeholder="https://youtube.com/universitybusiness">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Content Marketing</h3>
          <div class="form-field">
            <label for="blogTopics" class="form-label">Blog Content Topics</label>
            <textarea id="blogTopics" class="form-textarea" rows="3" placeholder="List relevant blog topics, industry trends, student success stories, career advice..."></textarea>
          </div>

          <div class="form-field">
            <label for="successStories" class="form-label">Student Success Stories</label>
            <textarea id="successStories" class="form-textarea" rows="4" placeholder="Highlight notable alumni achievements, career progressions, and program impact stories..."></textarea>
          </div>

          <div class="form-field">
            <label for="industryPartnerships" class="form-label">Industry Partnerships & Endorsements</label>
            <textarea id="industryPartnerships" class="form-textarea" rows="3" placeholder="List partnerships with employers, professional organizations, industry leaders..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="contentFrequency" class="form-label">Content Publishing Frequency</label>
                <select id="contentFrequency" class="form-select">
                  <option value="">Select Frequency</option>
                  <option value="daily">Daily</option>
                  <option value="weekly">Weekly</option>
                  <option value="bi-weekly">Bi-Weekly</option>
                  <option value="monthly">Monthly</option>
                  <option value="quarterly">Quarterly</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="contentTypes" class="form-label">Primary Content Types</label>
                <input type="text" id="contentTypes" class="form-input" placeholder="e.g., Blog posts, Videos, Infographics">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="seoKeywords" class="form-label">SEO Keywords</label>
                <input type="text" id="seoKeywords" class="form-input" placeholder="e.g., business degree, MBA program">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Competitive Analysis</h3>
          <div class="form-field">
            <label for="mainCompetitors" class="form-label">Main Competitors</label>
            <textarea id="mainCompetitors" class="form-textarea" rows="3" placeholder="List 3-5 competing programs and institutions..."></textarea>
          </div>

          <div class="form-field">
            <label for="competitiveAdvantages" class="form-label">Competitive Advantages</label>
            <textarea id="competitiveAdvantages" class="form-textarea" rows="4" placeholder="What sets this program apart from competitors? Unique features, lower cost, better outcomes, etc."></textarea>
          </div>

          <div class="form-field">
            <label for="marketPosition" class="form-label">Market Positioning</label>
            <select id="marketPosition" class="form-select">
              <option value="">Select Position</option>
              <option value="premium">Premium/High-End</option>
              <option value="value">Value/Affordable</option>
              <option value="innovative">Innovative/Cutting-Edge</option>
              <option value="traditional">Traditional/Established</option>
              <option value="flexible">Flexible/Convenient</option>
              <option value="specialized">Specialized/Niche</option>
            </select>
          </div>

          <div class="form-field">
            <label for="differentiators" class="form-label">Key Differentiators</label>
            <textarea id="differentiators" class="form-textarea" rows="3" placeholder="Specific features that make this program unique in the marketplace..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Marketing Materials & Resources</h3>
          <div class="form-field">
            <label for="marketingAssets" class="form-label">Available Marketing Assets</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="logo"> Program Logo
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="brochure"> Print Brochure
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="flyer"> Program Flyer
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="video"> Promotional Video
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="photos"> Professional Photos
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="infographic"> Infographics
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="presentation"> Presentation Slides
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="marketingAsset" value="testimonials"> Student Testimonials
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="marketingTeam" class="form-label">Marketing Team Contacts</label>
            <textarea id="marketingTeam" class="form-textarea" rows="3" placeholder="List marketing team members, roles, and contact information..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="launchDate" class="form-label">Marketing Launch Date</label>
                <input type="date" id="launchDate" class="form-input">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="campaignDuration" class="form-label">Campaign Duration</label>
                <select id="campaignDuration" class="form-select">
                  <option value="">Select Duration</option>
                  <option value="1-month">1 Month</option>
                  <option value="3-months">3 Months</option>
                  <option value="6-months">6 Months</option>
                  <option value="12-months">12 Months</option>
                  <option value="ongoing">Ongoing</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="enrollmentGoal" class="form-label">Enrollment Target</label>
                <input type="number" id="enrollmentGoal" class="form-input" placeholder="e.g., 150" min="1">
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="marketingNotes" class="form-label">Additional Marketing Notes</label>
            <textarea id="marketingNotes" class="form-textarea" rows="3" placeholder="Any additional marketing strategies, seasonal considerations, special events, or promotional ideas..."></textarea>
          </div>
        </div>
      `,
      policies: () => `
        <div class="form-section">
          <h3 class="form-section-title">Academic Policies</h3>
          <div class="form-field">
            <label for="attendancePolicy" class="form-label">Attendance Policy</label>
            <textarea id="attendancePolicy" class="form-textarea" rows="4" placeholder="Define attendance requirements, excused/unexcused absences, impact on grades, makeup policies..."></textarea>
          </div>

          <div class="form-field">
            <label for="gradingPolicy" class="form-label">Grading Policy</label>
            <textarea id="gradingPolicy" class="form-textarea" rows="4" placeholder="Explain grading scale, grade point calculations, pass/fail options, incomplete grades, grade appeals..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="minimumGradeReq" class="form-label">Minimum Grade Requirement</label>
                <select id="minimumGradeReq" class="form-select">
                  <option value="">Select Minimum Grade</option>
                  <option value="A">A (90-100%)</option>
                  <option value="B">B (80-89%)</option>
                  <option value="C">C (70-79%)</option>
                  <option value="D">D (60-69%)</option>
                  <option value="Pass">Pass/Fail</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="retakePolicy" class="form-label">Course Retake Policy</label>
                <select id="retakePolicy" class="form-select">
                  <option value="">Select Policy</option>
                  <option value="unlimited">Unlimited Retakes</option>
                  <option value="once">One Retake Allowed</option>
                  <option value="twice">Two Retakes Allowed</option>
                  <option value="approval">Requires Approval</option>
                  <option value="none">No Retakes</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="progressionRequirement" class="form-label">Progression Requirement</label>
                <input type="text" id="progressionRequirement" class="form-input" placeholder="e.g., 2.5 GPA, 75% completion">
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="academicIntegrityPolicy" class="form-label">Academic Integrity Policy</label>
            <textarea id="academicIntegrityPolicy" class="form-textarea" rows="4" placeholder="Define plagiarism, cheating, academic dishonesty, consequences, reporting procedures..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Enrollment & Registration</h3>
          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="enrollmentStatus" class="form-label">Enrollment Status</label>
                <select id="enrollmentStatus" class="form-select">
                  <option value="">Select Status</option>
                  <option value="open">Open Enrollment</option>
                  <option value="limited">Limited Enrollment</option>
                  <option value="closed">Closed Enrollment</option>
                  <option value="waitlist">Waitlist Available</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="maxEnrollment" class="form-label">Maximum Enrollment</label>
                <input type="number" id="maxEnrollment" class="form-input" placeholder="e.g., 150" min="1">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="waitlistPolicy" class="form-label">Waitlist Policy</label>
                <select id="waitlistPolicy" class="form-select">
                  <option value="none">No Waitlist</option>
                  <option value="automatic">Automatic Waitlist</option>
                  <option value="application">Application Required</option>
                  <option value="rolling">Rolling Waitlist</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="registrationPriority" class="form-label">Registration Priority</label>
            <textarea id="registrationPriority" class="form-textarea" rows="3" placeholder="Define registration order: continuing students, new students, special populations, dates..."></textarea>
          </div>

          <div class="form-field">
            <label for="addDropPolicy" class="form-label">Add/Drop Policy</label>
            <textarea id="addDropPolicy" class="form-textarea" rows="3" placeholder="Specify deadlines for adding/dropping courses, refund policies, academic/financial consequences..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="withdrawalDeadline" class="form-label">Withdrawal Deadline</label>
                <input type="date" id="withdrawalDeadline" class="form-input">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="refundPolicy" class="form-label">Refund Policy</label>
                <select id="refundPolicy" class="form-select">
                  <option value="">Select Policy</option>
                  <option value="full-week1">100% Week 1</option>
                  <option value="prorated">Prorated by Week</option>
                  <option value="no-refund">No Refunds</option>
                  <option value="case-by-case">Case by Case</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="transferPolicy" class="form-label">Transfer Policy</label>
                <select id="transferPolicy" class="form-select">
                  <option value="liberal">Liberal Transfer</option>
                  <option value="moderate">Moderate Transfer</option>
                  <option value="restrictive">Restrictive Transfer</option>
                  <option value="none">No Transfers</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Student Conduct & Behavior</h3>
          <div class="form-field">
            <label for="codeOfConduct" class="form-label">Code of Conduct</label>
            <textarea id="codeOfConduct" class="form-textarea" rows="4" placeholder="Outline expected behavior, professionalism standards, respect for others, classroom etiquette..."></textarea>
          </div>

          <div class="form-field">
            <label for="disciplinaryProcedures" class="form-label">Disciplinary Procedures</label>
            <textarea id="disciplinaryProcedures" class="form-textarea" rows="4" placeholder="Define violation reporting, investigation process, hearings, appeals, sanctions..."></textarea>
          </div>

          <div class="form-field">
            <label class="form-label">Prohibited Behaviors</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="prohibitedBehavior" value="harassment" checked> Harassment
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="prohibitedBehavior" value="discrimination" checked> Discrimination
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="prohibitedBehavior" value="cheating" checked> Academic Dishonesty
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="prohibitedBehavior" value="substance-abuse"> Substance Abuse
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="prohibitedBehavior" value="violence"> Violence/Threats
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="prohibitedBehavior" value="disruption"> Classroom Disruption
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="grievanceProcedure" class="form-label">Student Grievance Procedure</label>
            <textarea id="grievanceProcedure" class="form-textarea" rows="3" placeholder="Explain process for filing complaints, informal resolution, formal hearings, appeals..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Technology & Equipment</h3>
          <div class="form-field">
            <label for="technologyRequirements" class="form-label">Technology Requirements</label>
            <textarea id="technologyRequirements" class="form-textarea" rows="4" placeholder="List required devices, software, internet speed, operating systems, technical specifications..."></textarea>
          </div>

          <div class="form-field">
            <label for="acceptableUsePolicy" class="form-label">Acceptable Use Policy</label>
            <textarea id="acceptableUsePolicy" class="form-textarea" rows="4" placeholder="Define appropriate use of technology resources, prohibited activities, consequences for misuse..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="devicePolicy" class="form-label">Device Policy</label>
                <select id="devicePolicy" class="form-select">
                  <option value="">Select Policy</option>
                  <option value="required">Device Required</option>
                  <option value="recommended">Device Recommended</option>
                  <option value="provided">Device Provided</option>
                  <option value="byod">Bring Your Own Device</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="internetRequirement" class="form-label">Internet Requirement</label>
                <input type="text" id="internetRequirement" class="form-input" placeholder="e.g., 25 Mbps minimum">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="techSupportAvailable" class="form-label">Tech Support Available</label>
                <select id="techSupportAvailable" class="form-select">
                  <option value="24-7">24/7 Support</option>
                  <option value="business-hours">Business Hours</option>
                  <option value="limited">Limited Support</option>
                  <option value="none">No Support</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="dataPrivacyPolicy" class="form-label">Data Privacy & Security Policy</label>
            <textarea id="dataPrivacyPolicy" class="form-textarea" rows="3" placeholder="Explain data collection, storage, sharing, student privacy rights, FERPA compliance..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Accessibility & Accommodations</h3>
          <div class="form-field">
            <label for="disabilityPolicy" class="form-label">Disability Services Policy</label>
            <textarea id="disabilityPolicy" class="form-textarea" rows="4" placeholder="Outline accommodation process, documentation requirements, available services, contact information..."></textarea>
          </div>

          <div class="form-field">
            <label class="form-label">Available Accommodations</label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="accommodation" value="extended-time"> Extended Test Time
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="accommodation" value="note-taking"> Note-Taking Services
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="accommodation" value="interpreters"> Sign Language Interpreters
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="accommodation" value="assistive-tech"> Assistive Technology
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="accommodation" value="alternative-format"> Alternative Format Materials
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" name="accommodation" value="flexible-deadlines"> Flexible Deadlines
              </label>
            </div>
          </div>

          <div class="form-field">
            <label for="accommodationProcess" class="form-label">Accommodation Request Process</label>
            <textarea id="accommodationProcess" class="form-textarea" rows="3" placeholder="Explain how students request accommodations, timeline, documentation needed, approval process..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="disabilityContact" class="form-label">Disability Services Contact</label>
                <input type="text" id="disabilityContact" class="form-input" placeholder="Name or Office">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="disabilityEmail" class="form-label">Disability Services Email</label>
                <input type="email" id="disabilityEmail" class="form-input" placeholder="disability@university.edu">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="disabilityPhone" class="form-label">Disability Services Phone</label>
                <input type="tel" id="disabilityPhone" class="form-input" placeholder="(555) 123-4567">
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Financial Policies</h3>
          <div class="form-field">
            <label for="paymentPolicy" class="form-label">Payment Policy</label>
            <textarea id="paymentPolicy" class="form-textarea" rows="3" placeholder="Define payment deadlines, accepted methods, late fees, payment plans, financial holds..."></textarea>
          </div>

          <div class="form-field">
            <label for="financialAidPolicy" class="form-label">Financial Aid Policy</label>
            <textarea id="financialAidPolicy" class="form-textarea" rows="3" placeholder="Explain aid eligibility, application process, satisfactory academic progress, aid disbursement..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="lateFeeAmount" class="form-label">Late Fee Amount</label>
                <input type="number" id="lateFeeAmount" class="form-input" placeholder="e.g., 50" min="0" step="0.01">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="paymentPlanAvailable" class="form-label">Payment Plan Available</label>
                <select id="paymentPlanAvailable" class="form-select">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                  <option value="case-by-case">Case by Case</option>
                </select>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="scholarshipOpportunities" class="form-label">Scholarship Opportunities</label>
                <select id="scholarshipOpportunities" class="form-select">
                  <option value="many">Many Available</option>
                  <option value="some">Some Available</option>
                  <option value="limited">Limited</option>
                  <option value="none">None Available</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="refundSchedule" class="form-label">Refund Schedule</label>
            <textarea id="refundSchedule" class="form-textarea" rows="3" placeholder="Define refund percentages by withdrawal date, processing time, fees..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Emergency & Safety Policies</h3>
          <div class="form-field">
            <label for="emergencyProcedures" class="form-label">Emergency Procedures</label>
            <textarea id="emergencyProcedures" class="form-textarea" rows="4" placeholder="Outline procedures for various emergencies: medical, weather, security, evacuation..."></textarea>
          </div>

          <div class="form-field">
            <label for="healthSafetyPolicy" class="form-label">Health & Safety Policy</label>
            <textarea id="healthSafetyPolicy" class="form-textarea" rows="3" placeholder="Define health requirements, safety protocols, reporting procedures, campus safety resources..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="emergencyContact" class="form-label">Emergency Contact</label>
                <input type="tel" id="emergencyContact" class="form-input" placeholder="(555) 911-0000">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="campusSecurity" class="form-label">Campus Security</label>
                <input type="tel" id="campusSecurity" class="form-input" placeholder="(555) 123-SAFE">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="alertSystem" class="form-label">Emergency Alert System</label>
                <select id="alertSystem" class="form-select">
                  <option value="email">Email Alerts</option>
                  <option value="text">Text Messages</option>
                  <option value="both">Email & Text</option>
                  <option value="app">Mobile App</option>
                  <option value="none">No System</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="incidentReporting" class="form-label">Incident Reporting Policy</label>
            <textarea id="incidentReporting" class="form-textarea" rows="3" placeholder="Explain how to report incidents, confidentiality, investigation process, support services..."></textarea>
          </div>
        </div>

        <div class="form-section">
          <h3 class="form-section-title">Additional Policies</h3>
          <div class="form-field">
            <label for="customPolicy1Title" class="form-label">Custom Policy 1 Title</label>
            <input type="text" id="customPolicy1Title" class="form-input" placeholder="Enter policy title...">
          </div>
          <div class="form-field">
            <label for="customPolicy1Content" class="form-label">Policy Content</label>
            <textarea id="customPolicy1Content" class="form-textarea" rows="3" placeholder="Enter policy details..."></textarea>
          </div>

          <div class="form-field">
            <label for="customPolicy2Title" class="form-label">Custom Policy 2 Title</label>
            <input type="text" id="customPolicy2Title" class="form-input" placeholder="Enter policy title...">
          </div>
          <div class="form-field">
            <label for="customPolicy2Content" class="form-label">Policy Content</label>
            <textarea id="customPolicy2Content" class="form-textarea" rows="3" placeholder="Enter policy details..."></textarea>
          </div>

          <div class="form-row">
            <div class="form-col">
              <div class="form-field">
                <label for="policyEffectiveDate" class="form-label">Policies Effective Date</label>
                <input type="date" id="policyEffectiveDate" class="form-input">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="policyReviewDate" class="form-label">Next Review Date</label>
                <input type="date" id="policyReviewDate" class="form-input">
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label for="policyContact" class="form-label">Policy Questions Contact</label>
                <input type="email" id="policyContact" class="form-input" placeholder="policies@university.edu">
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="policyNotes" class="form-label">Additional Policy Notes</label>
            <textarea id="policyNotes" class="form-textarea" rows="3" placeholder="Any additional policies, special considerations, or notes for this program..."></textarea>
          </div>
        </div>
      `
    };

    // Switch tabs with content loading
    function switchTab(tabName) {
      document.querySelectorAll('.editor-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
      
      // Load tab content
      const contentContainer = document.getElementById('editorContent');
      if (tabContents[tabName]) {
        contentContainer.innerHTML = tabContents[tabName]();
        
        // Re-setup form event listeners for new content
        setupFormListeners();
        
        // Load current program data into new form fields
        if (currentProgram) {
          loadProgramDataIntoTab(tabName);
        }
      }
      
      console.log('ðŸ“‘ Switched to tab:', tabName, 'with content loaded');
    }

    // Setup form listeners for auto-save
    function setupFormListeners() {
      const formInputs = document.querySelectorAll('#editorContent input, #editorContent select, #editorContent textarea');
      formInputs.forEach(input => {
        input.addEventListener('input', function() {
          isDirty = true;
          debounce(autoSave, 2000)();
        });
      });
    }

    // Load program data into current tab
    function loadProgramDataIntoTab(tabName) {
      if (!currentProgram) return;
      
      // Load all form fields for any tab
      loadAllFormData();
      
      if (tabName === 'overview') {
        // Load overview data
        const fields = [
          'programTitle', 'programCode', 'programType', 'programDegree', 
          'programDescription', 'programDuration', 'programCredits', 'programStartDate',
          'programLevel', 'programDiscipline', 'programFormat', 'programLanguage',
          'programObjectives', 'accreditationBody', 'accreditationStatus', 'programRecognition'
        ];
        
        fields.forEach(fieldId => {
          const element = document.getElementById(fieldId);
          if (element && currentProgram[fieldId.replace('program', '').toLowerCase()]) {
            element.value = currentProgram[fieldId.replace('program', '').toLowerCase()];
          }
        });
      } else if (tabName === 'outcomes') {
        // Load outcomes data
        loadOutcomesData();
      } else if (tabName === 'curriculum') {
        // Load curriculum data
        loadCurriculumData();
      }
    }

    // Curriculum Management
    let courseCategoriesData = [];
    let concentrationsData = [];
    let categoryCounter = 0;
    let concentrationCounter = 0;

    function initializeCurriculum() {
      // Add default course categories for Computer Science program
      if (courseCategoriesData.length === 0) {
        courseCategoriesData = [
          {
            id: 'cat_1',
            name: 'Core Computer Science',
            description: 'Fundamental computer science courses required for all students',
            requiredCredits: 42,
            courses: [
              { code: 'CS101', title: 'Introduction to Programming', credits: 3, required: true },
              { code: 'CS201', title: 'Data Structures & Algorithms', credits: 3, required: true },
              { code: 'CS301', title: 'Computer Systems & Architecture', credits: 3, required: true },
              { code: 'CS401', title: 'Software Engineering', credits: 3, required: true }
            ]
          },
          {
            id: 'cat_2', 
            name: 'Mathematics & Statistics',
            description: 'Mathematical foundation courses',
            requiredCredits: 18,
            courses: [
              { code: 'MATH151', title: 'Calculus I', credits: 4, required: true },
              { code: 'MATH152', title: 'Calculus II', credits: 4, required: true },
              { code: 'STAT201', title: 'Statistics for CS', credits: 3, required: true }
            ]
          }
        ];
        categoryCounter = 2;
      }

      if (concentrationsData.length === 0) {
        concentrationsData = [
          {
            id: 'conc_1',
            name: 'Software Development',
            description: 'Focus on application development, web technologies, and software architecture',
            requiredCourses: 'CS402, CS403, CS404',
            electiveCredits: 9
          },
          {
            id: 'conc_2',
            name: 'Data Science & Analytics', 
            description: 'Emphasis on machine learning, data mining, and statistical analysis',
            requiredCourses: 'CS405, CS406, STAT301',
            electiveCredits: 9
          }
        ];
        concentrationCounter = 2;
      }

      renderCourseCategories();
      renderConcentrations();
      updateTotalCredits();
    }

    function addCourseCategory() {
      categoryCounter++;
      const newCategory = {
        id: `cat_${categoryCounter}`,
        name: 'New Category',
        description: '',
        requiredCredits: 0,
        courses: []
      };
      
      courseCategoriesData.push(newCategory);
      renderCourseCategories();
      updateTotalCredits();
    }

    function removeCourseCategory(categoryId) {
      courseCategoriesData = courseCategoriesData.filter(cat => cat.id !== categoryId);
      renderCourseCategories();
      updateTotalCredits();
      isDirty = true;
      debounce(autoSave, 1000)();
    }

    function renderCourseCategories() {
      const container = document.getElementById('courseCategoriesList');
      if (!container) return;

      container.innerHTML = courseCategoriesData.map((category, index) => `
        <div class="course-category-item" style="
          border: 1px solid #e5e7eb; 
          border-radius: 8px; 
          padding: 24px; 
          margin-bottom: 20px;
          background: #ffffff;
        ">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
            <h4 style="margin: 0; color: #111827; font-size: 18px; font-weight: 600;">Category ${index + 1}</h4>
            <button type="button" onclick="removeCourseCategory('${category.id}')" style="
              background: none; 
              border: none; 
              color: #dc2626; 
              cursor: pointer; 
              font-size: 18px;
              padding: 4px;
            ">&times;</button>
          </div>
          
          <div class="form-row">
            <div class="form-col-2">
              <div class="form-field">
                <label class="form-label">Category Name</label>
                <input 
                  type="text" 
                  class="form-input" 
                  value="${category.name}" 
                  placeholder="e.g., Core Computer Science"
                  onchange="updateCourseCategory('${category.id}', 'name', this.value)"
                >
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Required Credits</label>
                <input 
                  type="number" 
                  class="form-input" 
                  value="${category.requiredCredits}" 
                  min="0"
                  onchange="updateCourseCategory('${category.id}', 'requiredCredits', parseInt(this.value) || 0)"
                >
              </div>
            </div>
          </div>

          <div class="form-field">
            <label class="form-label">Description</label>
            <textarea 
              class="form-textarea" 
              style="min-height: 60px;"
              placeholder="Describe this category of courses..."
              onchange="updateCourseCategory('${category.id}', 'description', this.value)"
            >${category.description}</textarea>
          </div>

          <div style="margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
              <label class="form-label" style="margin: 0;">Courses in Category</label>
              <button type="button" class="btn btn-secondary" style="padding: 8px 12px; font-size: 12px;" onclick="addCourse('${category.id}')">
                Add Course
              </button>
            </div>
            <div id="coursesList_${category.id}">
              ${category.courses.map((course, courseIndex) => `
                <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 8px; padding: 12px; background: #f8fafc; border-radius: 6px;">
                  <input type="text" placeholder="Course Code" value="${course.code}" style="width: 100px; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;" onchange="updateCourse('${category.id}', ${courseIndex}, 'code', this.value)">
                  <input type="text" placeholder="Course Title" value="${course.title}" style="flex: 1; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;" onchange="updateCourse('${category.id}', ${courseIndex}, 'title', this.value)">
                  <input type="number" placeholder="Credits" value="${course.credits}" style="width: 80px; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;" min="0" onchange="updateCourse('${category.id}', ${courseIndex}, 'credits', parseInt(this.value) || 0)">
                  <label style="display: flex; align-items: center; gap: 4px; white-space: nowrap;">
                    <input type="checkbox" ${course.required ? 'checked' : ''} onchange="updateCourse('${category.id}', ${courseIndex}, 'required', this.checked)"> Required
                  </label>
                  <button type="button" onclick="removeCourse('${category.id}', ${courseIndex})" style="background: none; border: none; color: #dc2626; cursor: pointer; padding: 4px;">&times;</button>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `).join('');
    }

    function updateCourseCategory(categoryId, field, value) {
      const category = courseCategoriesData.find(cat => cat.id === categoryId);
      if (category) {
        category[field] = value;
        if (field === 'requiredCredits') {
          updateTotalCredits();
        }
        isDirty = true;
        debounce(autoSave, 2000)();
      }
    }

    function addCourse(categoryId) {
      const category = courseCategoriesData.find(cat => cat.id === categoryId);
      if (category) {
        category.courses.push({
          code: '',
          title: '',
          credits: 3,
          required: false
        });
        renderCourseCategories();
        updateTotalCredits();
      }
    }

    function removeCourse(categoryId, courseIndex) {
      const category = courseCategoriesData.find(cat => cat.id === categoryId);
      if (category) {
        category.courses.splice(courseIndex, 1);
        renderCourseCategories();
        updateTotalCredits();
        isDirty = true;
        debounce(autoSave, 1000)();
      }
    }

    function updateCourse(categoryId, courseIndex, field, value) {
      const category = courseCategoriesData.find(cat => cat.id === categoryId);
      if (category && category.courses[courseIndex]) {
        category.courses[courseIndex][field] = value;
        if (field === 'credits') {
          updateTotalCredits();
        }
        isDirty = true;
        debounce(autoSave, 2000)();
      }
    }

    function updateTotalCredits() {
      let totalCredits = 0;
      courseCategoriesData.forEach(category => {
        category.courses.forEach(course => {
          totalCredits += course.credits || 0;
        });
      });
      
      const totalElement = document.getElementById('totalCurriculumCredits');
      if (totalElement) {
        totalElement.textContent = totalCredits;
      }
    }

    function addConcentration() {
      concentrationCounter++;
      const newConcentration = {
        id: `conc_${concentrationCounter}`,
        name: 'New Concentration',
        description: '',
        requiredCourses: '',
        electiveCredits: 9
      };
      
      concentrationsData.push(newConcentration);
      renderConcentrations();
    }

    function removeConcentration(concentrationId) {
      concentrationsData = concentrationsData.filter(conc => conc.id !== concentrationId);
      renderConcentrations();
      isDirty = true;
      debounce(autoSave, 1000)();
    }

    function renderConcentrations() {
      const container = document.getElementById('concentrationsList');
      if (!container) return;

      container.innerHTML = concentrationsData.map((concentration, index) => `
        <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 12px; background: #ffffff;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h5 style="margin: 0; font-size: 14px; font-weight: 600;">Concentration ${index + 1}</h5>
            <button type="button" onclick="removeConcentration('${concentration.id}')" style="background: none; border: none; color: #dc2626; cursor: pointer; font-size: 16px;">&times;</button>
          </div>
          <div class="form-row">
            <div class="form-col">
              <input type="text" class="form-input" value="${concentration.name}" placeholder="Concentration Name" onchange="updateConcentration('${concentration.id}', 'name', this.value)" style="margin-bottom: 8px;">
              <textarea class="form-textarea" style="min-height: 60px;" placeholder="Description..." onchange="updateConcentration('${concentration.id}', 'description', this.value)">${concentration.description}</textarea>
            </div>
            <div class="form-col">
              <input type="text" class="form-input" value="${concentration.requiredCourses}" placeholder="Required Courses (comma-separated)" onchange="updateConcentration('${concentration.id}', 'requiredCourses', this.value)" style="margin-bottom: 8px;">
              <input type="number" class="form-input" value="${concentration.electiveCredits}" placeholder="Elective Credits" min="0" onchange="updateConcentration('${concentration.id}', 'electiveCredits', parseInt(this.value) || 0)">
            </div>
          </div>
        </div>
      `).join('');
    }

    function updateConcentration(concentrationId, field, value) {
      const concentration = concentrationsData.find(conc => conc.id === concentrationId);
      if (concentration) {
        concentration[field] = value;
        isDirty = true;
        debounce(autoSave, 2000)();
      }
    }

    function importCourses() {
      alert('Course import feature coming in future update!');
    }

    function loadCurriculumData() {
      // Load curriculum data from current program or initialize defaults
      if (currentProgram && currentProgram.courseCategories) {
        courseCategoriesData = [...currentProgram.courseCategories];
      } else {
        initializeCurriculum();
      }

      if (currentProgram && currentProgram.concentrations) {
        concentrationsData = [...currentProgram.concentrations];
      }
      
      // Load other curriculum form fields
      const curriculumFields = [
        'curriculumModel', 'academicYears', 'periodsPerYear', 'coreCredits', 'electiveCredits', 
        'generalEdCredits', 'minorOptions', 'dualDegreeOptions', 'internshipRequirements',
        'capstoneProject', 'admissionPrerequisites', 'progressionRequirements', 'minimumGPA', 'graduationRequirements'
      ];
      
      curriculumFields.forEach(fieldId => {
        const element = document.getElementById(fieldId);
        if (element && currentProgram && currentProgram[fieldId]) {
          element.value = currentProgram[fieldId];
        }
      });

      // Load experiential learning checkboxes
      if (currentProgram && currentProgram.experientialLearning) {
        const checkboxes = document.querySelectorAll('input[name="experientialLearning"]');
        checkboxes.forEach(checkbox => {
          checkbox.checked = currentProgram.experientialLearning.includes(checkbox.value);
        });
      }

      renderCourseCategories();
      renderConcentrations();
      updateTotalCredits();
    }

    // Learning Outcomes Management
    let learningOutcomesData = [];
    let outcomeCounter = 0;

    function initializeLearningOutcomes() {
      // Add some default outcomes for the Computer Science program
      if (learningOutcomesData.length === 0) {
        learningOutcomesData = [
          {
            id: 'lo_1',
            title: 'Problem Solving & Analysis',
            description: 'Students will demonstrate the ability to analyze complex problems and design appropriate computational solutions.',
            level: 'advanced',
            category: 'cognitive'
          },
          {
            id: 'lo_2', 
            title: 'Software Development',
            description: 'Students will design, implement, test, and maintain software systems using industry-standard practices.',
            level: 'advanced',
            category: 'technical'
          },
          {
            id: 'lo_3',
            title: 'Communication & Teamwork',
            description: 'Students will communicate effectively in professional settings and work collaboratively in team environments.',
            level: 'intermediate',
            category: 'interpersonal'
          }
        ];
        outcomeCounter = 3;
      }
      renderLearningOutcomes();
    }

    function addLearningOutcome() {
      outcomeCounter++;
      const newOutcome = {
        id: `lo_${outcomeCounter}`,
        title: '',
        description: '',
        level: 'beginner',
        category: 'cognitive'
      };
      
      learningOutcomesData.push(newOutcome);
      renderLearningOutcomes();
      
      // Focus on the new outcome title field
      setTimeout(() => {
        const titleField = document.querySelector(`#outcome_${newOutcome.id}_title`);
        if (titleField) titleField.focus();
      }, 100);
    }

    function removeLearningOutcome(outcomeId) {
      learningOutcomesData = learningOutcomesData.filter(outcome => outcome.id !== outcomeId);
      renderLearningOutcomes();
      isDirty = true;
      debounce(autoSave, 1000)();
    }

    function renderLearningOutcomes() {
      const container = document.getElementById('learningOutcomesList');
      if (!container) return;

      container.innerHTML = learningOutcomesData.map((outcome, index) => `
        <div class="learning-outcome-item" style="
          border: 1px solid #e5e7eb; 
          border-radius: 8px; 
          padding: 20px; 
          margin-bottom: 16px;
          background: #ffffff;
        ">
          <div style="display: flex; justify-content: between; align-items: flex-start; margin-bottom: 16px;">
            <h4 style="margin: 0; color: #111827; font-size: 16px;">Learning Outcome ${index + 1}</h4>
            <button type="button" onclick="removeLearningOutcome('${outcome.id}')" style="
              background: none; 
              border: none; 
              color: #dc2626; 
              cursor: pointer; 
              font-size: 18px;
              padding: 4px;
            ">&times;</button>
          </div>
          
          <div class="form-row">
            <div class="form-col-2">
              <div class="form-field">
                <label class="form-label">Outcome Title</label>
                <input 
                  type="text" 
                  id="outcome_${outcome.id}_title"
                  class="form-input" 
                  value="${outcome.title}" 
                  placeholder="e.g., Critical Thinking and Analysis"
                  onchange="updateLearningOutcome('${outcome.id}', 'title', this.value)"
                >
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Level</label>
                <select 
                  class="form-select" 
                  onchange="updateLearningOutcome('${outcome.id}', 'level', this.value)"
                >
                  <option value="beginner" ${outcome.level === 'beginner' ? 'selected' : ''}>Beginner</option>
                  <option value="intermediate" ${outcome.level === 'intermediate' ? 'selected' : ''}>Intermediate</option>
                  <option value="advanced" ${outcome.level === 'advanced' ? 'selected' : ''}>Advanced</option>
                  <option value="expert" ${outcome.level === 'expert' ? 'selected' : ''}>Expert</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-col-2">
              <div class="form-field">
                <label class="form-label">Description</label>
                <textarea 
                  class="form-textarea" 
                  style="min-height: 80px;"
                  placeholder="Describe what students will know, understand, and be able to do..."
                  onchange="updateLearningOutcome('${outcome.id}', 'description', this.value)"
                >${outcome.description}</textarea>
              </div>
            </div>
            <div class="form-col">
              <div class="form-field">
                <label class="form-label">Category</label>
                <select 
                  class="form-select" 
                  onchange="updateLearningOutcome('${outcome.id}', 'category', this.value)"
                >
                  <option value="cognitive" ${outcome.category === 'cognitive' ? 'selected' : ''}>Cognitive</option>
                  <option value="technical" ${outcome.category === 'technical' ? 'selected' : ''}>Technical</option>
                  <option value="interpersonal" ${outcome.category === 'interpersonal' ? 'selected' : ''}>Interpersonal</option>
                  <option value="professional" ${outcome.category === 'professional' ? 'selected' : ''}>Professional</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    function updateLearningOutcome(outcomeId, field, value) {
      const outcome = learningOutcomesData.find(lo => lo.id === outcomeId);
      if (outcome) {
        outcome[field] = value;
        isDirty = true;
        debounce(autoSave, 2000)();
      }
    }

    function loadOutcomesData() {
      // Load outcomes data from current program or initialize defaults
      if (currentProgram && currentProgram.learningOutcomes) {
        learningOutcomesData = [...currentProgram.learningOutcomes];
      } else {
        initializeLearningOutcomes();
      }
      
      // Load other outcomes form fields
      const outcomeFields = [
        'outcomesFramework', 'outcomesAlignment', 'cognitiveSkills', 'technicalSkills',
        'interpersonalSkills', 'professionalSkills', 'outcomesAssessment', 
        'graduateAttributes', 'careerPaths', 'furtherStudy'
      ];
      
      outcomeFields.forEach(fieldId => {
        const element = document.getElementById(fieldId);
        if (element && currentProgram && currentProgram[fieldId]) {
          element.value = currentProgram[fieldId];
        }
      });

      // Load assessment method checkboxes
      if (currentProgram && currentProgram.assessmentMethods) {
        const checkboxes = document.querySelectorAll('input[name="assessmentMethod"]');
        checkboxes.forEach(checkbox => {
          checkbox.checked = currentProgram.assessmentMethods.includes(checkbox.value);
        });
      }
    }

    // Template system
    const programTemplates = {
      undergraduate: {
        title: 'Undergraduate Program Template',
        description: 'Comprehensive 4-year bachelor degree program template',
        defaultCredits: 120,
        defaultDuration: '4 years',
        sections: ['Overview', 'Outcomes', 'Curriculum', 'Admissions', 'Tuition & Fees']
      },
      graduate: {
        title: 'Graduate Program Template', 
        description: 'Advanced master or doctoral degree program template',
        defaultCredits: 60,
        defaultDuration: '2 years',
        sections: ['Overview', 'Outcomes', 'Curriculum', 'Research', 'Admissions']
      },
      certificate: {
        title: 'Certificate/Micro-credential Template',
        description: 'Short-term specialized certification program template',
        defaultCredits: 18,
        defaultDuration: '6 months',
        sections: ['Overview', 'Outcomes', 'Curriculum', 'Assessment']
      },
      online: {
        title: 'Online/Distance Learning Template',
        description: 'Flexible online delivery program template',
        defaultCredits: 90,
        defaultDuration: '3 years',
        sections: ['Overview', 'Delivery', 'Technology', 'Support', 'Assessment']
      }
    };

    function showNewProgramModal() {
      const modal = createModal('New Program', `
        <div style="padding: 24px;">
          <h3 style="margin: 0 0 20px 0;">Choose how to create your program:</h3>
          <div style="display: grid; gap: 16px;">
            <button class="btn btn-primary" onclick="showTemplateSelector(); closeModal();" style="justify-content: flex-start; padding: 20px;">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <div>
                <div style="font-weight: 600;">Start from Template</div>
                <div style="font-size: 12px; opacity: 0.8;">Choose from pre-built program templates</div>
              </div>
            </button>
            <button class="btn btn-secondary" onclick="startFromScratch(); closeModal();" style="justify-content: flex-start; padding: 20px;">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              <div>
                <div style="font-weight: 600;">Design from Scratch</div>
                <div style="font-size: 12px; opacity: 0.8;">Build your program using the section library</div>
              </div>
            </button>
          </div>
        </div>
      `);
      showModal(modal);
    }

    function showTemplateSelector() {
      const templateOptions = Object.keys(programTemplates).map(key => {
        const template = programTemplates[key];
        return `
          <div class="template-card" onclick="selectTemplate('${key}')" style="
            border: 1px solid #e5e7eb; 
            border-radius: 8px; 
            padding: 20px; 
            cursor: pointer; 
            transition: all 0.2s;
            background: #ffffff;
          ">
            <h4 style="margin: 0 0 8px 0; color: #111827;">${template.title}</h4>
            <p style="margin: 0 0 12px 0; color: #6b7280; font-size: 14px;">${template.description}</p>
            <div style="font-size: 12px; color: #9ca3af;">
              ${template.defaultDuration} â€¢ ${template.defaultCredits} credits â€¢ ${template.sections.length} sections
            </div>
          </div>
        `;
      }).join('');

      const modal = createModal('Choose Template', `
        <div style="padding: 24px;">
          <h3 style="margin: 0 0 20px 0;">Select a program template to get started:</h3>
          <div style="display: grid; gap: 16px; max-height: 400px; overflow-y: auto;">
            ${templateOptions}
          </div>
          <div style="margin-top: 24px; display: flex; justify-content: flex-end; gap: 12px;">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
          </div>
        </div>
        <style>
          .template-card:hover {
            border-color: #3b82f6 !important;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1) !important;
          }
        </style>
      `);
      showModal(modal);
    }

    function selectTemplate(templateKey) {
      const template = programTemplates[templateKey];
      console.log('ðŸ“‹ Creating program from template:', template.title);
      
      const newProgram = {
        id: generateId(),
        title: `New ${template.title}`,
        code: '',
        type: templateKey,
        degree: '',
        description: '',
        duration: template.defaultDuration,
        credits: template.defaultCredits,
        startDate: '',
        status: 'draft',
        lastModified: new Date(),
        version: '1.0',
        template: templateKey,
        sections: [...template.sections]
      };

      programsData.push(newProgram);
      addProgramToSidebar(newProgram);
      loadProgram(newProgram.id);
      closeModal();
      
      alert(`Created new program from ${template.title}!`);
    }

    function startFromScratch() {
      const modal = createModal('Design from Scratch', `
        <div style="padding: 24px;">
          <h3 style="margin: 0 0 20px 0;">Add Section Library</h3>
          <p style="color: #6b7280; margin: 0 0 24px 0;">Build your program by selecting from available sections:</p>
          
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 24px;">
            ${getSectionLibrary().map(section => `
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" value="${section.key}" checked="${section.default ? 'checked' : ''}">
                <span style="font-size: 14px;">${section.title}</span>
              </label>
            `).join('')}
          </div>
          
          <div style="margin-bottom: 24px;">
            <label class="form-label">Program Type:</label>
            <select id="scratchProgramType" class="form-select">
              <option value="undergraduate">Undergraduate</option>
              <option value="graduate">Graduate</option>
              <option value="certificate">Certificate</option>
              <option value="online">Online/Distance</option>
            </select>
          </div>
          
          <div style="display: flex; justify-content: flex-end; gap: 12px;">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-primary" onclick="createFromScratch()">Create Program</button>
          </div>
        </div>
      `);
      showModal(modal);
    }

    function getSectionLibrary() {
      return [
        { key: 'overview', title: 'Overview', default: true },
        { key: 'outcomes', title: 'Learning Outcomes', default: true },
        { key: 'curriculum', title: 'Curriculum', default: true },
        { key: 'admissions', title: 'Admissions', default: true },
        { key: 'tuition', title: 'Tuition & Fees', default: true },
        { key: 'delivery', title: 'Delivery & Location', default: false },
        { key: 'faculty', title: 'Faculty & Contacts', default: false },
        { key: 'faq', title: 'FAQ', default: false },
        { key: 'marketing', title: 'Marketing Materials', default: false },
        { key: 'policies', title: 'Policies & Procedures', default: false },
        { key: 'research', title: 'Research Requirements', default: false },
        { key: 'technology', title: 'Technology Requirements', default: false },
        { key: 'support', title: 'Student Support', default: false },
        { key: 'assessment', title: 'Assessment Methods', default: false }
      ];
    }

    function createFromScratch() {
      const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
      const selectedSections = Array.from(checkboxes).map(cb => cb.value);
      const programType = document.getElementById('scratchProgramType').value;
      
      const newProgram = {
        id: generateId(),
        title: 'New Program',
        code: '',
        type: programType,
        degree: '',
        description: '',
        duration: '',
        credits: 0,
        startDate: '',
        status: 'draft',
        lastModified: new Date(),
        version: '1.0',
        template: 'custom',
        sections: selectedSections
      };

      programsData.push(newProgram);
      addProgramToSidebar(newProgram);
      loadProgram(newProgram.id);
      closeModal();
      
      console.log('ðŸŽ¨ Created custom program with sections:', selectedSections);
      alert('Created new custom program!');
    }

    function previewProgram() {
      if (!currentProgram) {
        alert('Please select a program to preview.');
        return;
      }
      
      // Gather current form data
      const formData = gatherAllFormData();
      
      // Create preview content
      const previewContent = `
        <div style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
          <div style="text-align: center; border-bottom: 2px solid #5a5bb8; padding-bottom: 20px; margin-bottom: 30px;">
            <h1 style="color: #5a5bb8; margin: 0; font-size: 2.5em;">${formData.programTitle || 'Program Title'}</h1>
            <p style="color: #666; font-size: 1.2em; margin: 10px 0;">${formData.programCode || 'PROG-XXX'} | ${formData.programType || 'Program Type'}</p>
            <p style="color: #888; font-size: 1em;">${formData.programDegree || 'Degree Type'}</p>
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
              <h3 style="margin: 0 0 10px 0; color: #5a5bb8;">Program Details</h3>
              <p><strong>Duration:</strong> ${formData.programDuration || 'N/A'}</p>
              <p><strong>Credits:</strong> ${formData.programCredits || 'N/A'}</p>
              <p><strong>Start Date:</strong> ${formData.programStartDate || 'N/A'}</p>
              <p><strong>Format:</strong> ${formData.programFormat || 'N/A'}</p>
            </div>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
              <h3 style="margin: 0 0 10px 0; color: #5a5bb8;">Quick Facts</h3>
              <p><strong>Level:</strong> ${formData.programLevel || 'N/A'}</p>
              <p><strong>Language:</strong> ${formData.programLanguage || 'English'}</p>
              <p><strong>Status:</strong> ${currentProgram.status || 'Draft'}</p>
              <p><strong>Version:</strong> ${currentProgram.version || '1.0'}</p>
            </div>
          </div>
          
          <div style="margin-bottom: 30px;">
            <h3 style="color: #5a5bb8; border-bottom: 1px solid #ddd; padding-bottom: 10px;">Program Description</h3>
            <p style="line-height: 1.6; color: #444;">${formData.programDescription || 'No description provided.'}</p>
          </div>
          
          <div style="margin-bottom: 30px;">
            <h3 style="color: #5a5bb8; border-bottom: 1px solid #ddd; padding-bottom: 10px;">Learning Outcomes</h3>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
              ${formData.programGoals ? `<p><strong>Goals:</strong> ${formData.programGoals}</p>` : ''}
              ${formData.learningObjectives ? `<p><strong>Objectives:</strong> ${formData.learningObjectives}</p>` : ''}
              ${formData.skillsAcquired ? `<p><strong>Skills:</strong> ${formData.skillsAcquired}</p>` : ''}
            </div>
          </div>
          
          <div style="margin-bottom: 30px;">
            <h3 style="color: #5a5bb8; border-bottom: 1px solid #ddd; padding-bottom: 10px;">Admission Information</h3>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
              ${formData.admissionType ? `<p><strong>Type:</strong> ${formData.admissionType}</p>` : ''}
              ${formData.minimumGPA ? `<p><strong>Minimum GPA:</strong> ${formData.minimumGPA}</p>` : ''}
              ${formData.applicationDeadline ? `<p><strong>Application Deadline:</strong> ${formData.applicationDeadline}</p>` : ''}
            </div>
          </div>
          
          <div style="margin-bottom: 30px;">
            <h3 style="color: #5a5bb8; border-bottom: 1px solid #ddd; padding-bottom: 10px;">Tuition & Fees</h3>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
              ${formData.baseTuition ? `<p><strong>Base Tuition:</strong> $${formData.baseTuition}</p>` : ''}
              ${formData.totalProgramCost ? `<p><strong>Total Program Cost:</strong> $${formData.totalProgramCost}</p>` : ''}
              ${formData.paymentPlanOptions ? `<p><strong>Payment Plans Available:</strong> ${formData.paymentPlanOptions}</p>` : ''}
            </div>
          </div>
          
          <div style="margin-bottom: 30px;">
            <h3 style="color: #5a5bb8; border-bottom: 1px solid #ddd; padding-bottom: 10px;">Contact Information</h3>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
              ${formData.programDirector ? `<p><strong>Program Director:</strong> ${formData.programDirector}</p>` : ''}
              ${formData.directorEmail ? `<p><strong>Email:</strong> ${formData.directorEmail}</p>` : ''}
              ${formData.directorPhone ? `<p><strong>Phone:</strong> ${formData.directorPhone}</p>` : ''}
            </div>
          </div>
          
          <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd;">
            <p style="color: #888; font-size: 0.9em;">This is a preview of how your program information will appear to prospective students.</p>
          </div>
        </div>
      `;
      
      // Open preview in new window
      const previewWindow = window.open('', '_blank', 'width=900,height=700,scrollbars=yes');
      previewWindow.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Program Preview - ${formData.programTitle || 'Program'}</title>
            <meta charset="utf-8">
            <style>
              body { margin: 0; padding: 20px; background: #fff; }
              * { box-sizing: border-box; }
            </style>
          </head>
          <body>
            ${previewContent}
          </body>
        </html>
      `);
      previewWindow.document.close();
    }
    
    // Helper function to gather all form data from all tabs
    function gatherAllFormData() {
      const data = {};
      
      // Start with current program data
      if (currentProgram) {
        Object.assign(data, currentProgram);
      }
      
      // Get current tab form data
      const currentTabInputs = document.querySelectorAll('#editorContent input, #editorContent select, #editorContent textarea');
      currentTabInputs.forEach(input => {
        if (input.id && input.value) {
          data[input.id] = input.type === 'checkbox' ? input.checked : input.value;
        }
      });
      
      // Gather data from all tabs by temporarily switching and collecting
      const currentTab = document.querySelector('.editor-tab.active')?.dataset.tab;
      const allTabs = ['overview', 'outcomes', 'curriculum', 'admissions', 'tuition', 'delivery', 'faculty', 'faq', 'marketing', 'policies'];
      
      allTabs.forEach(tabName => {
        if (tabName !== currentTab) {
          // Temporarily switch to tab to load its content
          if (tabContents[tabName]) {
            const tempContainer = document.createElement('div');
            tempContainer.innerHTML = tabContents[tabName]();
            
            // Extract data from this tab's form elements
            const tabInputs = tempContainer.querySelectorAll('input, select, textarea');
            tabInputs.forEach(input => {
              if (input.id && currentProgram && currentProgram[input.id]) {
                data[input.id] = currentProgram[input.id];
              }
            });
          }
        }
      });
      
      // Ensure critical overview fields are included
      const overviewFields = ['programTitle', 'programCode', 'programType', 'programDegree', 'programDescription', 'programDuration', 'programCredits', 'programStartDate', 'programLevel', 'programLanguage', 'programFormat'];
      overviewFields.forEach(fieldId => {
        if (!data[fieldId] && currentProgram) {
          // Try different field name variations
          const variations = [
            fieldId,
            fieldId.replace('program', '').toLowerCase(),
            fieldId.charAt(0).toLowerCase() + fieldId.slice(1)
          ];
          
          for (const variation of variations) {
            if (currentProgram[variation]) {
              data[fieldId] = currentProgram[variation];
              break;
            }
          }
        }
      });
      
      console.log('ðŸ“¦ Gathered comprehensive data:', Object.keys(data).length, 'fields');
      return data;
    }
    
    // Helper function to load all form data into current tab
    function loadAllFormData() {
      if (!currentProgram) return;
      
      // Load all form fields that exist in the current tab
      const inputs = document.querySelectorAll('#editorContent input, #editorContent select, #editorContent textarea');
      inputs.forEach(input => {
        if (input.id && currentProgram[input.id]) {
          if (input.type === 'checkbox') {
            input.checked = currentProgram[input.id] === true || currentProgram[input.id] === 'true';
          } else {
            input.value = currentProgram[input.id];
          }
        }
      });
      
      console.log('ðŸ“¥ Loaded form data for current tab:', Object.keys(currentProgram).length, 'fields available');
    }

    function submitForReview() {
      if (!currentProgram) {
        alert('Please select a program to submit for review.');
        return;
      }
      
      // Check if required fields are filled
      const requiredFields = ['programTitle', 'programCode', 'programType', 'programDescription'];
      const missingFields = [];
      
      requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (!field || !field.value.trim()) {
          missingFields.push(fieldId.replace('program', '').replace(/([A-Z])/g, ' $1').trim());
        }
      });
      
      if (missingFields.length > 0) {
        alert(`Please fill in the following required fields before submitting:\n${missingFields.join(', ')}`);
        return;
      }
      
      // Show confirmation dialog
      const confirmed = confirm(`Submit "${currentProgram.title}" for review?\n\nOnce submitted, you won't be able to edit until review is complete.`);
      
      if (confirmed) {
        // Save version before status change
        saveCurrentVersion('Submitted for review');
        
        // Update program status
        currentProgram.status = 'pending-review';
        currentProgram.submittedDate = new Date().toISOString();
        currentProgram.submittedBy = 'Current User'; // In real app, get from auth
        
        // Update status display
        document.getElementById('currentStatus').textContent = 'Pending Review';
        document.getElementById('currentStatus').style.color = '#f59e0b';
        
        // Save changes
        saveProgram();
        
        // Update sidebar status badge
        updateSidebarStatus(currentProgram.id, 'pending-review', 'Pending Review');
        
        alert('Program submitted for review successfully!\n\nYou will receive a notification when the review is complete.');
        console.log('ðŸ“ Program submitted for review:', currentProgram);
      }
    }

    function publishProgram() {
      if (!currentProgram) {
        alert('Please select a program to publish.');
        return;
      }
      
      if (currentProgram.status !== 'approved') {
        alert('Program must be approved before it can be published.\n\nCurrent status: ' + (currentProgram.status || 'draft'));
        return;
      }
      
      // Show confirmation dialog
      const confirmed = confirm(`Publish "${currentProgram.title}"?\n\nThis will make the program visible to prospective students and allow applications.`);
      
      if (confirmed) {
        // Save version before publishing
        saveCurrentVersion('Published program');
        
        // Update program status
        currentProgram.status = 'published';
        currentProgram.publishedDate = new Date().toISOString();
        currentProgram.publishedBy = 'Current User';
        
        // Update status display
        document.getElementById('currentStatus').textContent = 'Published';
        document.getElementById('currentStatus').style.color = '#10b981';
        
        // Save changes
        saveProgram();
        
        // Update sidebar status badge
        updateSidebarStatus(currentProgram.id, 'published', 'Published');
        
        alert('Program published successfully!\n\nThe program is now live and accepting applications.');
        console.log('ðŸš€ Program published:', currentProgram);
      }
    }

    function duplicateProgram() {
      if (!currentProgram) {
        alert('Please select a program to duplicate.');
        return;
      }
      
      // Get new program name
      const newTitle = prompt(`Enter title for duplicated program:`, `${currentProgram.title} (Copy)`);
      
      if (!newTitle || newTitle.trim() === '') {
        return;
      }
      
      // Get new program code
      const newCode = prompt(`Enter program code for duplicated program:`, `${currentProgram.code || 'PROG'}-COPY`);
      
      if (!newCode || newCode.trim() === '') {
        return;
      }
      
      // Gather all current form data to include in the duplicate
      const currentFormData = gatherAllFormData();
      
      // Create duplicate program with all current data
      const duplicatedProgram = {
        // Copy all base program data
        ...currentProgram,
        // Copy all form data
        ...currentFormData,
        // Override with new unique identifiers
        id: 'prog_' + Date.now(),
        title: newTitle.trim(),
        code: newCode.trim().toUpperCase(),
        programTitle: newTitle.trim(),
        programCode: newCode.trim().toUpperCase(),
        status: 'draft',
        version: '1.0',
        createdDate: new Date().toISOString(),
        lastModified: new Date().toISOString(),
        createdBy: 'Current User',
        submittedDate: null,
        publishedDate: null,
        approvedDate: null
      };
      
      // Add to programs data
      programsData.push(duplicatedProgram);
      
      // Add to sidebar
      addProgramToSidebar(duplicatedProgram);
      
      // Select the new program
      selectProgram(duplicatedProgram.id);
      
      alert(`Program duplicated successfully!\n\nNew program: "${newTitle}" (${newCode})\n\nAll form data has been copied to the new program.`);
      console.log('ðŸ“‹ Program duplicated with data:', duplicatedProgram);
    }

    function exportProgram() {
      if (!currentProgram) {
        alert('Please select a program to export.');
        return;
      }
      
      // Gather all current form data
      const formData = gatherAllFormData();
      
      // Create comprehensive export data
      const exportData = {
        programInfo: {
          ...currentProgram,
          ...formData
        },
        exportDate: new Date().toISOString(),
        exportedBy: 'Current User',
        version: currentProgram.version || '1.0'
      };
      
      // Ask user for export format
      const format = prompt('Choose export format:\n1. JSON (for backup/import)\n2. PDF (print-ready HTML)\n3. PDF (direct download - requires library)\n4. CSV (for spreadsheet)\n\nEnter 1, 2, 3, or 4:', '1');
      
      switch(format) {
        case '1':
          exportAsJSON(exportData);
          break;
        case '2':
          exportAsPDF(exportData);
          break;
        case '3':
          exportAsDirectPDF(exportData);
          break;
        case '4':
          exportAsCSV(exportData);
          break;
        default:
          exportAsJSON(exportData); // Default to JSON
      }
    }
    
    function exportAsJSON(data) {
      const jsonString = JSON.stringify(data, null, 2);
      const blob = new Blob([jsonString], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${data.programInfo.code || 'program'}_${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      alert('Program exported as JSON file successfully!');
    }
    
    function exportAsPDF(data) {
      try {
        // Create printable HTML version
        const printContent = `
          <!DOCTYPE html>
          <html>
            <head>
              <title>Program Export - ${data.programInfo.programTitle || data.programInfo.title || 'Program'}</title>
              <meta charset="utf-8">
              <style>
                body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; color: #333; }
                h1 { color: #5a5bb8; border-bottom: 2px solid #5a5bb8; padding-bottom: 10px; margin-bottom: 20px; }
                h2 { color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-top: 30px; margin-bottom: 15px; }
                .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
                .info-box { background: #f8f9fa; padding: 15px; border-radius: 5px; border: 1px solid #e9ecef; }
                .field { margin: 8px 0; }
                .label { font-weight: bold; color: #555; }
                .section { margin-bottom: 25px; }
                @media print {
                  body { margin: 20px; }
                  .info-grid { grid-template-columns: 1fr; gap: 10px; }
                }
              </style>
            </head>
            <body>
              <div class="section">
                <h1>${data.programInfo.programTitle || data.programInfo.title || 'Program Export'}</h1>
                <p><strong>Program Code:</strong> ${data.programInfo.programCode || data.programInfo.code || 'N/A'}</p>
                <p><strong>Export Date:</strong> ${new Date(data.exportDate).toLocaleDateString()}</p>
                <p><strong>Status:</strong> ${data.programInfo.status || 'Draft'}</p>
                <p><strong>Version:</strong> ${data.programInfo.version || '1.0'}</p>
              </div>
              
              <div class="section">
                <h2>Program Details</h2>
                <div class="info-grid">
                  <div class="info-box">
                    <div class="field"><span class="label">Type:</span> ${data.programInfo.programType || 'N/A'}</div>
                    <div class="field"><span class="label">Degree:</span> ${data.programInfo.programDegree || 'N/A'}</div>
                    <div class="field"><span class="label">Duration:</span> ${data.programInfo.programDuration || 'N/A'}</div>
                    <div class="field"><span class="label">Credits:</span> ${data.programInfo.programCredits || 'N/A'}</div>
                  </div>
                  <div class="info-box">
                    <div class="field"><span class="label">Level:</span> ${data.programInfo.programLevel || 'N/A'}</div>
                    <div class="field"><span class="label">Format:</span> ${data.programInfo.programFormat || 'N/A'}</div>
                    <div class="field"><span class="label">Language:</span> ${data.programInfo.programLanguage || 'English'}</div>
                    <div class="field"><span class="label">Start Date:</span> ${data.programInfo.programStartDate || 'N/A'}</div>
                  </div>
                </div>
              </div>
              
              <div class="section">
                <h2>Description</h2>
                <p>${data.programInfo.programDescription || 'No description provided.'}</p>
              </div>
              
              ${data.programInfo.programGoals ? `
              <div class="section">
                <h2>Program Goals</h2>
                <p>${data.programInfo.programGoals}</p>
              </div>
              ` : ''}
              
              ${data.programInfo.admissionType ? `
              <div class="section">
                <h2>Admission Information</h2>
                <div class="info-box">
                  <div class="field"><span class="label">Admission Type:</span> ${data.programInfo.admissionType}</div>
                  ${data.programInfo.minimumGPA ? `<div class="field"><span class="label">Minimum GPA:</span> ${data.programInfo.minimumGPA}</div>` : ''}
                  ${data.programInfo.applicationDeadline ? `<div class="field"><span class="label">Application Deadline:</span> ${data.programInfo.applicationDeadline}</div>` : ''}
                </div>
              </div>
              ` : ''}
              
              ${data.programInfo.baseTuition ? `
              <div class="section">
                <h2>Tuition & Costs</h2>
                <div class="info-box">
                  <div class="field"><span class="label">Base Tuition:</span> $${data.programInfo.baseTuition}</div>
                  ${data.programInfo.totalProgramCost ? `<div class="field"><span class="label">Total Program Cost:</span> $${data.programInfo.totalProgramCost}</div>` : ''}
                </div>
              </div>
              ` : ''}
              
              <div class="section">
                <h2>Contact Information</h2>
                <div class="info-box">
                  <div class="field"><span class="label">Program Director:</span> ${data.programInfo.programDirector || 'N/A'}</div>
                  <div class="field"><span class="label">Email:</span> ${data.programInfo.directorEmail || 'N/A'}</div>
                  <div class="field"><span class="label">Phone:</span> ${data.programInfo.directorPhone || 'N/A'}</div>
                </div>
              </div>
              
              <p style="margin-top: 40px; font-size: 12px; color: #666; text-align: center; border-top: 1px solid #ddd; padding-top: 20px;">
                Generated by Institution Program Editor on ${new Date().toLocaleDateString()}
              </p>
            </body>
          </html>
        `;
        
        // Try to open new window
        const printWindow = window.open('', '_blank', 'width=800,height=600,scrollbars=yes,resizable=yes');
        
        if (!printWindow) {
          // Popup blocked, offer alternative
          const userChoice = confirm('Popup blocked! Would you like to download the PDF content as an HTML file instead?');
          if (userChoice) {
            // Download as HTML file
            const blob = new Blob([printContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${data.programInfo.programCode || 'program'}_${new Date().toISOString().split('T')[0]}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert('Program exported as HTML file. You can open it and print to PDF.');
          }
          return;
        }
        
        printWindow.document.write(printContent);
        printWindow.document.close();
        printWindow.focus();
        
        // Wait for content to load, then trigger print
        setTimeout(() => {
          try {
            printWindow.print();
            alert('PDF export opened in new window. Use Ctrl+P or your browser\'s print function to save as PDF.');
          } catch (e) {
            console.error('Print error:', e);
            alert('Print dialog may not have opened automatically. Please use Ctrl+P in the new window to print.');
          }
        }, 500);
        
      } catch (error) {
        console.error('PDF export error:', error);
        alert('PDF export failed. Please try again or use JSON export as an alternative.');
      }
    }
    
    function exportAsDirectPDF(data) {
      try {
        let jsPDF;
        
        // Check if jsPDF is available - try multiple ways it might be exposed
        if (window.jspdf && window.jspdf.jsPDF) {
          jsPDF = window.jspdf.jsPDF;
        } else if (window.jsPDF) {
          jsPDF = window.jsPDF;
        } else {
          alert('PDF library not loaded. Please refresh the page and try again, or use option 2 (print-ready HTML) instead.');
          return;
        }
        const doc = new jsPDF();
        
        // Set font
        doc.setFont('helvetica', 'normal');
        
        // Title
        doc.setFontSize(20);
        doc.setTextColor(90, 91, 184); // #5a5bb8
        doc.text(data.programInfo.programTitle || data.programInfo.title || 'Program Export', 20, 30);
        
        // Program details
        let yPos = 50;
        doc.setFontSize(12);
        doc.setTextColor(0, 0, 0);
        
        const details = [
          `Program Code: ${data.programInfo.programCode || data.programInfo.code || 'N/A'}`,
          `Type: ${data.programInfo.programType || 'N/A'}`,
          `Degree: ${data.programInfo.programDegree || 'N/A'}`,
          `Duration: ${data.programInfo.programDuration || 'N/A'}`,
          `Credits: ${data.programInfo.programCredits || 'N/A'}`,
          `Level: ${data.programInfo.programLevel || 'N/A'}`,
          `Format: ${data.programInfo.programFormat || 'N/A'}`,
          `Language: ${data.programInfo.programLanguage || 'English'}`,
          `Start Date: ${data.programInfo.programStartDate || 'N/A'}`,
          `Status: ${data.programInfo.status || 'Draft'}`,
          `Version: ${data.programInfo.version || '1.0'}`,
          `Export Date: ${new Date(data.exportDate).toLocaleDateString()}`
        ];
        
        details.forEach(detail => {
          doc.text(detail, 20, yPos);
          yPos += 8;
        });
        
        // Description section
        yPos += 10;
        doc.setFontSize(14);
        doc.setTextColor(90, 91, 184);
        doc.text('Description', 20, yPos);
        yPos += 10;
        
        doc.setFontSize(11);
        doc.setTextColor(0, 0, 0);
        const description = data.programInfo.programDescription || 'No description provided.';
        const splitDescription = doc.splitTextToSize(description, 170);
        doc.text(splitDescription, 20, yPos);
        yPos += splitDescription.length * 6 + 10;
        
        // Add additional sections if data exists
        if (data.programInfo.programGoals) {
          doc.setFontSize(14);
          doc.setTextColor(90, 91, 184);
          doc.text('Program Goals', 20, yPos);
          yPos += 10;
          
          doc.setFontSize(11);
          doc.setTextColor(0, 0, 0);
          const goals = doc.splitTextToSize(data.programInfo.programGoals, 170);
          doc.text(goals, 20, yPos);
          yPos += goals.length * 6 + 10;
        }
        
        // Contact Information
        if (data.programInfo.programDirector || data.programInfo.directorEmail) {
          // Check if we need a new page
          if (yPos > 250) {
            doc.addPage();
            yPos = 30;
          }
          
          doc.setFontSize(14);
          doc.setTextColor(90, 91, 184);
          doc.text('Contact Information', 20, yPos);
          yPos += 10;
          
          doc.setFontSize(11);
          doc.setTextColor(0, 0, 0);
          
          if (data.programInfo.programDirector) {
            doc.text(`Program Director: ${data.programInfo.programDirector}`, 20, yPos);
            yPos += 8;
          }
          if (data.programInfo.directorEmail) {
            doc.text(`Email: ${data.programInfo.directorEmail}`, 20, yPos);
            yPos += 8;
          }
          if (data.programInfo.directorPhone) {
            doc.text(`Phone: ${data.programInfo.directorPhone}`, 20, yPos);
            yPos += 8;
          }
        }
        
        // Footer
        const pageCount = doc.internal.getNumberOfPages();
        for (let i = 1; i <= pageCount; i++) {
          doc.setPage(i);
          doc.setFontSize(8);
          doc.setTextColor(128, 128, 128);
          doc.text('Generated by Institution Program Editor', 20, 280);
          doc.text(`Page ${i} of ${pageCount}`, 180, 280);
        }
        
        // Save the PDF
        const filename = `${(data.programInfo.programCode || data.programInfo.code || 'program').replace(/[^a-zA-Z0-9]/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
        doc.save(filename);
        
        alert(`PDF generated successfully!\n\nFile: ${filename}\n\nThe PDF will download automatically.`);
        console.log('ðŸ“„ Direct PDF export successful:', { filename });
        
      } catch (error) {
        console.error('Direct PDF export error:', error);
        alert('Direct PDF export failed: ' + error.message + '\n\nPlease try option 2 (print-ready HTML) instead.');
      }
    }
    
    function exportAsCSV(data) {
      try {
        // Create structured CSV data with organized sections
        const csvData = [
          ['Section', 'Field', 'Value'],
          ['', '', ''], // Empty row for spacing
          
          // PROGRAM INFORMATION SECTION
          ['PROGRAM INFORMATION', '', ''],
          ['Program Information', 'Program Title', data.programInfo.programTitle || data.programInfo.title || ''],
          ['Program Information', 'Program Code', data.programInfo.programCode || data.programInfo.code || ''],
          ['Program Information', 'Program Type', data.programInfo.programType || ''],
          ['Program Information', 'Degree Type', data.programInfo.programDegree || ''],
          ['Program Information', 'Duration', data.programInfo.programDuration || ''],
          ['Program Information', 'Credits', data.programInfo.programCredits || ''],
          ['Program Information', 'Level', data.programInfo.programLevel || ''],
          ['Program Information', 'Format', data.programInfo.programFormat || ''],
          ['Program Information', 'Language', data.programInfo.programLanguage || ''],
          ['Program Information', 'Start Date', data.programInfo.programStartDate || ''],
          ['Program Information', 'Description', data.programInfo.programDescription || ''],
          ['', '', ''], // Empty row for spacing
          
          // LEARNING OUTCOMES SECTION
          ['LEARNING OUTCOMES', '', ''],
          ['Learning Outcomes', 'Program Goals', data.programInfo.programGoals || ''],
          ['Learning Outcomes', 'Learning Objectives', data.programInfo.learningObjectives || ''],
          ['Learning Outcomes', 'Skills Acquired', data.programInfo.skillsAcquired || ''],
          ['', '', ''], // Empty row for spacing
          
          // ADMISSIONS SECTION
          ['ADMISSIONS', '', ''],
          ['Admissions', 'Admission Type', data.programInfo.admissionType || ''],
          ['Admissions', 'Minimum GPA', data.programInfo.minimumGPA || ''],
          ['Admissions', 'Application Deadline', data.programInfo.applicationDeadline || ''],
          ['', '', ''], // Empty row for spacing
          
          // TUITION & FEES SECTION
          ['TUITION & FEES', '', ''],
          ['Tuition & Fees', 'Base Tuition', data.programInfo.baseTuition || ''],
          ['Tuition & Fees', 'Total Program Cost', data.programInfo.totalProgramCost || ''],
          ['Tuition & Fees', 'Payment Plan Options', data.programInfo.paymentPlanOptions || ''],
          ['', '', ''], // Empty row for spacing
          
          // DELIVERY & LOCATION SECTION
          ['DELIVERY & LOCATION', '', ''],
          ['Delivery & Location', 'Delivery Method', data.programInfo.deliveryMethod || ''],
          ['Delivery & Location', 'Primary Location', data.programInfo.primaryLocation || ''],
          ['Delivery & Location', 'Facility Type', data.programInfo.facilityType || ''],
          ['', '', ''], // Empty row for spacing
          
          // FACULTY & CONTACTS SECTION
          ['FACULTY & CONTACTS', '', ''],
          ['Faculty & Contacts', 'Program Director', data.programInfo.programDirector || ''],
          ['Faculty & Contacts', 'Director Email', data.programInfo.directorEmail || ''],
          ['Faculty & Contacts', 'Director Phone', data.programInfo.directorPhone || ''],
          ['Faculty & Contacts', 'Department Name', data.programInfo.departmentName || ''],
          ['Faculty & Contacts', 'Department Email', data.programInfo.departmentEmail || ''],
          ['Faculty & Contacts', 'Department Phone', data.programInfo.departmentPhone || ''],
          ['', '', ''], // Empty row for spacing
          
          // METADATA SECTION
          ['METADATA', '', ''],
          ['Metadata', 'Status', data.programInfo.status || ''],
          ['Metadata', 'Version', data.programInfo.version || ''],
          ['Metadata', 'Export Date', data.exportDate]
        ];
        
        // Convert to CSV format with proper escaping
        const csvContent = csvData.map(row => 
          row.map(field => {
            // Convert to string and escape quotes
            const str = String(field || '');
            // If field contains comma, quote, or newline, wrap in quotes and escape quotes
            if (str.includes(',') || str.includes('"') || str.includes('\n')) {
              return `"${str.replace(/"/g, '""')}"`;
            }
            return str;
          }).join(',')
        ).join('\n');
        
        // Create and download the file
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        
        // Set download attributes
        a.href = url;
        a.download = `${(data.programInfo.programCode || data.programInfo.code || 'program').replace(/[^a-zA-Z0-9]/g, '_')}_${new Date().toISOString().split('T')[0]}.csv`;
        a.style.display = 'none';
        
        // Trigger download
        document.body.appendChild(a);
        a.click();
        
        // Cleanup
        setTimeout(() => {
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }, 100);
        
        alert(`Program exported as CSV file successfully!\n\nFile: ${a.download}\nRows: ${csvData.length}`);
        console.log('ðŸ“Š CSV export successful:', { rows: csvData.length, filename: a.download });
        
      } catch (error) {
        console.error('CSV export error:', error);
        alert('CSV export failed: ' + error.message + '\n\nPlease try again or use JSON export as an alternative.');
      }
    }

    // Version management system
    let programVersions = {}; // Store versions for each program
    
    function saveCurrentVersion(changeDescription = 'Auto-save') {
      if (!currentProgram) return;
      
      // Initialize version history for this program if not exists
      if (!programVersions[currentProgram.id]) {
        programVersions[currentProgram.id] = [];
      }
      
      // Gather all current form data
      const currentData = gatherAllFormData();
      
      // Create version snapshot
      const versionSnapshot = {
        version: currentProgram.version || '1.0',
        date: new Date().toISOString(),
        author: 'Current User',
        status: currentProgram.status || 'draft',
        changes: changeDescription,
        data: { ...currentData }, // Full data snapshot
        isCurrent: false
      };
      
      // Add to version history
      programVersions[currentProgram.id].unshift(versionSnapshot);
      
      // Keep only last 10 versions
      if (programVersions[currentProgram.id].length > 10) {
        programVersions[currentProgram.id] = programVersions[currentProgram.id].slice(0, 10);
      }
      
      console.log('ðŸ’¾ Saved version:', versionSnapshot.version, 'for program:', currentProgram.id);
    }
    
    function showVersionHistory() {
      if (!currentProgram) {
        alert('Please select a program to view version history.');
        return;
      }
      
      // Get or create version history for this program
      const versionHistory = programVersions[currentProgram.id] || [];
      
      // Add current version at the top
      const currentData = gatherAllFormData();
      const currentVersion = {
        version: currentProgram.version || '1.0',
        date: currentProgram.lastModified || new Date().toISOString(),
        author: 'Current User',
        status: currentProgram.status || 'draft',
        changes: 'Current version - ' + Object.keys(currentData).length + ' fields configured',
        data: currentData,
        isCurrent: true
      };
      
      const allVersions = [currentVersion, ...versionHistory];
      
      // Create version history modal content
      const historyContent = `
        <div style="max-width: 600px; max-height: 500px; overflow-y: auto;">
          <h3 style="margin-top: 0; color: #5a5bb8; border-bottom: 2px solid #5a5bb8; padding-bottom: 10px;">
            ðŸ“‹ Version History - ${currentProgram.title}
          </h3>
          
          <div style="margin-bottom: 20px;">
            ${allVersions.map(version => `
              <div style="
                background: ${version.isCurrent ? '#f0f9ff' : '#f8f9fa'};
                border: ${version.isCurrent ? '2px solid #5a5bb8' : '1px solid #e5e7eb'};
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 10px;
                position: relative;
              ">
                ${version.isCurrent ? '<div style="position: absolute; top: 10px; right: 10px; background: #5a5bb8; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">CURRENT</div>' : ''}
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                  <h4 style="margin: 0; color: #333;">Version ${version.version}</h4>
                  <span style="color: #666; font-size: 14px;">${new Date(version.date).toLocaleDateString()} ${new Date(version.date).toLocaleTimeString()}</span>
                </div>
                
                <div style="margin-bottom: 8px;">
                  <span style="color: #555;"><strong>Author:</strong> ${version.author}</span>
                  <span style="margin-left: 20px; color: #555;"><strong>Status:</strong> 
                    <span style="
                      background: ${version.status === 'published' ? '#10b981' : version.status === 'approved' ? '#3b82f6' : version.status === 'pending-review' ? '#f59e0b' : '#6b7280'};
                      color: white;
                      padding: 2px 6px;
                      border-radius: 4px;
                      font-size: 12px;
                    ">${version.status}</span>
                  </span>
                </div>
                
                <p style="margin: 0; color: #444; font-style: italic;">${version.changes}</p>
                
                ${!version.isCurrent ? `
                  <div style="margin-top: 10px;">
                    <button onclick="restoreVersion('${version.version}')" style="
                      background: #5a5bb8;
                      color: white;
                      border: none;
                      padding: 6px 12px;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 12px;
                    ">Restore This Version</button>
                  </div>
                ` : ''}
              </div>
            `).join('')}
          </div>
          
          <div style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px solid #e5e7eb;">
            <button onclick="closeModal()" style="
              background: #6b7280;
              color: white;
              border: none;
              padding: 8px 16px;
              border-radius: 4px;
              cursor: pointer;
            ">Close</button>
          </div>
        </div>
      `;
      
      // Show in modal
      showModal('Version History', historyContent);
    }
    
    function restoreVersion(version) {
      const confirmed = confirm(`Restore to version ${version}?\n\nThis will restore all form data from that version and create a new version. Your current changes will be preserved as a backup.`);
      
      if (confirmed) {
        // Save current version as backup first
        saveCurrentVersion('Backup before restore to v' + version);
        
        // Find the version data to restore
        const versionHistory = programVersions[currentProgram.id] || [];
        const versionToRestore = versionHistory.find(v => v.version === version);
        
        if (versionToRestore && versionToRestore.data) {
          // Create new version number
          const oldVersion = currentProgram.version;
          const newVersion = (parseFloat(currentProgram.version || '1.0') + 0.1).toFixed(1);
          
          // Restore all data from the selected version
          Object.assign(currentProgram, versionToRestore.data, {
            version: newVersion,
            lastModified: new Date().toISOString(),
            restoredFrom: version,
            restoredDate: new Date().toISOString()
          });
          
          // Update version display
          document.getElementById('currentVersion').textContent = newVersion;
          updateLastSavedTime(new Date(currentProgram.lastModified));
          
          // Reload current tab with restored data
          const currentTab = document.querySelector('.editor-tab.active')?.dataset.tab || 'overview';
          switchTab(currentTab);
          
          // Save the restored program
          saveProgram();
          closeModal();
          
          alert(`Successfully restored to version ${version}!\n\nNew version: ${newVersion}\nAll form data has been restored from version ${version}\nPrevious version (${oldVersion}) has been backed up.`);
          console.log('ðŸ”„ Version restored with data:', { 
            from: version, 
            to: newVersion, 
            fieldsRestored: Object.keys(versionToRestore.data).length 
          });
        } else {
          alert('Version data not found. Cannot restore version ' + version);
        }
      }
    }

    // Modal system
    function createModal(title, content) {
      return `
        <div class="modal-overlay" onclick="closeModal()" style="
          position: fixed; 
          top: 0; 
          left: 0; 
          right: 0; 
          bottom: 0; 
          background: rgba(0, 0, 0, 0.5); 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          z-index: 2000;
        ">
          <div class="modal-content" onclick="event.stopPropagation()" style="
            background: #ffffff; 
            border-radius: 12px; 
            max-width: 600px; 
            max-height: 80vh; 
            overflow-y: auto; 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
          ">
            <div style="padding: 24px 24px 0 24px; border-bottom: 1px solid #e5e7eb;">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2 style="margin: 0; font-size: 1.5rem; font-weight: 700; color: #111827;">${title}</h2>
                <button onclick="closeModal()" style="
                  background: none; 
                  border: none; 
                  font-size: 24px; 
                  cursor: pointer; 
                  color: #6b7280; 
                  padding: 4px;
                ">&times;</button>
              </div>
            </div>
            ${content}
          </div>
        </div>
      `;
    }

    function showModal(modalHtml) {
      const existingModal = document.querySelector('.modal-overlay');
      if (existingModal) {
        existingModal.remove();
      }
      
      document.body.insertAdjacentHTML('beforeend', modalHtml);
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      const modal = document.querySelector('.modal-overlay');
      if (modal) {
        modal.remove();
      }
      document.body.style.overflow = '';
    }

    // Utility functions
    function generateId() {
      return 'prog_' + Math.random().toString(36).substr(2, 9);
    }

    function addProgramToSidebar(program) {
      const programsList = document.querySelector('.programs-list');
      const newProgramBtn = programsList.querySelector('.new-program-btn');
      
      const statusClass = program.status || 'draft';
      const statusText = program.status ? program.status.charAt(0).toUpperCase() + program.status.slice(1) : 'Draft';
      
      const programHtml = `
        <div class="program-item" data-program-id="${program.id}" onclick="loadProgram('${program.id}')">
          <div class="program-header">
            <h4 class="program-title">${program.title}</h4>
            <span class="status-badge ${statusClass}">${statusText}</span>
          </div>
          <div class="program-meta">
            ${program.type ? program.type.charAt(0).toUpperCase() + program.type.slice(1) : 'Program'} â€¢ ${program.credits || 0} credits<br>
            Created just now
          </div>
        </div>
      `;
      
      newProgramBtn.insertAdjacentHTML('afterend', programHtml);
    }
    
    function updateSidebarStatus(programId, newStatus, displayText) {
      // Find the program item in sidebar
      const programItem = document.querySelector(`[data-program-id="${programId}"]`);
      if (programItem) {
        const statusBadge = programItem.querySelector('.status-badge');
        if (statusBadge) {
          // Remove old status classes
          statusBadge.className = 'status-badge';
          
          // Add new status class
          const statusClass = newStatus.replace(/-/g, '-'); // keep pending-review as is
          statusBadge.classList.add(statusClass);
          statusBadge.textContent = displayText;
          
          console.log('ðŸ”„ Updated sidebar status:', { programId, newStatus, displayText });
        }
      }
    }

    // Utility: Debounce function
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
  </script>
</body>
</html>