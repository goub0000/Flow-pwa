<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n-title="page.counselors.title">Flow | Counselor Dashboard</title>
  <meta name="description" content="Support and guide students through their applications ‚Äî manage tasks, message students, and view cohort analytics." />
  <link rel="icon" href="/assets/img/logo.png" type="image/png" />
  <link rel="apple-touch-icon" href="/assets/img/logo.png" />
  <!-- Base & counselor styles -->
  <link rel="stylesheet" href="/assets/css/base.css" />
  <link rel="stylesheet" href="/assets/css/counselors.css" />
  
  <style>
    /* Student Dashboard Styling Variables */
    :root{
      --flow-bg: #0a0b1e;
      --flow-bg-secondary: #0f1429;
      --flow-bg-tertiary: #1a1f3a;
      --flow-card: rgba(255,255,255,0.85);
      --flow-card-dark: rgba(18, 19, 46, 0.85);
      --flow-card-hover: rgba(255,255,255,0.95);
      --flow-fg: #0d0e23;
      --flow-fg-light: #1e293b;
      --flow-muted: #64748b;
      --flow-muted-light: #94a3b8;
      --flow-line: rgba(148, 163, 184, 0.15);
      --flow-line-strong: rgba(148, 163, 184, 0.25);
      --flow-primary: #4338ca;
      --flow-primary-2: #6366f1;
      --flow-primary-3: #8b5cf6;
      --flow-accent: #a855f7;
      --flow-accent-2: #c084fc;
      --flow-success: #059669;
      --flow-success-2: #10b981;
      --flow-warning: #d97706;
      --flow-warning-2: #f59e0b;
      --flow-danger: #dc2626;
      --flow-danger-2: #ef4444;
      --flow-radius: 20px;
      --flow-radius-sm: 12px;
      --flow-radius-lg: 28px;
      --flow-radius-xl: 36px;
      --flow-shadow: 0 10px 35px rgba(99, 102, 241, .08), 0 3px 15px rgba(99, 102, 241, .04);
      --flow-shadow-strong: 0 25px 60px rgba(99, 102, 241, .15), 0 8px 25px rgba(99, 102, 241, .08);
      --flow-shadow-glow: 0 0 40px rgba(99, 102, 241, .3);
      --flow-blur: saturate(140%) blur(12px);
      --flow-blur-light: saturate(120%) blur(8px);
      --flow-transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      --flow-transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      
      /* Advanced gradients */
      --flow-gradient-primary: linear-gradient(135deg, var(--flow-primary) 0%, var(--flow-primary-2) 50%, var(--flow-primary-3) 100%);
      --flow-gradient-accent: linear-gradient(135deg, var(--flow-accent) 0%, var(--flow-accent-2) 100%);
      --flow-gradient-success: linear-gradient(135deg, var(--flow-success) 0%, var(--flow-success-2) 100%);
    }

    /* Body and Background */
    body {
      background: var(--flow-bg);
      color: #e2e8f0;
      position: relative;
      overflow-x: hidden;
    }
    
    /* Futuristic background animation */
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: linear-gradient(135deg, #0a0b1e 0%, #0f1429 50%, #1a1f3a 100%);
    }
    
    .bg-animation canvas {
      width: 100%;
      height: 100%;
    }
    
    /* Header with Glass Effect */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10, 11, 30, 0.9);
      backdrop-filter: var(--flow-blur);
      border-bottom: 1px solid var(--flow-line);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    /* Logo Animation */
    .brand__logo {
      border-radius: 50%;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      animation: logoPulse 3s ease-in-out infinite;
    }

    .brand__logo:hover {
      transform: scale(1.05) rotate(5deg);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
      animation-duration: 1.5s;
    }

    @keyframes logoPulse {
      0%, 100% { 
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        filter: brightness(1);
      }
      50% { 
        box-shadow: 0 8px 30px rgba(139, 92, 246, 0.4);
        filter: brightness(1.1);
      }
    }
    
    .brand__name {
      background: var(--flow-gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    /* Main Content */
    #main {
      min-height: calc(100vh - 200px);
      padding: 2rem 0;
      position: relative;
      z-index: 1;
    }
    
    /* Cards with Glass Effect */
    .card {
      background: var(--flow-card) !important;
      backdrop-filter: var(--flow-blur) !important;
      border-radius: var(--flow-radius) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      box-shadow: var(--flow-shadow) !important;
      transition: var(--flow-transition) !important;
      color: var(--flow-fg) !important;
    }
    
    .card:hover {
      background: var(--flow-card-hover) !important;
      transform: translateY(-2px) !important;
      box-shadow: var(--flow-shadow-strong) !important;
    }
    
    /* Dashboard Stats Enhancement */
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
      padding: 0 var(--container-padding, 1rem);
    }
    
    .stat-card {
      background: var(--flow-card);
      backdrop-filter: var(--flow-blur);
      border-radius: var(--flow-radius-lg);
      padding: 2rem;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: var(--flow-shadow);
      transition: var(--flow-transition);
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--flow-gradient-primary);
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--flow-shadow-strong);
    }
    
    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      background: var(--flow-gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: block;
      margin-bottom: 0.5rem;
    }
    
    .stat-label {
      color: var(--flow-muted);
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 600;
    }
    
    .stat-trend {
      margin-top: 0.5rem;
      font-size: 0.875rem;
      font-weight: 600;
    }
    
    .stat-trend.up {
      color: var(--flow-success-2);
    }
    
    .stat-trend.down {
      color: var(--flow-warning-2);
    }
    
    /* Footer with Dark Glass */
    .footer {
      margin-top: auto;
      background: var(--flow-bg-secondary);
      backdrop-filter: var(--flow-blur);
      border-top: 1px solid var(--flow-line);
      color: white;
    }
    
    .footer__brand,
    .footer__nav,
    .footer__cta {
      margin-bottom: 2rem;
    }
    
    .footer__title {
      color: #f1f5f9 !important;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .footer__tagline {
      color: #cbd5e1 !important;
    }
    
    .footer__meta {
      background: rgba(0, 0, 0, 0.3);
      border-top: 1px solid var(--flow-line);
      color: #cbd5e1;
    }
    
    /* Advanced SVG styles */
    .advanced-svg-link {
      display: flex !important;
      align-items: center !important;
      gap: 12px !important;
      transition: all 0.3s ease !important;
      padding: 12px !important;
      border-radius: 8px !important;
      color: #e2e8f0 !important;
      text-decoration: none !important;
    }
    
    .advanced-svg-link:hover {
      background: rgba(255, 255, 255, 0.1) !important;
      transform: translateX(6px) !important;
      color: white !important;
    }
    
    .svg-icon {
      width: 24px !important;
      height: 24px !important;
      flex-shrink: 0 !important;
    }
    
    .footer__cta .btn--primary {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
      border: none !important;
      padding: 12px 24px !important;
      border-radius: 8px !important;
      font-weight: 600 !important;
      transition: all 0.3s ease !important;
      display: inline-flex !important;
      align-items: center !important;
      gap: 8px !important;
    }
    
    .footer__cta .btn--primary:hover {
      transform: translateY(-2px) !important;
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4) !important;
    }
    
    /* Enhanced Subnav Styling */
    .subnav {
      background: linear-gradient(135deg, #4338ca 0%, #6366f1 50%, #f59e0b 100%) !important;
      border-bottom: 2px solid rgba(255, 255, 255, 0.1) !important;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
      padding: 1rem 0 !important;
    }
    
    .subnav-nav {
      display: flex !important;
      gap: 0.75rem !important;
      align-items: center !important;
      flex-wrap: wrap !important;
    }
    
    .subnav .badge {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05)) !important;
      color: #e2e8f0 !important;
      padding: 0.75rem 1.25rem !important;
      border-radius: 25px !important;
      text-decoration: none !important;
      font-weight: 600 !important;
      font-size: 0.875rem !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      backdrop-filter: blur(10px) !important;
      transition: all 0.3s ease !important;
      display: flex !important;
      align-items: center !important;
      gap: 0.5rem !important;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
    }
    
    .subnav .badge:hover {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(29, 78, 216, 0.8)) !important;
      color: white !important;
      transform: translateY(-2px) scale(1.05) !important;
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4) !important;
      border-color: rgba(59, 130, 246, 0.5) !important;
    }
    
    .subnav .badge.active {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
      color: white !important;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4) !important;
      border-color: #3b82f6 !important;
    }
    
    .subnav .badge.active:hover {
      transform: translateY(-2px) scale(1.05) !important;
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6) !important;
    }
    
    /* Floating Settings Button */
    .floating-settings {
      position: fixed !important;
      right: 2rem !important;
      bottom: 2rem !important;
      z-index: 1000 !important;
      background: linear-gradient(135deg, #8b5cf6, #a855f7) !important;
      color: white !important;
      border: none !important;
      border-radius: 50% !important;
      width: 60px !important;
      height: 60px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      cursor: pointer !important;
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4) !important;
      transition: all 0.3s ease !important;
      font-size: 1.5rem !important;
    }
    
    .floating-settings:hover {
      transform: translateY(-3px) rotate(90deg) !important;
      box-shadow: 0 12px 35px rgba(139, 92, 246, 0.6) !important;
      background: linear-gradient(135deg, #a855f7, #c084fc) !important;
    }
    
    .floating-settings:active {
      transform: translateY(-1px) rotate(90deg) scale(0.95) !important;
    }
  </style>
</head>
<body data-user-id="u-counselor-001">
  <!-- Futuristic background -->
  <div class="bg-animation" aria-hidden="true">
    <canvas id="particleCanvas"></canvas>
  </div>
  
  <!-- Skip Link -->
  <a href="#main" class="skip-link">Skip to content</a>
  <!-- Header -->
  <header class="header" role="banner" aria-label="Site header">
    <div class="container header__inner">
      <a class="brand" href="/" aria-label="Flow home">
        <img src="/assets/img/logo.png" class="brand__logo" alt="Flow logo" />
        <span class="brand__name">Flow</span>
      </a>
      <div class="dashboard-controls">
        <!-- Advanced Search -->
        <div class="search-control">
          <svg class="search-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <input type="search" class="search-input" placeholder="Search students, applications..." aria-label="Search">
        </div>
        
        <!-- Notifications -->
        <button class="control-button" title="Notifications" aria-label="Notifications" onclick="showNotifications()">
          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM11 19H6a2 2 0 01-2-2V7a2 2 0 012-2h5m5 10V9a2 2 0 00-2-2H9m7 8a2 2 0 002-2V9a2 2 0 00-2-2"></path>
          </svg>
          <span class="badge">3</span>
        </button>
        
        <!-- Messages -->
        <a href="/counselors/messages.html" class="control-button" title="Messages" aria-label="Messages" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); color: #8b5cf6;">
          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          <span class="badge">7</span>
        </a>
        
        <!-- Calendar -->
        <button class="control-button" title="Calendar" aria-label="Calendar" onclick="showCalendar()">
          <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
        </button>
        
        <!-- Language Switch -->
        <form class="lang-switch" aria-label="Language selector">
          <label for="lang" class="sr-only" data-i18n="accessibility.selectLanguage">Language</label>
          <select id="lang" name="lang" aria-describedby="lang-help">
            <option value="en" selected>English</option>
            <option value="fr">Fran√ßais</option>
            <option value="ar" dir="rtl">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="sw">Kiswahili</option>
            <option value="ha">Hausa</option>
            <option value="yo">Yoruba</option>
            <option value="ig">Igbo</option>
            <option value="zu">Zulu</option>
            <option value="am">Amharic</option>
          </select>
          <div id="lang-help" class="sr-only" data-i18n="accessibility.langReloadNote">Changing language will reload the page</div>
        </form>
        
        <!-- User Menu -->
        <div class="user-menu">
          <div class="user-avatar" title="User Menu" aria-label="User Menu">JD</div>
        </div>
      </div>
      
      <nav class="nav" aria-label="Main navigation" style="display: none;">
        <ul class="nav__list">
          <li><a href="/" class="active">Dashboard</a></li>
          <li><a href="/students/">Students</a></li>
          <li><a href="/institutions/">Institutions</a></li>
          <li><a href="/parents/">Parents</a></li>
          <li><a href="/recommenders/">Recommenders</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <!-- Enhanced Subnav -->
  <div class="subnav" role="navigation" aria-label="Counselor sections">
    <div class="container subnav-content">
      <div class="subnav-nav">
        <a href="#dashboard" class="badge active">üìä Dashboard</a>
        <a href="#students" class="badge">üë• Students</a>
        <a href="#tasks" class="badge">‚úÖ Tasks</a>
        <a href="/counselors/messages.html" class="badge">üí¨ Messages</a>
        <a href="#analytics" class="badge">üìà Analytics</a>
        <a href="/counselors/profile.html" class="badge">üë§ Profile</a>
      </div>
      <div class="quick-filters">
        <select class="filter-select" aria-label="Filter by status">
          <option>All Students</option>
          <option>Active</option>
          <option>Pending</option>
          <option>At Risk</option>
        </select>
        <select class="filter-select" aria-label="Filter by deadline">
          <option>All Deadlines</option>
          <option>This Week</option>
          <option>This Month</option>
          <option>Overdue</option>
        </select>
        <div class="view-toggle">
          <button class="active" title="Grid View" onclick="switchToGridView()" style="background: linear-gradient(135deg, #8b5cf6, #a855f7); color: white; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; padding: 0.5rem; transition: all 0.3s ease;">‚äû</button>
          <button title="List View" onclick="switchToListView()" style="background: rgba(255,255,255,0.1); color: #e2e8f0; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; padding: 0.5rem; transition: all 0.3s ease;">‚ò∞</button>
        </div>
      </div>
    </div>
  </div>
  <main id="main">
    <!-- Breadcrumb -->
    <nav class="container" aria-label="Breadcrumb" style="padding-top:1rem">
      <ol style="list-style:none;display:flex;gap:.35rem;margin:0;padding:0;color:#6b7280">
        <li><a href="/" style="text-decoration:none">Home</a></li>
        <li aria-hidden="true">/</li>
        <li><strong>Counselor Dashboard</strong></li>
      </ol>
    </nav>
    <!-- Dashboard Stats -->
    <section class="container dashboard-stats">
      <div class="stat-card">
        <span class="stat-number">12</span>
        <div class="stat-label">Active Students</div>
        <span class="stat-trend up">‚Üó +2 this week</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">25</span>
        <div class="stat-label">Applications</div>
        <span class="stat-trend up">‚Üó +5 pending</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">6</span>
        <div class="stat-label">Urgent Tasks</div>
        <span class="stat-trend down">‚Üò -2 from yesterday</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">68%</span>
        <div class="stat-label">On Track</div>
        <span class="stat-trend up">‚Üó +12% this month</span>
      </div>
    </section>
    <!-- HERO -->
    <section id="dashboard" class="hero" aria-labelledby="heroTitle" style="background: linear-gradient(135deg, #4338ca 0%, #6366f1 50%, #f59e0b 100%); color: white;">
      <div class="container hero__inner">
        <div class="hero__content">
          <h1 id="heroTitle" style="color: white;">Counselor Dashboard</h1>
          <p class="lead" style="color: rgba(255, 255, 255, 0.9);">Track your cohort's progress, review tasks, and keep everyone on schedule.</p>
        </div>
        <figure class="hero__media" aria-hidden="true">
          <img src="/assets/img/hero-placeholder.svg" alt="" />
        </figure>
      </div>
    </section>
    <!-- ASSIGNED STUDENTS -->
    <section id="students" class="section">
      <div class="container grid">
        <h2 style="color: white;">Assigned Students</h2>
        <div class="card" style="margin:.5rem 0 1rem 0">
          <div class="grid" style="grid-template-columns:1fr auto; gap:1rem; align-items:end;">
            <label style="margin:0">Quick filter
              <input id="studentFilter" type="search" placeholder="Search name, program, or status" />
            </label>
            <div style="display:flex; gap:.5rem; justify-content:flex-end; flex-wrap:wrap">
              <button id="exportCsv" type="button" class="btn btn--ghost">Export CSV</button>
            </div>
          </div>
        </div>
        <ul class="status-list">
          <li><strong style="color: white;">Jane Doe</strong> ‚Äî 2 applications submitted <span class="badge green">On Track</span></li>
          <li><strong style="color: white;">Samuel Okoro</strong> ‚Äî 1 pending recommendation <span class="badge yellow">Action Needed</span></li>
          <li><strong style="color: white;">Adjoa Mensah</strong> ‚Äî Awaiting transcript upload <span class="badge red">Delayed</span></li>
        </ul>
        <div class="card mt-4" role="table" aria-label="Student overview" style="overflow:auto">
          <div role="rowgroup" id="studentsTable">
            <div role="row" class="grid" style="grid-template-columns:2fr 2fr 1fr 1fr 1fr; gap:1rem; font-weight:700; border-bottom:1px solid #e5e7eb; padding:.5rem 0;">
              <div role="columnheader">Student</div>
              <div role="columnheader">Programs</div>
              <div role="columnheader">Status</div>
              <div role="columnheader">Next Deadline</div>
              <div role="columnheader">Action</div>
            </div>
            <div role="row" class="grid" style="grid-template-columns:2fr 2fr 1fr 1fr 1fr; gap:1rem; border-bottom:1px solid #e5e7eb; padding:.6rem 0;">
              <div role="cell">Jane Doe</div>
              <div role="cell">Accra (CS), Dakar (Data)</div>
              <div role="cell"><span class="badge green">On Track</span></div>
              <div role="cell"><time datetime="2025-09-01">Sept 1</time></div>
              <div role="cell"><a class="btn btn--ghost" href="#tasks">Open</a></div>
            </div>
            <div role="row" class="grid" style="grid-template-columns:2fr 2fr 1fr 1fr 1fr; gap:1rem; border-bottom:1px solid #e5e7eb; padding:.6rem 0;">
              <div role="cell">Samuel Okoro</div>
              <div role="cell">ATI (Software)</div>
              <div role="cell"><span class="badge yellow">Action Needed</span></div>
              <div role="cell"><time datetime="2025-08-30">Aug 30</time></div>
              <div role="cell"><a class="btn btn--ghost" href="#tasks">Open</a></div>
            </div>
            <div role="row" class="grid" style="grid-template-columns:2fr 2fr 1fr 1fr 1fr; gap:1rem; border-bottom:1px solid #e5e7eb; padding:.6rem 0;">
              <div role="cell">Adjoa Mensah</div>
              <div role="cell">Kumasi (Nursing)</div>
              <div role="cell"><span class="badge red">Delayed</span></div>
              <div role="cell"><time datetime="2025-09-10">Sept 10</time></div>
              <div role="cell"><a class="btn btn--ghost" href="#tasks">Open</a></div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- TASKS & APPROVALS -->
    <section id="tasks" class="section section--how">
      <div class="container grid">
        <h2 style="color: white;">Tasks &amp; Approvals</h2>
        <article class="card">
          <h3>Pending</h3>
          <div class="approval">
            <p>Review Jane Doe‚Äôs application essay draft?</p>
            <a class="btn" href="#" aria-disabled="true">Approve</a>
            <a class="btn btn--ghost" href="#" aria-disabled="true">Request Changes</a>
          </div>
          <div class="approval">
            <p>Verify Samuel Okoro‚Äôs transcript upload?</p>
            <a class="btn" href="#" aria-disabled="true">Approve</a>
            <a class="btn btn--ghost" href="#" aria-disabled="true">Reject</a>
          </div>
        </article>
        <article class="card">
          <h3>Notes</h3>
          <label>Add internal note
            <textarea rows="4" placeholder="Private note visible to counselors only‚Ä¶"></textarea>
          </label>
          <a class="btn mt-4" href="#" aria-disabled="true">Save note</a>
        </article>
      </div>
    </section>
    <!-- REPORTS & ANALYTICS -->
    <section id="analytics" class="section">
      <div class="container grid">
        <h2 style="color: white;">Reports &amp; Analytics</h2>
        <div class="cards--grid">
          <article class="card" aria-labelledby="cohort">
            <h3 id="cohort">Cohort Snapshot</h3>
            <p><strong>Total Students:</strong> 12</p>
            <p><strong>Applications Submitted:</strong> 25</p>
            <p><strong>Pending Actions:</strong> 6</p>
            <div class="progress-bar"><div class="progress" style="width:68%"></div></div>
            <a class="btn btn--ghost mt-4" href="#" aria-disabled="true">Export Report (CSV)</a>
          </article>
          <article class="card" aria-labelledby="trends">
            <h3 id="trends">Deadlines &amp; Trends</h3>
            <ul>
              <li>Next deadlines peak on <time datetime="2025-09-15">Sept 15</time>.</li>
              <li>Most common programs: CS, Business, Nursing.</li>
            </ul>
            <p><em>Charts will render here when we add JS.</em></p>
          </article>
        </div>
      </div>
    </section>
    <!-- HELP -->
    <section id="help" class="section section--faq">
      <div class="container grid">
        <h2 style="color: white;">Help &amp; FAQs</h2>
        <details class="card">
          <summary>How do I add a new student?</summary>
          <div class="prose">You‚Äôll receive invitations from institutions or admins. Once approved, the student appears in your list.</div>
        </details>
        <details class="card">
          <summary>Can I edit student applications?</summary>
          <div class="prose">No ‚Äî counselors provide feedback and approvals. Students make the edits.</div>
        </details>
        <details class="card">
          <summary>Where do I see deadlines?</summary>
          <div class="prose">Each application shows its deadline; the dashboard aggregates urgent items.</div>
        </details>
      </div>
    </section>
  </main>
  
  <!-- Quick Actions Panel -->
  <div class="quick-actions-panel">
    <button class="quick-action-btn" title="Add New Student" aria-label="Add New Student" onclick="addNewStudent()">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
      </svg>
    </button>
    <button class="quick-action-btn" title="Send Message" aria-label="Send Message" onclick="quickSendMessage()">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
      </svg>
    </button>
    <button class="quick-action-btn" title="Schedule Meeting" aria-label="Schedule Meeting" onclick="scheduleMeeting()">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
      </svg>
    </button>
    <button class="quick-action-btn" title="Export Report" aria-label="Export Report" onclick="exportReport()">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
      </svg>
    </button>
  </div>
  
  <!-- Floating Settings Button -->
  <button class="floating-settings" onclick="navigateTo('/counselors/settings.html')" title="Advanced Settings" aria-label="Open Advanced Settings">
    ‚öôÔ∏è
  </button>
  
  <!-- Footer -->
  <footer class="footer" role="contentinfo" aria-label="Site footer">
    <div class="container footer__grid">
      <section class="footer__brand">
        <img src="/assets/img/logo.png" alt="" class="footer__logo" style="border-radius: 50%;" />
        <p class="footer__tagline">Connecting learners and institutions across Africa.</p>
      </section>
      <nav aria-label="Explore" class="footer__nav">
        <h3 class="footer__title">Explore</h3>
        <ul>
          <li><a href="/students/" class="advanced-svg-link" onclick="navigateTo('/students/')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="studentsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#3b82f6"/>
                  <stop offset="50%" style="stop-color:#6366f1"/>
                  <stop offset="100%" style="stop-color:#8b5cf6"/>
                </linearGradient>
              </defs>
              <circle cx="12" cy="8" r="4" fill="url(#studentsGradient)">
                <animate attributeName="r" values="4;4.5;4" dur="2s" repeatCount="indefinite"/>
              </circle>
              <path d="M12 14c-4 0-7 2-7 4v2h14v-2c0-2-3-4-7-4z" fill="url(#studentsGradient)" opacity="0.8">
                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite"/>
              </path>
              <circle cx="18" cy="6" r="2" fill="#fbbf24" opacity="0.8">
                <animate attributeName="cy" values="6;8;6" dur="3s" repeatCount="indefinite"/>
              </circle>
            </svg>
            <span>Students</span>
          </a></li>
          <li><a href="/institutions/" class="advanced-svg-link" onclick="navigateTo('/institutions/')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="institutionsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#059669"/>
                  <stop offset="50%" style="stop-color:#10b981"/>
                  <stop offset="100%" style="stop-color:#34d399"/>
                </linearGradient>
              </defs>
              <rect x="3" y="10" width="18" height="10" rx="1" fill="url(#institutionsGradient)" opacity="0.8">
                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="3s" repeatCount="indefinite"/>
              </rect>
              <polygon points="12,3 4,9 20,9" fill="url(#institutionsGradient)">
                <animateTransform attributeName="transform" attributeType="XML" type="scale" values="1;1.05;1" dur="2s" repeatCount="indefinite"/>
              </polygon>
              <rect x="10" y="13" width="4" height="4" fill="white" opacity="0.7">
                <animate attributeName="opacity" values="0.5;0.9;0.5" dur="1.5s" repeatCount="indefinite"/>
              </rect>
            </svg>
            <span>Institutions</span>
          </a></li>
          <li><a href="/counselors/" class="advanced-svg-link" onclick="showDashboardInfo()">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="counselorsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#8b5cf6"/>
                  <stop offset="50%" style="stop-color:#a855f7"/>
                  <stop offset="100%" style="stop-color:#c084fc"/>
                </linearGradient>
              </defs>
              <circle cx="12" cy="8" r="4" fill="url(#counselorsGradient)">
                <animate attributeName="r" values="4;4.5;4" dur="2s" repeatCount="indefinite"/>
              </circle>
              <path d="M12 14c-4 0-7 2-7 4v2h14v-2c0-2-3-4-7-4z" fill="url(#counselorsGradient)" opacity="0.8"/>
              <circle cx="16" cy="16" r="3" fill="#10b981" opacity="0.9">
                <animate attributeName="r" values="2.5;3.5;2.5" dur="1.5s" repeatCount="indefinite"/>
              </circle>
              <path d="M14.5 16l1 1 2-2" stroke="white" stroke-width="1.5" fill="none"/>
            </svg>
            <span>Counselors</span>
          </a></li>
          <li><a href="/parents/" class="advanced-svg-link" onclick="navigateTo('/parents/')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="parentsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#f59e0b"/>
                  <stop offset="50%" style="stop-color:#d97706"/>
                  <stop offset="100%" style="stop-color:#b45309"/>
                </linearGradient>
              </defs>
              <circle cx="9" cy="8" r="3" fill="url(#parentsGradient)">
                <animate attributeName="r" values="3;3.5;3" dur="2s" repeatCount="indefinite"/>
              </circle>
              <circle cx="15" cy="8" r="3" fill="url(#parentsGradient)" opacity="0.8">
                <animate attributeName="r" values="3;3.5;3" dur="2s" begin="0.5s" repeatCount="indefinite"/>
              </circle>
              <path d="M9 14c-2 0-4 1-4 3v1h8v-1c0-2-2-3-4-3z" fill="url(#parentsGradient)" opacity="0.7"/>
              <path d="M15 14c-2 0-4 1-4 3v1h8v-1c0-2-2-3-4-3z" fill="url(#parentsGradient)" opacity="0.6"/>
              <circle cx="18" cy="6" r="1.5" fill="#ef4444">
                <animate attributeName="fill" values="#ef4444;#f97316;#ef4444" dur="2s" repeatCount="indefinite"/>
              </circle>
            </svg>
            <span>Parents</span>
          </a></li>
          <li><a href="/recommenders/" class="advanced-svg-link" onclick="navigateTo('/recommenders/')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="recommendersGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#06b6d4"/>
                  <stop offset="50%" style="stop-color:#0891b2"/>
                  <stop offset="100%" style="stop-color:#0e7490"/>
                </linearGradient>
              </defs>
              <rect x="4" y="2" width="16" height="20" rx="2" fill="url(#recommendersGradient)" opacity="0.8">
                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="3s" repeatCount="indefinite"/>
              </rect>
              <rect x="6" y="5" width="12" height="1" fill="white" opacity="0.8"/>
              <rect x="6" y="7" width="10" height="1" fill="white" opacity="0.7"/>
              <rect x="6" y="9" width="8" height="1" fill="white" opacity="0.6"/>
              <circle cx="16" cy="16" r="3" fill="#10b981">
                <animate attributeName="r" values="2.5;3.5;2.5" dur="1.5s" repeatCount="indefinite"/>
              </circle>
              <path d="M14 16l1.5 1.5L18 15" stroke="white" stroke-width="1.5" fill="none"/>
            </svg>
            <span>Recommenders</span>
          </a></li>
        </ul>
      </nav>
      <nav aria-label="Legal" class="footer__nav">
        <h3 class="footer__title">Legal</h3>
        <ul>
          <li><a href="/legal/terms.html" class="advanced-svg-link" onclick="openLegalDoc('terms')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="termsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#ef4444"/>
                  <stop offset="50%" style="stop-color:#f97316"/>
                  <stop offset="100%" style="stop-color:#eab308"/>
                </linearGradient>
              </defs>
              <rect x="4" y="2" width="16" height="20" rx="2" fill="url(#termsGradient)" opacity="0.8">
                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2s" repeatCount="indefinite"/>
              </rect>
              <rect x="6" y="6" width="12" height="1" fill="white" opacity="0.8"/>
              <rect x="6" y="8" width="10" height="1" fill="white" opacity="0.7"/>
              <rect x="6" y="10" width="8" height="1" fill="white" opacity="0.6"/>
              <rect x="6" y="12" width="11" height="1" fill="white" opacity="0.5"/>
            </svg>
            <span>Terms</span>
          </a></li>
          <li><a href="/legal/privacy.html" class="advanced-svg-link" onclick="openLegalDoc('privacy')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="privacyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#10b981"/>
                  <stop offset="50%" style="stop-color:#059669"/>
                  <stop offset="100%" style="stop-color:#047857"/>
                </linearGradient>
              </defs>
              <path d="M12 2L3 7v5c0 6 3.6 11.5 9 13 5.4-1.5 9-7 9-13V7l-9-5z" fill="url(#privacyGradient)" opacity="0.8">
                <animate attributeName="opacity" values="0.6;0.9;0.6" dur="2.5s" repeatCount="indefinite"/>
              </path>
              <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round">
                <animate attributeName="stroke-width" values="2;3;2" dur="2s" repeatCount="indefinite"/>
              </path>
            </svg>
            <span>Privacy</span>
          </a></li>
          <li><a href="/legal/cookies.html" class="advanced-svg-link" onclick="openLegalDoc('cookies')">
            <svg class="svg-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="cookiesGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#f59e0b"/>
                  <stop offset="50%" style="stop-color:#d97706"/>
                  <stop offset="100%" style="stop-color:#b45309"/>
                </linearGradient>
              </defs>
              <circle cx="12" cy="12" r="10" fill="url(#cookiesGradient)" opacity="0.8">
                <animate attributeName="r" values="9.5;10.5;9.5" dur="3s" repeatCount="indefinite"/>
              </circle>
              <circle cx="8" cy="9" r="1" fill="#8b5cf6">
                <animate attributeName="r" values="0.8;1.2;0.8" dur="2s" repeatCount="indefinite"/>
              </circle>
              <circle cx="14" cy="8" r="1" fill="#ef4444">
                <animate attributeName="r" values="0.8;1.2;0.8" dur="2s" begin="0.5s" repeatCount="indefinite"/>
              </circle>
              <circle cx="10" cy="14" r="1" fill="#10b981">
                <animate attributeName="r" values="0.8;1.2;0.8" dur="2s" begin="1s" repeatCount="indefinite"/>
              </circle>
              <circle cx="16" cy="15" r="1" fill="#3b82f6">
                <animate attributeName="r" values="0.8;1.2;0.8" dur="2s" begin="1.5s" repeatCount="indefinite"/>
              </circle>
            </svg>
            <span>Cookies</span>
          </a></li>
        </ul>
      </nav>
      <section class="footer__cta">
        <h3 class="footer__title">Ready to get started?</h3>
        <a href="/auth/" class="btn btn--primary" onclick="handleSignIn()">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
          </svg>
          Sign in
        </a>
      </section>
    </div>
    <div class="footer__meta">
      <div class="container">
        <small>¬© <span id="year"></span> Flow</small>
      </div>
    </div>
  </footer>
  <!-- Translation system -->
  <script src="/assets/js/i18n.js" defer></script>
  
  <!-- Auth and Counselor JS -->
  <script src="/assets/js/auth.js" defer></script>
  <script src="/assets/js/auth-guards.js" defer></script>
  <script src="/assets/js/counselors.js" defer></script>
  
  <!-- Particle Animation -->
  <script>
    // Particle animation system (similar to student dashboard)
    function initParticles() {
      const canvas = document.getElementById('particleCanvas');
      if (!canvas) return;
      
      const ctx = canvas.getContext('2d');
      let animationId;
      
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();
      
      const particles = [];
      const particleCount = 60;
      const connectionDistance = 120;
      
      // Create particles
      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          vx: (Math.random() - 0.5) * 0.8,
          vy: (Math.random() - 0.5) * 0.8,
          size: Math.random() * 2 + 0.5,
          opacity: Math.random() * 0.6 + 0.2,
          hue: Math.random() * 60 + 220 // Blue to purple range
        });
      }
      
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Update and draw particles
        particles.forEach((particle, i) => {
          particle.x += particle.vx;
          particle.y += particle.vy;
          
          // Bounce off edges
          if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
          if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;
          
          // Draw particle
          ctx.beginPath();
          ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
          ctx.fillStyle = `hsla(${particle.hue}, 70%, 60%, ${particle.opacity})`;
          ctx.fill();
          
          // Draw connections
          for (let j = i + 1; j < particles.length; j++) {
            const dx = particles[j].x - particle.x;
            const dy = particles[j].y - particle.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < connectionDistance) {
              const opacity = (1 - distance / connectionDistance) * 0.3;
              ctx.beginPath();
              ctx.moveTo(particle.x, particle.y);
              ctx.lineTo(particles[j].x, particles[j].y);
              ctx.strokeStyle = `hsla(${particle.hue}, 70%, 60%, ${opacity})`;
              ctx.lineWidth = 0.5;
              ctx.stroke();
            }
          }
        });
        
        animationId = requestAnimationFrame(animate);
      }
      
      animate();
      
      return () => {
        cancelAnimationFrame(animationId);
        window.removeEventListener('resize', resizeCanvas);
      };
    }
    
    // Initialize particles when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      initParticles();
    });
  </script>
  
  <!-- Footer Functionality -->
  <script>
    function navigateTo(url) {
      if (url) {
        window.location.href = url;
      }
    }

    function showDashboardInfo() {
      const modal = document.createElement('div');
      modal.className = 'advanced-modal';
      modal.innerHTML = `
        <div class="modal-overlay">
          <div class="modal-content" style="max-width: 500px; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
              <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #8b5cf6, #a855f7); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              </div>
              <div>
                <h3 style="margin: 0; color: #1e293b; font-size: 1.5rem;">Counselor Dashboard</h3>
                <p style="margin: 0; color: #64748b;">Your hub for student guidance</p>
              </div>
            </div>
            <div style="color: #475569; line-height: 1.6;">
              <p>Welcome to your counselor dashboard! Here you can:</p>
              <ul style="padding-left: 1.5rem;">
                <li>Track assigned students' progress</li>
                <li>Review and approve applications</li>
                <li>Send messages and schedule meetings</li>
                <li>Generate progress reports</li>
                <li>Manage your counselor profile</li>
              </ul>
              <p style="margin-top: 1rem;">Use the navigation above to explore different sections.</p>
            </div>
            <div style="margin-top: 2rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
              <button onclick="closeModal()" style="padding: 0.75rem 1.5rem; background: #f1f5f9; color: #475569; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Close</button>
              <button onclick="navigateTo('#students')" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">View Students</button>
            </div>
          </div>
        </div>
      `;
      
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 9999; backdrop-filter: blur(4px);
      `;
      
      document.body.appendChild(modal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }

    function openLegalDoc(docType) {
      const docInfo = {
        terms: {
          title: 'Terms of Service',
          content: 'Our comprehensive terms of service outline the rules and regulations for using Flow\'s educational platform...',
          icon: 'üìã'
        },
        privacy: {
          title: 'Privacy Policy',
          content: 'We are committed to protecting your privacy and personal data. This policy explains how we collect, use, and safeguard your information...',
          icon: 'üîí'
        },
        cookies: {
          title: 'Cookie Policy',
          content: 'We use cookies and similar technologies to improve your experience on our platform. Learn about the types of cookies we use and how to manage them...',
          icon: 'üç™'
        }
      };

      const doc = docInfo[docType];
      if (!doc) return;

      const modal = document.createElement('div');
      modal.className = 'advanced-modal';
      modal.innerHTML = `
        <div class="modal-overlay">
          <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
              <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #ef4444, #f97316); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                ${doc.icon}
              </div>
              <div>
                <h3 style="margin: 0; color: #1e293b; font-size: 1.5rem;">${doc.title}</h3>
                <p style="margin: 0; color: #64748b;">Legal document</p>
              </div>
            </div>
            <div style="color: #475569; line-height: 1.6;">
              <p>${doc.content}</p>
              <p style="margin-top: 1rem;"><strong>Last updated:</strong> ${new Date().toLocaleDateString()}</p>
              <p style="margin-top: 1rem; padding: 1rem; background: #f8fafc; border-radius: 8px; border-left: 4px solid #3b82f6;">
                üìÑ For the complete ${doc.title.toLowerCase()}, please visit our legal documents section or contact our support team.
              </p>
            </div>
            <div style="margin-top: 2rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
              <button onclick="closeModal()" style="padding: 0.75rem 1.5rem; background: #f1f5f9; color: #475569; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Close</button>
              <button onclick="window.open('/legal/${docType}.html', '_blank')" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">View Full Document</button>
            </div>
          </div>
        </div>
      `;
      
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 9999; backdrop-filter: blur(4px);
      `;
      
      document.body.appendChild(modal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }

    function handleSignIn() {
      const modal = document.createElement('div');
      modal.className = 'advanced-modal';
      modal.innerHTML = `
        <div class="modal-overlay">
          <div class="modal-content" style="max-width: 400px; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
              <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                </svg>
              </div>
              <div>
                <h3 style="margin: 0; color: #1e293b; font-size: 1.5rem;">Sign In</h3>
                <p style="margin: 0; color: #64748b;">Access your account</p>
              </div>
            </div>
            <div style="color: #475569; line-height: 1.6;">
              <p>Choose your sign-in method:</p>
              <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem;">
                <button onclick="navigateTo('/auth/')" style="padding: 0.75rem; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                  <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                  </svg>
                  Flow Account
                </button>
                <button onclick="navigateTo('/auth/institutional.html')" style="padding: 0.75rem; background: #f1f5f9; color: #475569; border: 1px solid #e2e8f0; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                  <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 3L4 9v12h16V9l-8-6z"/>
                  </svg>
                  Institutional Login
                </button>
              </div>
            </div>
            <div style="margin-top: 1.5rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
              <button onclick="closeModal()" style="padding: 0.75rem 1.5rem; background: #f1f5f9; color: #475569; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Cancel</button>
            </div>
          </div>
        </div>
      `;
      
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 9999; backdrop-filter: blur(4px);
      `;
      
      document.body.appendChild(modal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }

    function closeModal() {
      const modal = document.querySelector('.advanced-modal');
      if (modal) {
        modal.remove();
      }
    }


    // Initialize year in footer
    document.addEventListener('DOMContentLoaded', function() {
      const yearSpan = document.getElementById('year');
      if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
      }
    });

    // Keyboard accessibility for modals
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
    
    // Quick Actions Panel Functions
    function addNewStudent() {
      const modal = document.createElement('div');
      modal.className = 'advanced-modal';
      modal.innerHTML = `
        <div class="modal-overlay">
          <div class="modal-content" style="max-width: 500px; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
              <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </div>
              <div>
                <h3 style="margin: 0; color: #1e293b; font-size: 1.5rem;">Add New Student</h3>
                <p style="margin: 0; color: #64748b;">Add a student to your counseling roster</p>
              </div>
            </div>
            <div style="color: #475569; line-height: 1.6;">
              <div style="display: flex; flex-direction: column; gap: 1rem;">
                <div>
                  <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Student Name</label>
                  <input type="text" id="studentName" style="width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px;" placeholder="Enter student full name">
                </div>
                <div>
                  <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Email Address</label>
                  <input type="email" id="studentEmail" style="width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px;" placeholder="student@email.com">
                </div>
                <div>
                  <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Program Interest</label>
                  <select id="programInterest" style="width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px;">
                    <option>Computer Science</option>
                    <option>Business Administration</option>
                    <option>Engineering</option>
                    <option>Medicine</option>
                    <option>Other</option>
                  </select>
                </div>
              </div>
            </div>
            <div style="margin-top: 2rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
              <button onclick="closeModal()" style="padding: 0.75rem 1.5rem; background: #f1f5f9; color: #475569; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Cancel</button>
              <button onclick="saveNewStudent()" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Add Student</button>
            </div>
          </div>
        </div>
      `;
      
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 9999; backdrop-filter: blur(4px);
      `;
      
      document.body.appendChild(modal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }
    
    function saveNewStudent() {
      const name = document.getElementById('studentName').value;
      const email = document.getElementById('studentEmail').value;
      const program = document.getElementById('programInterest').value;
      
      if (name && email) {
        alert(`Student ${name} has been added successfully!\nEmail: ${email}\nProgram: ${program}`);
        closeModal();
      } else {
        alert('Please fill in all required fields.');
      }
    }
    
    function quickSendMessage() {
      navigateTo('/counselors/messages.html');
    }
    
    function scheduleMeeting() {
      const modal = document.createElement('div');
      modal.className = 'advanced-modal';
      modal.innerHTML = `
        <div class="modal-overlay">
          <div class="modal-content" style="max-width: 500px; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
              <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #8b5cf6, #a855f7); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
              </div>
              <div>
                <h3 style="margin: 0; color: #1e293b; font-size: 1.5rem;">Schedule Meeting</h3>
                <p style="margin: 0; color: #64748b;">Schedule a meeting with a student</p>
              </div>
            </div>
            <div style="color: #475569; line-height: 1.6;">
              <div style="display: flex; flex-direction: column; gap: 1rem;">
                <div>
                  <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Student</label>
                  <select id="meetingStudent" style="width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px;">
                    <option>Jane Doe</option>
                    <option>Samuel Okoro</option>
                    <option>Adjoa Mensah</option>
                  </select>
                </div>
                <div>
                  <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Date & Time</label>
                  <input type="datetime-local" id="meetingDateTime" style="width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px;">
                </div>
                <div>
                  <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Meeting Topic</label>
                  <input type="text" id="meetingTopic" style="width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px;" placeholder="Application review, career guidance, etc.">
                </div>
              </div>
            </div>
            <div style="margin-top: 2rem; display: flex; gap: 0.75rem; justify-content: flex-end;">
              <button onclick="closeModal()" style="padding: 0.75rem 1.5rem; background: #f1f5f9; color: #475569; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Cancel</button>
              <button onclick="saveMeeting()" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #8b5cf6, #a855f7); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">Schedule</button>
            </div>
          </div>
        </div>
      `;
      
      modal.style.cssText = `
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; z-index: 9999; backdrop-filter: blur(4px);
      `;
      
      document.body.appendChild(modal);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }
    
    function saveMeeting() {
      const student = document.getElementById('meetingStudent').value;
      const dateTime = document.getElementById('meetingDateTime').value;
      const topic = document.getElementById('meetingTopic').value;
      
      if (student && dateTime && topic) {
        alert(`Meeting scheduled successfully!\nStudent: ${student}\nDate/Time: ${new Date(dateTime).toLocaleString()}\nTopic: ${topic}`);
        closeModal();
      } else {
        alert('Please fill in all fields.');
      }
    }
    
    function exportReport() {
      const reportData = {
        totalStudents: 12,
        applications: 25,
        pendingTasks: 6,
        completionRate: '68%',
        generatedAt: new Date().toISOString()
      };
      
      const csvContent = 'data:text/csv;charset=utf-8,' + 
        'Metric,Value\n' +
        'Total Students,' + reportData.totalStudents + '\n' +
        'Applications Submitted,' + reportData.applications + '\n' +
        'Pending Tasks,' + reportData.pendingTasks + '\n' +
        'Completion Rate,' + reportData.completionRate + '\n' +
        'Generated At,' + new Date(reportData.generatedAt).toLocaleString();
      
      const encodedUri = encodeURI(csvContent);
      const link = document.createElement('a');
      link.setAttribute('href', encodedUri);
      link.setAttribute('download', `counselor-report-${new Date().toISOString().split('T')[0]}.csv`);
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      alert('Report exported successfully!');
    }
    
    function switchToGridView() {
      const gridBtn = document.querySelector('.view-toggle button[title="Grid View"]');
      const listBtn = document.querySelector('.view-toggle button[title="List View"]');
      const studentsTable = document.getElementById('studentsTable');
      
      if (gridBtn && listBtn) {
        gridBtn.classList.add('active');
        gridBtn.style.background = 'linear-gradient(135deg, #8b5cf6, #a855f7)';
        gridBtn.style.color = 'white';
        
        listBtn.classList.remove('active');
        listBtn.style.background = 'rgba(255,255,255,0.1)';
        listBtn.style.color = '#e2e8f0';
        
        // Convert table to grid view
        if (studentsTable) {
          studentsTable.style.display = 'grid';
          studentsTable.style.gridTemplateColumns = 'repeat(auto-fit, minmax(300px, 1fr))';
          studentsTable.style.gap = '1rem';
          
          const rows = studentsTable.querySelectorAll('[role="row"]');
          rows.forEach((row, index) => {
            if (index === 0) {
              // Hide header row in grid view
              row.style.display = 'none';
            } else {
              // Convert data rows to cards
              row.style.display = 'block';
              row.style.background = 'var(--card)';
              row.style.padding = '1.5rem';
              row.style.borderRadius = 'var(--radius-lg)';
              row.style.border = '1px solid var(--border)';
              row.style.boxShadow = 'var(--shadow-1)';
              row.style.transition = 'var(--t)';
              
              const cells = row.querySelectorAll('[role="cell"]');
              cells.forEach((cell, cellIndex) => {
                cell.style.display = 'block';
                cell.style.marginBottom = '0.75rem';
                
                // Add labels for better readability in card format
                const labels = ['Student:', 'Programs:', 'Status:', 'Next Deadline:', 'Action:'];
                if (cellIndex < labels.length && !cell.querySelector('.cell-label')) {
                  const label = document.createElement('strong');
                  label.className = 'cell-label';
                  label.textContent = labels[cellIndex] + ' ';
                  label.style.color = 'var(--text)';
                  label.style.display = 'inline-block';
                  label.style.minWidth = '120px';
                  cell.insertBefore(label, cell.firstChild);
                }
              });
            }
          });
        }
        
        console.log('Switched to grid view');
      }
    }
    
    function switchToListView() {
      const gridBtn = document.querySelector('.view-toggle button[title="Grid View"]');
      const listBtn = document.querySelector('.view-toggle button[title="List View"]');
      const studentsTable = document.getElementById('studentsTable');
      
      if (gridBtn && listBtn) {
        listBtn.classList.add('active');
        listBtn.style.background = 'linear-gradient(135deg, #8b5cf6, #a855f7)';
        listBtn.style.color = 'white';
        
        gridBtn.classList.remove('active');
        gridBtn.style.background = 'rgba(255,255,255,0.1)';
        gridBtn.style.color = '#e2e8f0';
        
        // Convert grid back to list/table view
        if (studentsTable) {
          studentsTable.style.display = 'block';
          studentsTable.style.gridTemplateColumns = 'none';
          studentsTable.style.gap = 'none';
          
          const rows = studentsTable.querySelectorAll('[role="row"]');
          rows.forEach((row, index) => {
            if (index === 0) {
              // Show header row in list view
              row.style.display = 'grid';
              row.style.gridTemplateColumns = '2fr 2fr 1fr 1fr 1fr';
              row.style.gap = '1rem';
              row.style.fontWeight = '700';
              row.style.borderBottom = '1px solid #e5e7eb';
              row.style.padding = '.5rem 0';
              row.style.background = 'none';
              row.style.border = 'none';
              row.style.boxShadow = 'none';
              row.style.borderRadius = 'none';
            } else {
              // Convert cards back to table rows
              row.style.display = 'grid';
              row.style.gridTemplateColumns = '2fr 2fr 1fr 1fr 1fr';
              row.style.gap = '1rem';
              row.style.borderBottom = '1px solid #e5e7eb';
              row.style.padding = '.6rem 0';
              row.style.background = 'none';
              row.style.border = 'none';
              row.style.boxShadow = 'none';
              row.style.borderRadius = 'none';
              
              const cells = row.querySelectorAll('[role="cell"]');
              cells.forEach(cell => {
                cell.style.display = 'block';
                cell.style.marginBottom = '0';
                
                // Remove labels added for card format
                const label = cell.querySelector('.cell-label');
                if (label) {
                  label.remove();
                }
              });
            }
          });
        }
        
        console.log('Switched to list view');
      }
    }
