<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flow | Parent Dashboard</title>
  <meta name="description" content="Support your child's university journey. Track applications, manage finances, and stay informed every step of the way.">
  <meta name="theme-color" content="#667eea">
  <link rel="icon" href="/assets/img/logo.PNG" type="image/png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-primary);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: sticky;
      top: 0;
      z-index: 100;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="smallGrid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="%23ffffff" stroke-width="0.5" opacity="0.1"/></pattern></defs><rect width="100" height="20" fill="url(%23smallGrid)"/></svg>');
      opacity: 0.3;
    }

    .header::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
      background-size: 30px 30px;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 0;
      position: relative;
      z-index: 2;
    }

    .header-brand {
      display: flex;
      align-items: center;
      gap: 1rem;
      position: relative;
    }

    .header-brand::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .brand-content {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      gap: 1rem;
      transition: transform 0.2s ease, opacity 0.2s ease;
      cursor: pointer;
    }

    .brand-content:hover {
      transform: translateY(-2px);
      opacity: 0.9;
    }

    .logo-container {
      position: relative;
    }

    .logo {
      font-size: 2rem;
      font-weight: bold;
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .logo::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.3) 50%, transparent 60%);
      animation: shine 3s infinite;
    }

    @keyframes shine {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .brand-subtitle {
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.9rem;
      font-weight: 500;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }

    .header-logo {
      position: relative;
      filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
    }

    .logo-img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      transition: all 0.3s ease;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      padding: 8px;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .logo-img:hover {
      transform: scale(1.1) rotate(2deg);
      filter: drop-shadow(0 8px 20px rgba(102, 126, 234, 0.8));
      background: rgba(255, 255, 255, 0.2);
    }

    .footer-logo-img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      border-radius: 50%;
      padding: 6px;
      background: rgba(102, 126, 234, 0.1);
      border: 2px solid rgba(102, 126, 234, 0.3);
      transition: all 0.3s ease;
      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));
    }

    .footer-logo-img:hover {
      transform: scale(1.05);
      background: rgba(102, 126, 234, 0.2);
      filter: drop-shadow(0 4px 12px rgba(102, 126, 234, 0.4));
    }

    .nav {
      display: flex;
      gap: 0.5rem;
      list-style: none;
      background: rgba(255, 255, 255, 0.1);
      padding: 0.5rem;
      border-radius: 12px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .nav-item {
      cursor: pointer;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      color: rgba(255, 255, 255, 0.8);
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .nav-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .nav-item:hover::before {
      left: 100%;
    }

    .nav-item:hover,
    .nav-item.active {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .nav-item.active {
      background: rgba(255, 255, 255, 0.25);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.1) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.1rem;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .user-avatar::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      transition: transform 0.6s;
    }

    .user-avatar:hover::before {
      transform: rotate(45deg) translateX(100%);
    }

    .user-avatar:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
    }

    /* Main Content */
    .main {
      padding: 2rem 0;
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* Dashboard Section */
    .dashboard-hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 3rem;
      color: white;
      margin-bottom: 2rem;
    }

    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .dashboard-title {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .dashboard-subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .dashboard-actions {
      display: flex;
      gap: 1rem;
    }

    .action-btn {
      background: rgba(255,255,255,0.2);
      border: 2px solid rgba(255,255,255,0.3);
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .action-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: white;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }

    .stat-card:hover {
      transform: translateY(-5px);
    }

    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .stat-icon.applications {
      background: #e3f2fd;
      color: #1976d2;
    }

    .stat-icon.approvals {
      background: #fff3e0;
      color: #f57c00;
    }

    .stat-icon.finance {
      background: #e8f5e8;
      color: #388e3c;
    }

    .stat-icon.deadlines {
      background: #ffebee;
      color: #d32f2f;
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: #666;
      font-size: 1rem;
    }

    /* Activity Feed */
    .activity-section {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      color: #333;
    }

    .activity-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    .activity-icon.success {
      background: #e8f5e8;
      color: #388e3c;
    }

    .activity-icon.info {
      background: #e3f2fd;
      color: #1976d2;
    }

    .activity-content {
      flex: 1;
    }

    .activity-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .activity-description {
      color: #666;
      font-size: 0.9rem;
    }

    .activity-time {
      color: #999;
      font-size: 0.8rem;
    }

    /* Dark Mode Variables */
    :root {
      --bg-primary: #f8fafc;
      --bg-secondary: #ffffff;
      --bg-tertiary: #f1f5f9;
      --text-primary: #333333;
      --text-secondary: #666666;
      --text-tertiary: #999999;
      --border-color: #e1e5e9;
      --shadow-light: rgba(0,0,0,0.1);
      --shadow-medium: rgba(0,0,0,0.15);
      --accent-color: #667eea;
      --success-bg: #e8f5e8;
      --success-color: #388e3c;
      --warning-bg: #fff3e0;
      --warning-color: #f57c00;
      --error-bg: #ffebee;
      --error-color: #d32f2f;
    }

    [data-theme="dark"] {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #334155;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-tertiary: #94a3b8;
      --border-color: #475569;
      --shadow-light: rgba(0,0,0,0.3);
      --shadow-medium: rgba(0,0,0,0.4);
      --accent-color: #818cf8;
      --success-bg: rgba(34, 197, 94, 0.2);
      --success-color: #4ade80;
      --warning-bg: rgba(245, 158, 11, 0.2);
      --warning-color: #fbbf24;
      --error-bg: rgba(239, 68, 68, 0.2);
      --error-color: #f87171;
    }

    /* Settings Panel */
    .settings-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      display: none;
      backdrop-filter: blur(4px);
    }

    .settings-overlay.show {
      display: block;
    }

    .settings-panel {
      position: fixed;
      top: 0;
      right: -450px;
      width: 450px;
      height: 100vh;
      background: var(--bg-secondary);
      box-shadow: -4px 0 30px var(--shadow-medium);
      transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1001;
      overflow-y: auto;
      border-left: 1px solid var(--border-color);
    }

    .settings-panel.show {
      right: 0;
    }

    .settings-header {
      background: linear-gradient(135deg, var(--accent-color) 0%, #764ba2 100%);
      color: white;
      padding: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .settings-header h2 {
      font-size: 1.4rem;
      font-weight: 600;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .settings-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.8rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }

    .settings-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .settings-content {
      padding: 0;
    }

    .settings-group {
      border-bottom: 1px solid var(--border-color);
    }

    .settings-group:last-child {
      border-bottom: none;
    }

    .settings-group h3 {
      font-size: 1.1rem;
      margin: 0;
      padding: 1.5rem 2rem 1rem 2rem;
      color: var(--text-primary);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-color);
    }

    .settings-icon {
      font-size: 1.2rem;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.25rem 2rem;
      border-bottom: 1px solid var(--border-color);
      transition: background 0.2s ease;
    }

    .setting-item:hover {
      background: var(--bg-tertiary);
    }

    .setting-item:last-child {
      border-bottom: none;
    }

    .setting-info {
      flex: 1;
      margin-right: 1rem;
    }

    .setting-label {
      display: block;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
      font-size: 0.95rem;
    }

    .setting-description {
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    .setting-toggle {
      position: relative;
      width: 52px;
      height: 28px;
      background: var(--border-color);
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      flex-shrink: 0;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }

    .setting-toggle.active {
      background: var(--accent-color);
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }

    .setting-toggle::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .setting-toggle.active::after {
      left: 26px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* Children Controls */
    .children-list {
      padding: 0 2rem;
    }

    .child-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-color);
    }

    .child-item:last-child {
      border-bottom: none;
    }

    .child-avatar {
      position: relative;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
    }

    .child-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .child-initial {
      display: none;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--accent-color), #764ba2);
      color: white;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .child-info {
      flex: 1;
    }

    .child-name {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .child-status {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .child-controls {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .control-btn {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .control-btn:hover {
      background: #5a6fd8;
      transform: translateY(-1px);
    }

    .add-child-btn {
      width: calc(100% - 4rem);
      margin: 1rem 2rem;
      padding: 1rem;
      background: var(--bg-tertiary);
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .add-child-btn:hover {
      border-color: var(--accent-color);
      background: rgba(102, 126, 234, 0.1);
      color: var(--accent-color);
    }

    /* Setting Controls */
    .setup-btn, .export-btn, .reset-btn, .update-btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .setup-btn {
      background: var(--success-bg);
      color: var(--success-color);
    }

    .setup-btn:hover {
      background: var(--success-color);
      color: white;
    }

    .export-btn {
      background: var(--warning-bg);
      color: var(--warning-color);
    }

    .export-btn:hover {
      background: var(--warning-color);
      color: white;
    }

    .reset-btn {
      background: var(--error-bg);
      color: var(--error-color);
    }

    .reset-btn:hover {
      background: var(--error-color);
      color: white;
    }

    .update-btn {
      background: var(--accent-color);
      color: white;
      font-size: 0.8rem;
    }

    .update-btn:hover {
      background: #5a6fd8;
    }

    .setting-select {
      padding: 0.5rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      font-size: 0.85rem;
      cursor: pointer;
    }

    .setting-input-group {
      display: flex;
      align-items: center;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      overflow: hidden;
    }

    .input-prefix {
      padding: 0.5rem 0.75rem;
      background: var(--border-color);
      color: var(--text-secondary);
      font-weight: 500;
      font-size: 0.9rem;
    }

    .setting-input {
      border: none;
      background: transparent;
      padding: 0.5rem;
      color: var(--text-primary);
      font-size: 0.85rem;
      width: 80px;
      outline: none;
    }

    /* Settings Footer */
    .settings-footer {
      padding: 2rem;
      border-top: 1px solid var(--border-color);
      background: var(--bg-tertiary);
    }

    .settings-version {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .settings-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    .settings-actions .btn {
      padding: 0.75rem 1.5rem;
      font-size: 0.9rem;
    }

    /* Dark Mode Component Styles */
    [data-theme="dark"] .header {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    }

    [data-theme="dark"] .stat-card,
    [data-theme="dark"] .activity-section,
    [data-theme="dark"] .application-item,
    [data-theme="dark"] .transaction-item,
    [data-theme="dark"] .budget-item,
    [data-theme="dark"] .modal {
      background: var(--bg-secondary);
      border-color: var(--border-color);
      box-shadow: 0 4px 20px var(--shadow-light);
      color: var(--text-primary);
    }

    [data-theme="dark"] .section-title,
    [data-theme="dark"] .dashboard-title,
    [data-theme="dark"] .stat-label,
    [data-theme="dark"] .activity-title,
    [data-theme="dark"] .app-title,
    [data-theme="dark"] .transaction-title,
    [data-theme="dark"] .budget-category {
      color: var(--text-primary);
    }

    [data-theme="dark"] .stat-value {
      color: var(--text-primary);
    }

    [data-theme="dark"] .activity-description,
    [data-theme="dark"] .app-program,
    [data-theme="dark"] .transaction-date,
    [data-theme="dark"] .child-status {
      color: var(--text-secondary);
    }

    [data-theme="dark"] .footer {
      background: #0f172a;
      color: var(--text-primary);
    }

    [data-theme="dark"] .footer-links a {
      color: var(--text-secondary);
    }

    [data-theme="dark"] .footer-links a:hover {
      color: var(--accent-color);
    }

    [data-theme="dark"] .messages-container {
      background: var(--bg-secondary);
      border-color: var(--border-color);
    }

    [data-theme="dark"] .messages-sidebar {
      background: var(--bg-tertiary);
      border-color: var(--border-color);
    }

    [data-theme="dark"] .sidebar-title,
    [data-theme="dark"] .conv-name,
    [data-theme="dark"] .contact-name {
      color: var(--text-primary);
    }

    [data-theme="dark"] .conv-preview,
    [data-theme="dark"] .conv-title,
    [data-theme="dark"] .contact-status {
      color: var(--text-secondary);
    }

    [data-theme="dark"] .message-text {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    [data-theme="dark"] .message.sent .message-text {
      background: var(--accent-color);
      color: white;
    }

    [data-theme="dark"] .compose-input {
      background: var(--bg-tertiary);
      border-color: var(--border-color);
      color: var(--text-primary);
    }

    [data-theme="dark"] .form-input,
    [data-theme="dark"] .form-select {
      background: var(--bg-tertiary);
      border-color: var(--border-color);
      color: var(--text-primary);
    }

    [data-theme="dark"] .form-label {
      color: var(--text-primary);
    }



    .section-subtitle {
      margin: 0;
      opacity: 0.9;
      font-size: 1rem;
    }


    .quick-stat {
      text-align: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      min-width: 80px;
    }

    .quick-stat.unread {
      background: rgba(255, 193, 7, 0.3);
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.25rem;
    }

    .stat-label {
      font-size: 0.85rem;
      opacity: 0.9;
    }




















    .enhanced-sidebar {
      background: var(--bg-tertiary);
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-controls {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-secondary);
    }

    .search-box {
      position: relative;
      margin-bottom: 1rem;
    }

    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .search-input {
      width: 100%;
      padding: 12px 40px 12px 40px;
      border: 1px solid var(--border-color);
      border-radius: 25px;
      background: var(--bg-tertiary);
      color: var(--text-primary);
      font-size: 0.9rem;
      outline: none;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .clear-search {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      padding: 4px;
      border-radius: 50%;
      display: none;
    }

    .clear-search:hover {
      background: var(--border-color);
    }

    .filter-tabs {
      display: flex;
      gap: 0.5rem;
    }

    .filter-tab {
      flex: 1;
      padding: 8px 16px;
      border: 1px solid var(--border-color);
      border-radius: 20px;
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .filter-tab.active,
    .filter-tab:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .conversation-categories {
      flex: 1;
      overflow-y: auto;
      padding: 1rem 0;
      height: 0;
    }

    .category-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1.5rem;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.9rem;
      position: sticky;
      top: 0;
    }

    .category-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .category-count {
      background: var(--accent-color);
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .conversation-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
      border-bottom: 1px solid var(--border-color);
    }

    .conversation-item:hover {
      background: var(--bg-secondary);
    }

    .conversation-item.active {
      background: rgba(102, 126, 234, 0.1);
      border-left: 3px solid var(--accent-color);
    }

    .conv-avatar {
      position: relative;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
      background: linear-gradient(135deg, var(--accent-color), #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .conv-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-fallback {
      color: white;
      font-weight: bold;
      font-size: 1.1rem;
    }

    .conv-avatar.online::after {
      content: '';
      position: absolute;
      bottom: 2px;
      right: 2px;
      width: 12px;
      height: 12px;
      background: #4ade80;
      border: 2px solid var(--bg-secondary);
      border-radius: 50%;
    }

    .online-indicator {
      position: absolute;
      bottom: 2px;
      right: 2px;
      width: 12px;
      height: 12px;
      background: #4ade80;
      border: 2px solid var(--bg-secondary);
      border-radius: 50%;
    }

    .conv-info {
      flex: 1;
      min-width: 0;
    }

    .conv-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.25rem;
    }

    .conv-name {
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.95rem;
    }

    .conv-time {
      font-size: 0.75rem;
      color: var(--text-tertiary);
    }

    .conv-title {
      font-size: 0.8rem;
      color: var(--accent-color);
      margin-bottom: 0.25rem;
      font-weight: 500;
    }

    .conv-preview {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .preview-text {
      font-size: 0.85rem;
      color: var(--text-secondary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .conv-indicators {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-left: 0.5rem;
    }

    .important-indicator {
      color: #fbbf24;
      font-size: 0.9rem;
    }

    .unread-badge {
      background: var(--accent-color);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .sidebar-actions {
      padding: 1.5rem;
      border-top: 1px solid var(--border-color);
      background: var(--bg-secondary);
      display: flex;
      gap: 1rem;
    }

    .action-button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .action-button.primary {
      background: var(--accent-color);
      color: white;
    }

    .action-button.primary:hover {
      background: #5a6fd8;
      transform: translateY(-2px);
    }

    .action-button.secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }

    .action-button.secondary:hover {
      background: var(--border-color);
    }

    .enhanced-main-chat {
      display: flex;
      flex-direction: column;
      background: var(--bg-secondary);
      min-height: 0;
      flex: 1;
      overflow: hidden;
    }

    .enhanced-message-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-secondary);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .contact-avatar-large {
      position: relative;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      overflow: hidden;
      background: linear-gradient(135deg, var(--accent-color), #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .contact-avatar-large img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-fallback-large {
      color: white;
      font-weight: bold;
      font-size: 1.3rem;
    }

    .contact-avatar-large.online::after {
      content: '';
      position: absolute;
      bottom: 2px;
      right: 2px;
      width: 16px;
      height: 16px;
      background: #4ade80;
      border: 3px solid var(--bg-secondary);
      border-radius: 50%;
    }

    .online-indicator-large {
      position: absolute;
      bottom: 2px;
      right: 2px;
      width: 16px;
      height: 16px;
      background: #4ade80;
      border: 3px solid var(--bg-secondary);
      border-radius: 50%;
    }

    .contact-details {
      flex: 1;
    }

    .contact-name-large {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .contact-title {
      font-size: 0.9rem;
      color: var(--accent-color);
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .contact-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
    }

    .status-indicator {
      font-size: 0.7rem;
    }

    .status-indicator.online {
      color: #4ade80;
    }

    .status-text {
      color: var(--text-primary);
      font-weight: 500;
    }

    .last-seen {
      color: var(--text-tertiary);
    }

    .header-actions {
      display: flex;
      gap: 0.5rem;
    }

    .header-btn {
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 50%;
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }

    .header-btn:hover {
      background: var(--accent-color);
      color: white;
      transform: scale(1.05);
    }

    .enhanced-message-thread {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background: var(--bg-primary);
      height: 0;
    }

    .date-separator {
      text-align: center;
      margin: 1rem 0;
    }

    .date-text {
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .system-message {
      text-align: center;
      padding: 1rem;
      background: rgba(102, 126, 234, 0.1);
      border-radius: 12px;
      color: var(--text-secondary);
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin: 1rem 0;
    }

    .enhanced-message {
      display: flex;
      margin-bottom: 1rem;
      gap: 0.75rem;
    }

    .enhanced-message.sent {
      flex-direction: row-reverse;
    }

    .message-avatar-container {
      flex-shrink: 0;
    }

    .message-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-color), #764ba2);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .message-bubble-container {
      flex: 1;
      max-width: 70%;
      position: relative;
    }

    .enhanced-message.sent .message-bubble-container {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }

    .message-bubble {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 18px;
      padding: 1rem 1.25rem;
      position: relative;
      word-wrap: break-word;
      box-shadow: 0 2px 8px var(--shadow-light);
    }

    .enhanced-message.sent .message-bubble {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .message-content {
      margin-bottom: 0.5rem;
    }

    .message-text {
      line-height: 1.5;
      font-size: 0.95rem;
    }

    .message-attachment {
      margin-top: 0.75rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .attachment-icon {
      font-size: 1.5rem;
    }

    .attachment-info {
      flex: 1;
    }

    .attachment-name {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .attachment-size {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }

    .attachment-download {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .attachment-download:hover {
      background: #5a6fd8;
      transform: scale(1.05);
    }

    .message-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
    }

    .message-time {
      font-size: 0.75rem;
      color: var(--text-tertiary);
    }

    .enhanced-message.sent .message-time {
      color: rgba(255, 255, 255, 0.8);
    }

    .message-reactions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .reaction {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 4px 8px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .reaction:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .add-reaction {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 50%;
      width: 28px;
      height: 28px;
      cursor: pointer;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .add-reaction:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .message-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .status-icon.delivered {
      color: #4ade80;
      font-weight: bold;
    }

    .message-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .enhanced-message:hover .message-actions {
      opacity: 1;
    }

    .msg-action {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .msg-action:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .typing-indicator {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .typing-bubble {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 18px;
      padding: 1rem 1.25rem;
      box-shadow: 0 2px 8px var(--shadow-light);
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .typing-dots span {
      width: 8px;
      height: 8px;
      background: var(--text-secondary);
      border-radius: 50%;
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
    .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

    @keyframes typing {
      0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .enhanced-compose-area {
      border-top: 1px solid var(--border-color);
      background: var(--bg-secondary);
      padding: 1.5rem 2rem;
    }

    .compose-toolbar {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-color);
    }

    .toolbar-btn {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    .toolbar-btn:hover {
      background: var(--accent-color);
      color: white;
      transform: scale(1.05);
    }

    .compose-input-container {
      display: flex;
      align-items: flex-end;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .enhanced-compose-input {
      flex: 1;
      border: 2px solid var(--border-color);
      border-radius: 24px;
      padding: 12px 20px;
      background: var(--bg-tertiary);
      color: var(--text-primary);
      font-size: 0.95rem;
      resize: none;
      outline: none;
      transition: all 0.3s ease;
      font-family: inherit;
      line-height: 1.5;
      max-height: 120px;
    }

    .enhanced-compose-input:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .send-button {
      width: 48px;
      height: 48px;
      border: none;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .send-button:hover {
      background: #5a6fd8;
      transform: scale(1.05);
    }

    .send-button:disabled {
      background: var(--border-color);
      cursor: not-allowed;
      transform: none;
    }

    .compose-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
    }

    .character-count {
      color: var(--text-tertiary);
    }

    .compose-options {
      display: flex;
      gap: 1.5rem;
    }

    .option-checkbox {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      color: var(--text-secondary);
    }

    .option-checkbox input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: var(--accent-color);
    }

    .checkbox-label {
      font-size: 0.85rem;
      user-select: none;
    }

    .message-templates {
      position: fixed;
      bottom: 120px;
      right: 2rem;
      width: 300px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      box-shadow: 0 8px 32px var(--shadow-medium);
      z-index: 1000;
      overflow: hidden;
    }

    .templates-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-color);
    }

    .templates-title {
      font-weight: 600;
      color: var(--text-primary);
    }

    .close-templates {
      background: none;
      border: none;
      font-size: 1.2rem;
      color: var(--text-secondary);
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
    }

    .close-templates:hover {
      background: var(--border-color);
    }

    .templates-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      padding: 1.5rem;
    }

    .template-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .template-item:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .template-icon {
      font-size: 1.5rem;
    }

    .template-name {
      font-size: 0.85rem;
      font-weight: 500;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .advanced-messages-container {
        height: 75vh;
        min-height: 650px;
      }
      
      .messages-content-wrapper {
        grid-template-columns: 320px 1fr;
      }
    }

    @media (max-width: 968px) {
      .advanced-messages-container {
        height: 70vh;
        min-height: 600px;
        position: relative;
      }
      
      .messages-content-wrapper {
        grid-template-columns: 1fr;
      }
      
      .enhanced-sidebar {
        position: absolute;
        left: -100%;
        top: 0;
        width: 320px;
        height: 100%;
        z-index: 1000;
        transition: left 0.3s ease;
        box-shadow: 4px 0 20px rgba(0,0,0,0.1);
        display: flex;
      }

      .enhanced-sidebar.show {
        left: 0;
      }

      .mobile-sidebar-toggle {
        display: flex !important;
      }

      .quick-stats {
        flex-direction: column;
        gap: 1rem;
      }

      .messages-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
        padding: 1.5rem;
      }

      .enhanced-message-thread {
        padding: 1rem;
        min-height: 300px;
        flex: 1;
      }

      .enhanced-compose-area {
        padding: 1rem;
        flex-shrink: 0;
      }

      .message-bubble-container {
        max-width: 85%;
      }

      .message-templates {
        right: 1rem;
        left: 1rem;
        width: auto;
      }

      /* Overlay for mobile sidebar */
      .sidebar-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        display: none;
        backdrop-filter: blur(2px);
      }

      .sidebar-overlay.show {
        display: block;
      }
    }

    @media (max-width: 768px) {
      .advanced-messages-container {
        height: 65vh;
        min-height: 550px;
      }

      .messages-header {
        padding: 1rem;
      }

      .enhanced-message-thread {
        padding: 0.75rem;
        min-height: 250px;
      }

      .enhanced-compose-area {
        padding: 0.75rem;
      }

      .compose-toolbar {
        gap: 0.25rem;
      }

      .toolbar-btn {
        width: 36px;
        height: 36px;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      .advanced-messages-container {
        height: 60vh;
        min-height: 500px;
      }

      .messages-header {
        padding: 0.75rem;
      }

      .quick-stats {
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.75rem;
      }

      .quick-stat {
        min-width: 60px;
        padding: 0.75rem;
      }

      .enhanced-message-thread {
        padding: 0.5rem;
        min-height: 200px;
      }

      .enhanced-compose-area {
        padding: 0.5rem;
      }

      .compose-toolbar {
        flex-wrap: wrap;
        gap: 0.25rem;
        padding-bottom: 0.75rem;
      }

      .toolbar-btn {
        width: 32px;
        height: 32px;
        font-size: 0.85rem;
      }

      .enhanced-compose-input {
        font-size: 0.9rem;
        padding: 10px 16px;
      }

      .send-button {
        width: 44px;
        height: 44px;
        font-size: 1.1rem;
      }
    }

    /* Floating Settings Button */
    .settings-fab {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 60px;
      height: 60px;
      background: #667eea;
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
      z-index: 999;
    }

    .settings-fab:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
    }

    /* Temporary Development Link */
    .temp-dev-link {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      padding: 12px 18px;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      color: white;
      text-decoration: none;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 600;
      box-shadow: 0 4px 20px rgba(255, 107, 107, 0.4);
      transition: all 0.3s ease;
      z-index: 999;
      border: 2px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }

    .temp-dev-link:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 30px rgba(255, 107, 107, 0.6);
      color: white;
      text-decoration: none;
    }

    .temp-dev-link:active {
      transform: translateY(-1px) scale(1.02);
    }

    /* Temporary Navigation Item */
    .temp-nav-item {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      border-radius: 8px;
      margin-left: 8px;
      animation: pulse 2s infinite;
    }

    .temp-nav-item:hover {
      background: linear-gradient(135deg, #ee5a24 0%, #c44569 100%);
      transform: scale(1.05);
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.4);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(255, 107, 107, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(255, 107, 107, 0);
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .nav {
        display: none;
      }

      .dashboard-header {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
      }

      .dashboard-actions {
        flex-wrap: wrap;
        justify-content: center;
      }

      .dashboard-title {
        font-size: 2rem;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .settings-panel {
        width: 100%;
        right: -100%;
      }

      .settings-fab {
        bottom: 1rem;
        right: 1rem;
      }

      .temp-dev-link {
        bottom: 1rem;
        left: 1rem;
        padding: 10px 14px;
        font-size: 12px;
      }
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.7);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #333;
    }

    .form-input,
    .form-select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }

    .form-input:focus,
    .form-select:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #5a6fd8;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: #6c757d;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .btn-group {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }

    /* Footer Styles */
    .footer {
      background: #2d3748;
      color: white;
      margin-top: 4rem;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      padding: 3rem 0;
    }

    .footer-section {
      padding: 0 1rem;
    }

    .footer-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
      color: #667eea;
    }

    .footer-heading {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #e2e8f0;
    }

    .footer-description {
      color: #a0aec0;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .footer-social {
      display: flex;
      gap: 1rem;
    }

    .social-link {
      display: inline-block;
      width: 40px;
      height: 40px;
      background: #4a5568;
      color: white;
      text-align: center;
      line-height: 40px;
      border-radius: 50%;
      text-decoration: none;
      transition: all 0.3s;
    }

    .social-link:hover {
      background: #667eea;
      transform: translateY(-2px);
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.5rem;
    }

    .footer-links a {
      color: #a0aec0;
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: #667eea;
    }

    .footer-logo {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      filter: drop-shadow(0 4px 8px rgba(102, 126, 234, 0.3));
    }

    .link-icon {
      width: 16px;
      height: 16px;
      margin-right: 0.5rem;
      transition: transform 0.2s;
    }

    .footer-links a {
      display: flex;
      align-items: center;
    }

    .footer-links a:hover .link-icon {
      transform: translateX(3px);
    }

    .social-link svg {
      width: 20px;
      height: 20px;
    }

    .footer-bottom {
      border-top: 1px solid #4a5568;
      padding: 2rem 0;
      text-align: center;
      color: #a0aec0;
    }

    .footer-bottom p {
      margin-bottom: 0.5rem;
    }

    @media (max-width: 768px) {
      .footer-content {
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .header-brand {
        flex-direction: column;
        gap: 0.25rem;
      }

      .brand-content {
        flex-direction: column;
        text-align: center;
      }

      .nav {
        display: none;
      }

      .header-content {
        flex-direction: column;
        gap: 1rem;
      }
    }

    /* Applications Styles */
    .applications-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .application-item {
      background: white;
      border: 1px solid #e1e5e9;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .application-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1rem;
    }

    .app-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 0.25rem;
    }

    .app-program {
      color: #666;
      font-size: 0.9rem;
    }

    .app-status {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-submitted {
      background: #e8f5e8;
      color: #388e3c;
    }

    .status-progress {
      background: #fff3e0;
      color: #f57c00;
    }

    .status-action {
      background: #ffebee;
      color: #d32f2f;
    }

    .app-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .app-detail {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .detail-label {
      font-size: 0.8rem;
      color: #666;
      font-weight: 500;
    }

    .detail-value {
      font-weight: 600;
      color: #333;
    }

    .app-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .btn-small {
      padding: 8px 16px;
      font-size: 0.9rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
      background: #667eea;
      color: white;
    }

    .btn-small:hover {
      transform: translateY(-1px);
      background: #5a6fd8;
    }

    .btn-small.btn-secondary {
      background: #6c757d;
    }

    .btn-small.btn-secondary:hover {
      background: #5a6268;
    }

    /* Finance Styles */
    .finance-section {
      margin-top: 2rem;
    }

    .section-subtitle {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: #333;
    }

    .transactions-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .transaction-item {
      background: white;
      border: 1px solid #e1e5e9;
      border-radius: 12px;
      padding: 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      transition: all 0.3s;
    }

    .transaction-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }

    .transaction-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .transaction-icon.success {
      background: #e8f5e8;
      color: #388e3c;
    }

    .transaction-icon.pending {
      background: #fff3e0;
      color: #f57c00;
    }

    .transaction-info {
      flex: 1;
    }

    .transaction-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 0.25rem;
    }

    .transaction-date {
      font-size: 0.85rem;
      color: #666;
    }

    .transaction-amount {
      font-size: 1.1rem;
      font-weight: bold;
      margin-right: 1rem;
    }

    .transaction-amount.success {
      color: #d32f2f;
    }

    .transaction-amount.pending {
      color: #f57c00;
    }

    .transaction-status {
      font-size: 0.85rem;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-weight: 500;
      background: #e8f5e8;
      color: #388e3c;
    }

    .budget-categories {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .budget-item {
      background: white;
      border: 1px solid #e1e5e9;
      border-radius: 12px;
      padding: 1.5rem;
    }

    .budget-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .budget-category {
      font-weight: 600;
      color: #333;
    }

    .budget-amount {
      font-weight: 600;
      color: #667eea;
    }

    .budget-bar {
      width: 100%;
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
    }

    .budget-progress {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    /* Messages Styles */
    .messages-container {
      display: grid;
      grid-template-columns: 350px 1fr;
      height: 600px;
      border: 1px solid #e1e5e9;
      border-radius: 16px;
      overflow: hidden;
      background: white;
    }

    .messages-sidebar {
      background: #f8fafc;
      border-right: 1px solid #e1e5e9;
      overflow-y: auto;
    }

    .sidebar-title {
      padding: 1.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
      border-bottom: 1px solid #e1e5e9;
      margin: 0;
    }

    .conversation-list {
      padding: 1rem 0;
    }

    .conversation-item {
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
    }

    .conversation-item:hover,
    .conversation-item.active {
      background: white;
    }

    .conv-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #667eea;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .conv-info {
      flex: 1;
      min-width: 0;
    }

    .conv-name {
      font-weight: 600;
      color: #333;
      margin-bottom: 0.25rem;
    }

    .conv-title {
      font-size: 0.8rem;
      color: #667eea;
      margin-bottom: 0.25rem;
    }

    .conv-preview {
      font-size: 0.85rem;
      color: #666;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .conv-badge {
      background: #667eea;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .messages-main {
      display: flex;
      flex-direction: column;
    }

    .message-header {
      padding: 1.5rem;
      border-bottom: 1px solid #e1e5e9;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .message-contact {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .contact-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #667eea;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .contact-name {
      font-weight: 600;
      color: #333;
    }

    .contact-status {
      font-size: 0.85rem;
      color: #666;
    }

    .message-actions {
      display: flex;
      gap: 0.5rem;
    }

    .btn-icon {
      width: 36px;
      height: 36px;
      border: none;
      background: #f8fafc;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .btn-icon:hover {
      background: #e2e8f0;
    }

    .message-thread {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      display: flex;
      gap: 1rem;
      max-width: 80%;
    }

    .message.sent {
      align-self: flex-end;
      flex-direction: row-reverse;
    }

    .message-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #667eea;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.8rem;
      flex-shrink: 0;
    }

    .message-content {
      flex: 1;
    }

    .message-text {
      background: #f8fafc;
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 0.5rem;
      line-height: 1.5;
    }

    .message.sent .message-text {
      background: #667eea;
      color: white;
    }

    .message-time {
      font-size: 0.75rem;
      color: #666;
    }

    .message.sent .message-time {
      text-align: right;
    }

    .message-compose {
      padding: 1.5rem;
      border-top: 1px solid #e1e5e9;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .compose-actions {
      display: flex;
      gap: 0.5rem;
    }

    .compose-input {
      flex: 1;
      padding: 12px;
      border: 1px solid #e1e5e9;
      border-radius: 24px;
      outline: none;
    }

    .compose-input:focus {
      border-color: #667eea;
    }

    .send-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 24px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }

    .send-btn:hover {
      background: #5a6fd8;
    }

    @media (max-width: 768px) {
      .messages-container {
        grid-template-columns: 1fr;
        height: auto;
      }
      
      .messages-sidebar {
        display: none;
      }
    }

    /* ====== MODERN MESSAGES PAGE STYLES ====== */
    
    .messages-page {
      min-height: 100vh;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      display: flex;
      flex-direction: column;
    }

    /* Messages Header */
    .messages-header-modern {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      padding: 2rem 0;
      margin-bottom: 2rem;
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 2rem;
    }

    .title-section .page-title {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin: 0 0 0.5rem 0;
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .title-icon {
      font-size: 2.5rem;
      background: linear-gradient(135deg, var(--accent-color), #667eea);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .page-subtitle {
      color: var(--text-secondary);
      font-size: 1.1rem;
      margin: 0;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .action-button {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .action-button.primary {
      background: linear-gradient(135deg, var(--accent-color), #667eea);
      color: white;
    }

    .action-button.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    .action-button.secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }

    .action-button.secondary:hover {
      background: var(--accent-color);
      color: white;
      transform: translateY(-2px);
    }

    .search-container {
      position: relative;
      min-width: 300px;
    }

    .modern-search {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 3rem;
      border: 1px solid var(--border-color);
      border-radius: 25px;
      background: var(--bg-primary);
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .modern-search:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      color: var(--text-secondary);
    }

    /* Stats Bar */
    .stats-bar {
      max-width: 1400px;
      margin: 1.5rem auto 0;
      padding: 0 2rem;
      display: flex;
      gap: 2rem;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent-color);
    }

    .stat-label {
      font-size: 0.875rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Main Messages Container */
    .messages-container-modern {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
      flex: 1;
      display: grid;
      grid-template-columns: 400px 1fr;
      gap: 2rem;
      min-height: 70vh;
    }

    /* Sidebar */
    .messages-sidebar-modern {
      background: var(--bg-secondary);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      overflow: hidden;
      box-shadow: 0 8px 32px var(--shadow-light);
    }

    .filter-section {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .filter-tabs {
      display: flex;
      gap: 0.5rem;
      background: var(--bg-tertiary);
      padding: 0.25rem;
      border-radius: 12px;
    }

    .filter-tab {
      flex: 1;
      padding: 0.75rem 1rem;
      border: none;
      border-radius: 8px;
      background: transparent;
      color: var(--text-secondary);
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .filter-tab.active,
    .filter-tab:hover {
      background: var(--accent-color);
      color: white;
    }

    /* Conversation Groups */
    .conversation-groups {
      max-height: calc(70vh - 150px);
      overflow-y: auto;
    }

    .conversation-group {
      border-bottom: 1px solid var(--border-color);
    }

    .conversation-group:last-child {
      border-bottom: none;
    }

    .group-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.5rem;
      background: var(--bg-tertiary);
      font-weight: 600;
      color: var(--text-primary);
    }

    .group-icon {
      font-size: 1.2rem;
    }

    .group-title {
      flex: 1;
    }

    .group-count {
      background: var(--accent-color);
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    /* Conversation Cards */
    .conversation-list {
      display: flex;
      flex-direction: column;
    }

    .conversation-card {
      display: flex;
      gap: 1rem;
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border-bottom: 1px solid var(--border-color);
    }

    .conversation-card:last-child {
      border-bottom: none;
    }

    .conversation-card:hover {
      background: var(--bg-tertiary);
    }

    .conversation-card.active {
      background: linear-gradient(135deg, var(--accent-color)10, var(--accent-color)20);
      border-left: 4px solid var(--accent-color);
    }

    .conversation-avatar {
      position: relative;
      width: 48px;
      height: 48px;
      border-radius: 12px;
      overflow: hidden;
      flex-shrink: 0;
    }

    .conversation-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-fallback {
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      color: white;
      font-weight: 600;
      font-size: 0.875rem;
    }

    .status-indicator {
      position: absolute;
      bottom: 2px;
      right: 2px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid var(--bg-secondary);
    }

    .status-indicator.online {
      background: #4ade80;
    }

    .status-indicator.away {
      background: #fbbf24;
    }

    .status-indicator.offline {
      background: #94a3b8;
    }

    .conversation-content {
      flex: 1;
      min-width: 0;
    }

    .conversation-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.25rem;
    }

    .contact-name {
      font-weight: 600;
      color: var(--text-primary);
      margin: 0;
      font-size: 1rem;
    }

    .timestamp {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .contact-role {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin: 0 0 0.5rem 0;
    }

    .last-message {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin: 0 0 0.5rem 0;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .conversation-badges {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .priority-badge {
      font-size: 0.75rem;
      color: var(--accent-color);
      font-weight: 500;
    }

    .unread-count {
      background: #ef4444;
      color: white;
      padding: 0.125rem 0.375rem;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    /* Chat Area */
    .chat-area-modern {
      background: var(--bg-secondary);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 8px 32px var(--shadow-light);
    }

    /* Chat Header */
    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-tertiary);
    }

    .contact-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .contact-avatar-large {
      position: relative;
      width: 56px;
      height: 56px;
      border-radius: 14px;
      overflow: hidden;
    }

    .contact-avatar-large img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-fallback-large {
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      color: white;
      font-weight: 600;
      font-size: 1.125rem;
    }

    .contact-name-large {
      margin: 0 0 0.25rem 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .contact-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin: 0;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .status-dot.online {
      background: #4ade80;
    }

    .chat-actions {
      display: flex;
      gap: 0.5rem;
    }

    .chat-action-btn {
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 12px;
      background: var(--bg-primary);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chat-action-btn:hover {
      background: var(--accent-color);
      color: white;
      transform: translateY(-2px);
    }

    /* Messages Area */
    .messages-area {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-height: 50vh;
    }

    .date-separator {
      text-align: center;
      margin: 1rem 0;
    }

    .date-text {
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      padding: 0.5rem 1rem;
      border-radius: 16px;
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Message Groups */
    .message-group {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .message-group.sent {
      flex-direction: row-reverse;
      margin-left: 20%;
    }

    .message-group.received {
      margin-right: 20%;
    }

    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      overflow: hidden;
      flex-shrink: 0;
      align-self: flex-end;
    }

    .message-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .message-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .message-bubble {
      padding: 1rem 1.25rem;
      border-radius: 18px;
      word-wrap: break-word;
      max-width: 100%;
    }

    .message-group.received .message-bubble {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border-bottom-left-radius: 6px;
    }

    .message-group.sent .message-bubble {
      background: linear-gradient(135deg, var(--accent-color), #667eea);
      color: white;
      border-bottom-right-radius: 6px;
    }

    .message-bubble p {
      margin: 0;
      line-height: 1.5;
    }

    .message-meta {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    .message-group.sent .message-meta {
      justify-content: flex-end;
    }

    .message-reactions {
      display: flex;
      gap: 0.25rem;
      margin-top: 0.5rem;
    }

    .reaction-btn {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .reaction-btn.active {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .add-reaction-btn {
      background: var(--bg-tertiary);
      border: 1px dashed var(--border-color);
      border-radius: 16px;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      color: var(--text-secondary);
      transition: all 0.3s ease;
    }

    .add-reaction-btn:hover {
      background: var(--accent-color);
      color: white;
    }

    /* Attachment Styles */
    .attachment-container {
      margin-top: 0.75rem;
    }

    .attachment-card {
      display: flex;
      align-items: center;
      gap: 1rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 1rem;
    }

    .attachment-icon {
      font-size: 1.5rem;
    }

    .attachment-info h4 {
      margin: 0 0 0.25rem 0;
      font-size: 0.875rem;
      font-weight: 600;
    }

    .attachment-details {
      margin: 0;
      font-size: 0.75rem;
      opacity: 0.8;
    }

    .attachment-download {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 8px;
      padding: 0.5rem;
      cursor: pointer;
      color: inherit;
      transition: all 0.3s ease;
    }

    .attachment-download:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* Typing Indicator */
    .typing-indicator {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .typing-animation {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .typing-bubble {
      background: var(--bg-tertiary);
      border-radius: 18px;
      border-bottom-left-radius: 6px;
      padding: 1rem 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .typing-dots {
      display: flex;
      gap: 0.25rem;
    }

    .typing-dots span {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--text-secondary);
      animation: typing 1.5s infinite;
    }

    .typing-dots span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dots span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.4;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    .typing-text {
      font-size: 0.875rem;
      color: var(--text-secondary);
      font-style: italic;
    }

    /* Compose Area */
    .compose-area-modern {
      border-top: 1px solid var(--border-color);
      background: var(--bg-primary);
    }

    .compose-toolbar {
      display: flex;
      justify-content: space-between;
      padding: 1rem 1.5rem 0.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .toolbar-left,
    .toolbar-right {
      display: flex;
      gap: 0.5rem;
    }

    .toolbar-btn,
    .formatting-btn {
      width: 36px;
      height: 36px;
      border: none;
      border-radius: 8px;
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .toolbar-btn:hover,
    .formatting-btn:hover {
      background: var(--accent-color);
      color: white;
    }

    .formatting-btn .format-icon {
      font-weight: 600;
      font-size: 0.875rem;
    }

    /* Message Input */
    .compose-input-container {
      padding: 1rem 1.5rem 1.5rem;
    }

    .input-wrapper {
      display: flex;
      gap: 1rem;
      align-items: flex-end;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 1rem;
    }

    .message-input-modern {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text-primary);
      font-size: 1rem;
      resize: none;
      outline: none;
      min-height: 20px;
      max-height: 120px;
      font-family: inherit;
    }

    .message-input-modern::placeholder {
      color: var(--text-secondary);
    }

    .send-button-modern {
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 12px;
      background: var(--accent-color);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
    }

    .send-button-modern:disabled {
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      cursor: not-allowed;
    }

    .send-button-modern:not(:disabled):hover {
      background: #5a6acf;
      transform: translateY(-2px);
    }

    /* Message Options */
    .message-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
    }

    .options-left {
      display: flex;
      gap: 1rem;
    }

    .option-toggle {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .option-toggle input[type="checkbox"] {
      margin: 0;
    }

    .char-counter {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    /* Quick Actions Panel */
    .quick-actions-panel {
      position: fixed;
      top: 50%;
      right: -350px;
      transform: translateY(-50%);
      width: 320px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      box-shadow: 0 20px 60px var(--shadow-medium);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .quick-actions-panel.show {
      right: 2rem;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .panel-header h3 {
      margin: 0;
      color: var(--text-primary);
    }

    .panel-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-secondary);
    }

    .quick-actions-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      padding: 1.5rem;
    }

    .quick-action {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      background: var(--bg-tertiary);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quick-action:hover {
      background: var(--accent-color);
      color: white;
      transform: translateY(-2px);
    }

    .action-emoji {
      font-size: 1.5rem;
    }

    .action-text {
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .messages-container-modern {
        grid-template-columns: 350px 1fr;
        gap: 1.5rem;
      }
      
      .header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 1.5rem;
      }
      
      .search-container {
        min-width: 250px;
      }
    }

    @media (max-width: 968px) {
      .messages-container-modern {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .messages-sidebar-modern {
        display: none;
      }
      
      .header-content {
        padding: 0 1rem;
      }
      
      .stats-bar {
        padding: 0 1rem;
      }
      
      .messages-container-modern {
        padding: 0 1rem;
      }
    }

    @media (max-width: 768px) {
      .header-actions {
        flex-direction: column;
        width: 100%;
        gap: 1rem;
      }
      
      .search-container {
        min-width: 100%;
      }
      
      .message-group.sent {
        margin-left: 10%;
      }
      
      .message-group.received {
        margin-right: 10%;
      }
      
      .compose-toolbar {
        padding: 0.75rem 1rem 0.5rem;
      }
      
      .toolbar-left,
      .toolbar-right {
        gap: 0.25rem;
      }
      
      .toolbar-btn,
      .formatting-btn {
        width: 32px;
        height: 32px;
      }
    }

    @media (max-width: 480px) {
      .messages-header-modern {
        padding: 1.5rem 0;
      }
      
      .title-section .page-title {
        font-size: 2rem;
      }
      
      .stats-bar {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .message-group.sent,
      .message-group.received {
        margin-left: 0;
        margin-right: 0;
      }
      
      .input-wrapper {
        padding: 0.75rem;
      }
      
      .quick-actions-panel {
        width: calc(100vw - 2rem);
        right: -100vw;
      }
      
      .quick-actions-panel.show {
        right: 1rem;
      }
    }

    /* ====== MODAL STYLES ====== */
    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s ease;
    }

    .modal.show {
      display: flex !important;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background-color: white;
      margin: auto;
      padding: 0;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      animation: slideIn 0.3s ease;
    }

    .modal-content.large {
      max-width: 800px;
    }

    .modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 12px 12px 0 0;
    }

    .modal-header h3 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
    }

    .modal-body {
      padding: 24px;
    }

    .close {
      color: white;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.2s;
    }

    .close:hover {
      opacity: 1;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: #374151;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 10px 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.2s, box-shadow 0.2s;
      box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .form-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px solid #e5e7eb;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .btn-secondary {
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #d1d5db;
    }

    .btn-secondary:hover {
      background: #e5e7eb;
    }

    .activity-filters {
      background: #f9fafb;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .activity-filters h4 {
      margin: 0 0 16px 0;
      color: #374151;
    }

    .filter-group {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 16px;
    }

    .filter-group label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      cursor: pointer;
    }

    .date-range {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 16px;
    }

    .date-range label {
      font-size: 14px;
      color: #374151;
    }

    .date-range input {
      padding: 6px 10px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
    }

    .activities-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .activity-item {
      padding: 16px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-bottom: 12px;
      background: white;
    }

    .activity-item:last-child {
      margin-bottom: 0;
    }

    .activity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .activity-type {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
    }

    .activity-type.applications {
      background: #dbeafe;
      color: #1e40af;
    }

    .activity-type.messages {
      background: #d1fae5;
      color: #065f46;
    }

    .activity-type.finance {
      background: #fef3c7;
      color: #92400e;
    }

    .activity-type.profile {
      background: #ede9fe;
      color: #6b21a8;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    @keyframes slideIn {
      from { 
        opacity: 0;
        transform: translateY(-20px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideOut {
      from { 
        opacity: 1;
        transform: translateY(0);
      }
      to { 
        opacity: 0;
        transform: translateY(-20px);
      }
    }

    .modal:not(.show) {
      animation: fadeOut 0.3s ease;
    }

    .modal:not(.show) .modal-content {
      animation: slideOut 0.3s ease;
    }

    /* ====== ADVANCED PROFILE PAGE STYLES ====== */
    
    .profile-page {
      min-height: 100vh;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    }

    /* Profile Header */
    .profile-header {
      position: relative;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      overflow: hidden;
    }

    .profile-banner {
      height: 200px;
      position: relative;
      background: linear-gradient(135deg, var(--accent-color) 0%, #667eea 50%, #764ba2 100%);
    }

    .banner-gradient {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.8));
    }

    .profile-actions {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      display: flex;
      gap: 0.5rem;
    }

    .action-btn {
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
    }

    .action-btn:hover {
      background: rgba(255, 255, 255, 1);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .profile-info {
      display: flex;
      align-items: flex-end;
      gap: 2rem;
      padding: 0 2rem 2rem;
      margin-top: -60px;
      position: relative;
      z-index: 10;
    }

    .profile-avatar-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .profile-avatar-large {
      position: relative;
      width: 120px;
      height: 120px;
      border-radius: 24px;
      overflow: hidden;
      border: 4px solid var(--bg-secondary);
      background: var(--bg-secondary);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .profile-avatar-large img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-fallback-profile {
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      color: white;
      font-weight: 700;
      font-size: 2rem;
    }

    .avatar-edit-btn {
      position: absolute;
      bottom: -8px;
      right: -8px;
      width: 36px;
      height: 36px;
      border: none;
      border-radius: 50%;
      background: var(--accent-color);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .avatar-edit-btn:hover {
      background: #5a6acf;
      transform: scale(1.1);
    }

    .verification-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: #10b981;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 600;
    }

    .badge-icon {
      font-size: 1rem;
    }

    .profile-details {
      flex: 1;
    }

    .profile-name {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 0 0 0.5rem 0;
    }

    .profile-title {
      font-size: 1.25rem;
      color: var(--text-secondary);
      margin: 0 0 1rem 0;
    }

    .profile-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .meta-icon {
      font-size: 1rem;
    }

    .profile-stats {
      display: flex;
      gap: 1.5rem;
    }

    .stat-card {
      text-align: center;
      padding: 1rem;
      background: var(--bg-tertiary);
      border-radius: 12px;
      border: 1px solid var(--border-color);
      min-width: 80px;
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent-color);
      margin-bottom: 0.25rem;
    }

    .stat-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Profile Content */
    .profile-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .profile-section {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px var(--shadow-light);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-color);
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .title-icon {
      font-size: 1.25rem;
    }

    .edit-section-btn,
    .add-child-btn,
    .view-all-btn {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: var(--bg-primary);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .edit-section-btn:hover,
    .add-child-btn:hover,
    .view-all-btn:hover {
      background: var(--accent-color);
      color: white;
      transform: translateY(-1px);
    }

    .add-child-btn {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    .add-child-btn:hover {
      background: #5a6acf;
    }

    .section-content {
      padding: 2rem;
    }

    /* About Section */
    .about-text {
      font-size: 1rem;
      line-height: 1.6;
      color: var(--text-primary);
      margin: 0 0 1.5rem 0;
    }

    .interests-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .interest-tag {
      background: var(--accent-color);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Children Section */
    .children-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .child-card {
      display: flex;
      gap: 1rem;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .child-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px var(--shadow-medium);
    }

    .child-avatar {
      position: relative;
      width: 60px;
      height: 60px;
      border-radius: 12px;
      overflow: hidden;
      flex-shrink: 0;
    }

    .child-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .child-avatar-fallback {
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      color: white;
      font-weight: 600;
      font-size: 1rem;
    }

    .child-info {
      flex: 1;
    }

    .child-name {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 0 0.25rem 0;
    }

    .child-grade,
    .child-school {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin: 0 0 0.5rem 0;
    }

    .child-achievements {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .achievement-badge {
      background: #10b981;
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .child-actions {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-self: flex-start;
    }

    .child-action-btn {
      padding: 0.5rem 1rem;
      border: 1px solid var(--accent-color);
      border-radius: 6px;
      background: var(--accent-color);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.875rem;
      font-weight: 500;
      min-width: 70px;
    }

    .child-action-btn.secondary {
      background: transparent;
      color: var(--accent-color);
    }

    .child-action-btn:hover {
      background: #5a6acf;
      border-color: #5a6acf;
      color: white;
    }

    /* Contact Section */
    .contact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .contact-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .contact-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px var(--shadow-light);
    }

    .contact-icon {
      font-size: 1.5rem;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      color: white;
      border-radius: 12px;
      flex-shrink: 0;
    }

    .contact-details {
      flex: 1;
    }

    .contact-label {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-bottom: 0.25rem;
    }

    .contact-value {
      font-size: 1rem;
      color: var(--text-primary);
      font-weight: 500;
    }

    .contact-action {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      background: var(--bg-primary);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.875rem;
    }

    .contact-action:hover {
      background: var(--accent-color);
      color: white;
      border-color: var(--accent-color);
    }

    /* Activity Timeline */
    .activity-timeline {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .activity-item {
      display: flex;
      gap: 1rem;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .activity-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px var(--shadow-light);
    }

    .activity-icon {
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--accent-color);
      color: white;
      border-radius: 50%;
      font-size: 1.25rem;
      flex-shrink: 0;
    }

    .activity-content {
      flex: 1;
    }

    .activity-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 0 0.5rem 0;
    }

    .activity-description {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin: 0 0 0.5rem 0;
      line-height: 1.5;
    }

    .activity-time {
      font-size: 0.75rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    /* Preferences Section */
    .preferences-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .preference-card {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .preference-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px var(--shadow-light);
    }

    .preference-info {
      flex: 1;
    }

    .preference-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 0 0.5rem 0;
    }

    .preference-description {
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin: 0;
      line-height: 1.4;
    }

    .preference-control {
      margin-left: 1rem;
    }

    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #ccc;
      border-radius: 24px;
      transition: 0.3s;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: 0.3s;
    }

    .toggle-switch input:checked + .toggle-slider {
      background: var(--accent-color);
    }

    .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .profile-info {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 1rem;
        margin-top: -40px;
      }

      .profile-name {
        font-size: 2rem;
      }

      .profile-meta {
        justify-content: center;
      }

      .profile-stats {
        justify-content: center;
        flex-wrap: wrap;
      }

      .profile-content {
        padding: 1rem;
      }

      .section-content {
        padding: 1.5rem;
      }

      .children-grid,
      .contact-grid,
      .preferences-grid {
        grid-template-columns: 1fr;
      }

      .profile-actions {
        position: relative;
        top: auto;
        right: auto;
        justify-content: center;
        margin-bottom: 1rem;
      }
    }

    @media (max-width: 480px) {
      .profile-info {
        padding: 0 1rem 1.5rem;
      }

      .profile-avatar-large {
        width: 100px;
        height: 100px;
      }

      .profile-name {
        font-size: 1.75rem;
      }

      .section-header {
        padding: 1rem 1.5rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .child-card,
      .contact-item,
      .activity-item,
      .preference-card {
        padding: 1rem;
      }

      .child-actions {
        flex-direction: row;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="header-brand">
          <a href="/" class="brand-content" style="text-decoration: none; color: inherit;">
            <div class="header-logo">
              <img src="/assets/img/logo.PNG" alt="Flow Logo" class="logo-img">
            </div>
            <div class="logo-container">
              <div class="logo">Flow</div>
              <div class="brand-subtitle">Parent Portal</div>
            </div>
          </a>
        </div>
        <nav>
          <ul class="nav">
            <li class="nav-item active" data-section="dashboard">Dashboard</li>
            <li class="nav-item" data-section="applications">Applications</li>
            <li class="nav-item" data-section="finance">Finance</li>
            <li class="nav-item" data-section="messages">Messages</li>
            <li class="nav-item" data-section="profile">Profile</li>
            <li class="nav-item temp-nav-item">
              <a href="onboarding.html" style="color: inherit; text-decoration: none;">🚀 Onboarding</a>
            </li>
          </ul>
        </nav>
        <div class="user-menu">
          <div class="user-avatar">MP</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <div class="container">
      <!-- Dashboard Section -->
      <section id="dashboard" class="section active">
        <div class="dashboard-hero">
          <div class="dashboard-header">
            <div>
              <h1 class="dashboard-title">Welcome back, Parent!</h1>
              <p class="dashboard-subtitle">Stay updated on your child's university journey</p>
            </div>
            <div class="dashboard-actions">
              <button class="action-btn" onclick="openQuickPayModal()">
                💳 Quick Pay
              </button>
              <button class="action-btn" onclick="openScheduleModal()">
                📅 Schedule
              </button>
              <button class="action-btn" onclick="refreshDashboard()">
                🔄 Refresh
              </button>
            </div>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon applications">📝</div>
            <div class="stat-value">8</div>
            <div class="stat-label">Active Applications</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon approvals">⏳</div>
            <div class="stat-value">3</div>
            <div class="stat-label">Pending Approvals</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon finance">💰</div>
            <div class="stat-value">$2,450</div>
            <div class="stat-label">Total Paid</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon deadlines">⚠️</div>
            <div class="stat-value">5</div>
            <div class="stat-label">Upcoming Deadlines</div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="activity-section">
          <h2 class="section-title">Recent Activity</h2>
          <div class="activity-item">
            <div class="activity-icon success">✓</div>
            <div class="activity-content">
              <div class="activity-title">Payment Approved</div>
              <div class="activity-description">Stanford University application fee - $90</div>
            </div>
            <div class="activity-time">2 hours ago</div>
          </div>
          <div class="activity-item">
            <div class="activity-icon info">📄</div>
            <div class="activity-content">
              <div class="activity-title">Document Submitted</div>
              <div class="activity-description">Personal statement for UC Berkeley</div>
            </div>
            <div class="activity-time">1 day ago</div>
          </div>
          <div class="activity-item">
            <div class="activity-icon success">✓</div>
            <div class="activity-content">
              <div class="activity-title">Interview Scheduled</div>
              <div class="activity-description">Harvard Alumni Interview - Sept 20th</div>
            </div>
            <div class="activity-time">2 days ago</div>
          </div>
        </div>
      </section>

      <!-- Applications Section -->
      <section id="applications" class="section">
        <div class="activity-section">
          <h2 class="section-title">Applications Management</h2>
          
          <!-- Applications Overview -->
          <div class="stats-grid" style="margin-bottom: 2rem;">
            <div class="stat-card">
              <div class="stat-icon applications">📝</div>
              <div class="stat-value">8</div>
              <div class="stat-label">Total Applications</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #fff3e0; color: #f57c00;">⏳</div>
              <div class="stat-value">3</div>
              <div class="stat-label">In Progress</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #e8f5e8; color: #388e3c;">✅</div>
              <div class="stat-value">4</div>
              <div class="stat-label">Submitted</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #ffebee; color: #d32f2f;">⚠️</div>
              <div class="stat-value">1</div>
              <div class="stat-label">Needs Action</div>
            </div>
          </div>

          <!-- Application Actions -->
          <div class="dashboard-actions" style="margin-bottom: 2rem;">
            <button class="action-btn" onclick="addNewApplication()">
              ➕ Add Application
            </button>
            <button class="action-btn" onclick="bulkActions()">
              📋 Bulk Actions
            </button>
            <button class="action-btn" onclick="exportApplications()">
              📄 Export Report
            </button>
          </div>

          <!-- Applications List -->
          <div class="applications-list">
            <div class="application-item">
              <div class="app-header">
                <div class="app-info">
                  <h3 class="app-title">Stanford University</h3>
                  <p class="app-program">Computer Science - Undergraduate</p>
                </div>
                <div class="app-status status-submitted">Submitted</div>
              </div>
              <div class="app-details">
                <div class="app-detail">
                  <span class="detail-label">Application Fee:</span>
                  <span class="detail-value">$90 (Paid)</span>
                </div>
                <div class="app-detail">
                  <span class="detail-label">Deadline:</span>
                  <span class="detail-value">Jan 5, 2024</span>
                </div>
                <div class="app-detail">
                  <span class="detail-label">Status:</span>
                  <span class="detail-value">Under Review</span>
                </div>
              </div>
              <div class="app-actions">
                <button class="btn-small" onclick="viewApplication('stanford')">View Details</button>
                <button class="btn-small btn-secondary" onclick="trackApplication('stanford')">Track Status</button>
              </div>
            </div>

            <div class="application-item">
              <div class="app-header">
                <div class="app-info">
                  <h3 class="app-title">Harvard University</h3>
                  <p class="app-program">Business Administration - Undergraduate</p>
                </div>
                <div class="app-status status-progress">In Progress</div>
              </div>
              <div class="app-details">
                <div class="app-detail">
                  <span class="detail-label">Application Fee:</span>
                  <span class="detail-value">$75 (Pending)</span>
                </div>
                <div class="app-detail">
                  <span class="detail-label">Deadline:</span>
                  <span class="detail-value">Jan 1, 2024</span>
                </div>
                <div class="app-detail">
                  <span class="detail-label">Completion:</span>
                  <span class="detail-value">75%</span>
                </div>
              </div>
              <div class="app-actions">
                <button class="btn-small" onclick="continueApplication('harvard')">Continue</button>
                <button class="btn-small btn-secondary" onclick="payFee('harvard')">Pay Fee</button>
              </div>
            </div>

            <div class="application-item">
              <div class="app-header">
                <div class="app-info">
                  <h3 class="app-title">UC Berkeley</h3>
                  <p class="app-program">Engineering - Undergraduate</p>
                </div>
                <div class="app-status status-action">Needs Action</div>
              </div>
              <div class="app-details">
                <div class="app-detail">
                  <span class="detail-label">Application Fee:</span>
                  <span class="detail-value">$70 (Paid)</span>
                </div>
                <div class="app-detail">
                  <span class="detail-label">Deadline:</span>
                  <span class="detail-value">Nov 30, 2023</span>
                </div>
                <div class="app-detail">
                  <span class="detail-label">Issue:</span>
                  <span class="detail-value">Missing Transcript</span>
                </div>
              </div>
              <div class="app-actions">
                <button class="btn-small" onclick="resolveIssue('berkeley')">Resolve Issue</button>
                <button class="btn-small btn-secondary" onclick="contactSupport('berkeley')">Contact Support</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Finance Section -->
      <section id="finance" class="section">
        <div class="activity-section">
          <h2 class="section-title">Financial Management</h2>
          
          <!-- Financial Overview -->
          <div class="stats-grid" style="margin-bottom: 2rem;">
            <div class="stat-card">
              <div class="stat-icon finance">💰</div>
              <div class="stat-value">$12,450</div>
              <div class="stat-label">Total Spent</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #fff3e0; color: #f57c00;">⏳</div>
              <div class="stat-value">$2,240</div>
              <div class="stat-label">Pending Payments</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #e3f2fd; color: #1976d2;">📊</div>
              <div class="stat-value">$8,500</div>
              <div class="stat-label">Budget Remaining</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon" style="background: #f3e5f5; color: #7b1fa2;">💳</div>
              <div class="stat-value">15</div>
              <div class="stat-label">Transactions</div>
            </div>
          </div>

          <!-- Finance Actions -->
          <div class="dashboard-actions" style="margin-bottom: 2rem;">
            <button class="action-btn" onclick="makePayment()">
              💳 Make Payment
            </button>
            <button class="action-btn" onclick="setupBudget()">
              📊 Setup Budget
            </button>
            <button class="action-btn" onclick="exportFinances()">
              📄 Export Report
            </button>
          </div>

          <!-- Payment History -->
          <div class="finance-section">
            <h3 class="section-subtitle">Recent Transactions</h3>
            <div class="transactions-list">
              <div class="transaction-item">
                <div class="transaction-icon success">✓</div>
                <div class="transaction-info">
                  <div class="transaction-title">Stanford University - Application Fee</div>
                  <div class="transaction-date">September 8, 2024 • 2:30 PM</div>
                </div>
                <div class="transaction-amount success">-$90.00</div>
                <div class="transaction-status">Completed</div>
              </div>

              <div class="transaction-item">
                <div class="transaction-icon success">✓</div>
                <div class="transaction-info">
                  <div class="transaction-title">Harvard University - Application Fee</div>
                  <div class="transaction-date">September 5, 2024 • 10:15 AM</div>
                </div>
                <div class="transaction-amount success">-$75.00</div>
                <div class="transaction-status">Completed</div>
              </div>

              <div class="transaction-item">
                <div class="transaction-icon pending">⏳</div>
                <div class="transaction-info">
                  <div class="transaction-title">UC Berkeley - Enrollment Deposit</div>
                  <div class="transaction-date">September 3, 2024 • 4:45 PM</div>
                </div>
                <div class="transaction-amount pending">-$500.00</div>
                <div class="transaction-status">Processing</div>
              </div>

              <div class="transaction-item">
                <div class="transaction-icon success">✓</div>
                <div class="transaction-info">
                  <div class="transaction-title">SAT Test Registration</div>
                  <div class="transaction-date">August 28, 2024 • 9:20 AM</div>
                </div>
                <div class="transaction-amount success">-$68.00</div>
                <div class="transaction-status">Completed</div>
              </div>
            </div>
          </div>

          <!-- Budget Tracking -->
          <div class="finance-section" style="margin-top: 2rem;">
            <h3 class="section-subtitle">Budget Overview</h3>
            <div class="budget-categories">
              <div class="budget-item">
                <div class="budget-header">
                  <span class="budget-category">Application Fees</span>
                  <span class="budget-amount">$650 / $1,000</span>
                </div>
                <div class="budget-bar">
                  <div class="budget-progress" style="width: 65%"></div>
                </div>
              </div>

              <div class="budget-item">
                <div class="budget-header">
                  <span class="budget-category">Test Fees</span>
                  <span class="budget-amount">$340 / $500</span>
                </div>
                <div class="budget-bar">
                  <div class="budget-progress" style="width: 68%"></div>
                </div>
              </div>

              <div class="budget-item">
                <div class="budget-header">
                  <span class="budget-category">Counseling Services</span>
                  <span class="budget-amount">$1,200 / $2,000</span>
                </div>
                <div class="budget-bar">
                  <div class="budget-progress" style="width: 60%"></div>
                </div>
              </div>

              <div class="budget-item">
                <div class="budget-header">
                  <span class="budget-category">Miscellaneous</span>
                  <span class="budget-amount">$180 / $500</span>
                </div>
                <div class="budget-bar">
                  <div class="budget-progress" style="width: 36%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Advanced Messages Section -->
      <section id="messages" class="section">
        <div class="messages-page">
          <!-- Messages Header -->
          <div class="messages-header-modern">
            <div class="header-content">
              <div class="title-section">
                <h1 class="page-title">
                  <span class="title-icon">💬</span>
                  Messages
                </h1>
                <p class="page-subtitle">Connect with counselors, advisors, and support staff</p>
              </div>
              <div class="header-actions">
                <button class="action-button primary" onclick="composeNewMessage()">
                  <span class="button-icon">✏️</span>
                  Compose
                </button>
                <button class="action-button secondary" onclick="openVideoCall()">
                  <span class="button-icon">📹</span>
                  Video Call
                </button>
                <div class="search-container">
                  <input type="text" class="modern-search" placeholder="Search conversations..." id="globalSearch">
                  <span class="search-icon">🔍</span>
                </div>
              </div>
            </div>
            
            <!-- Quick Stats Bar -->
            <div class="stats-bar">
              <div class="stat-item">
                <span class="stat-number">12</span>
                <span class="stat-label">Unread</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">5</span>
                <span class="stat-label">Active</span>
              </div>
              <div class="stat-item">
                <span class="stat-number">28</span>
                <span class="stat-label">Total</span>
              </div>
            </div>
          </div>

          <!-- Main Messages Container -->
          <div class="messages-container-modern">
            <!-- Sidebar -->
            <div class="messages-sidebar-modern">
              <!-- Filter Tabs -->
              <div class="filter-section">
                <div class="filter-tabs">
                  <button class="filter-tab active" data-filter="all">All</button>
                  <button class="filter-tab" data-filter="unread">Unread</button>
                  <button class="filter-tab" data-filter="priority">Priority</button>
                  <button class="filter-tab" data-filter="archived">Archived</button>
                </div>
              </div>

              <!-- Conversation Categories -->
              <div class="conversation-groups">
                <!-- Admissions Group -->
                <div class="conversation-group">
                  <div class="group-header">
                    <span class="group-icon">🎓</span>
                    <span class="group-title">Admissions</span>
                    <span class="group-count">6</span>
                  </div>
                  <div class="conversation-list">
                    <div class="conversation-card active" data-conversation="sarah">
                      <div class="conversation-avatar">
                        <img src="/assets/img/counselor1.jpg" alt="Sarah" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="avatar-fallback">SM</div>
                        <div class="status-indicator online"></div>
                      </div>
                      <div class="conversation-content">
                        <div class="conversation-header">
                          <h4 class="contact-name">Sarah Martinez</h4>
                          <span class="timestamp">2:30 PM</span>
                        </div>
                        <p class="contact-role">College Counselor • Stanford</p>
                        <p class="last-message">Great progress on your application essays! Let's schedule a review...</p>
                        <div class="conversation-badges">
                          <span class="priority-badge">⭐ Priority</span>
                          <span class="unread-count">3</span>
                        </div>
                      </div>
                    </div>

                    <div class="conversation-card" data-conversation="michael">
                      <div class="conversation-avatar">
                        <img src="/assets/img/counselor2.jpg" alt="Michael" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="avatar-fallback">MD</div>
                        <div class="status-indicator away"></div>
                      </div>
                      <div class="conversation-content">
                        <div class="conversation-header">
                          <h4 class="contact-name">Michael Davis</h4>
                          <span class="timestamp">Yesterday</span>
                        </div>
                        <p class="contact-role">Academic Advisor • MIT</p>
                        <p class="last-message">The scholarship applications are looking strong. Just a few more...</p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Financial Aid Group -->
                <div class="conversation-group">
                  <div class="group-header">
                    <span class="group-icon">💰</span>
                    <span class="group-title">Financial Aid</span>
                    <span class="group-count">4</span>
                  </div>
                  <div class="conversation-list">
                    <div class="conversation-card" data-conversation="jennifer">
                      <div class="conversation-avatar">
                        <img src="/assets/img/advisor1.jpg" alt="Jennifer" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="avatar-fallback">JL</div>
                        <div class="status-indicator offline"></div>
                      </div>
                      <div class="conversation-content">
                        <div class="conversation-header">
                          <h4 class="contact-name">Jennifer Lopez</h4>
                          <span class="timestamp">3 hours ago</span>
                        </div>
                        <p class="contact-role">Financial Aid Officer</p>
                        <p class="last-message">Your FAFSA has been processed successfully. Here are the next steps...</p>
                        <div class="conversation-badges">
                          <span class="unread-count">1</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Support Group -->
                <div class="conversation-group">
                  <div class="group-header">
                    <span class="group-icon">🎯</span>
                    <span class="group-title">Academic Support</span>
                    <span class="group-count">3</span>
                  </div>
                  <div class="conversation-list">
                    <div class="conversation-card" data-conversation="alex">
                      <div class="conversation-avatar">
                        <img src="/assets/img/tutor1.jpg" alt="Alex" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="avatar-fallback">AR</div>
                        <div class="status-indicator online"></div>
                      </div>
                      <div class="conversation-content">
                        <div class="conversation-header">
                          <h4 class="contact-name">Alex Rodriguez</h4>
                          <span class="timestamp">2 days ago</span>
                        </div>
                        <p class="contact-role">Math Tutor</p>
                        <p class="last-message">Ready for our calculus session tomorrow? I've prepared some practice problems...</p>
                        <div class="conversation-badges">
                          <span class="priority-badge">⭐ Priority</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Chat Area -->
            <div class="chat-area-modern">
              <!-- Chat Header -->
              <div class="chat-header">
                <div class="contact-info">
                  <div class="contact-avatar-large">
                    <img src="/assets/img/counselor1.jpg" alt="Sarah" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="avatar-fallback-large">SM</div>
                    <div class="status-indicator online"></div>
                  </div>
                  <div class="contact-details">
                    <h3 class="contact-name-large">Sarah Martinez</h3>
                    <p class="contact-status">
                      <span class="status-dot online"></span>
                      Online • College Counselor at Stanford University
                    </p>
                  </div>
                </div>
                <div class="chat-actions">
                  <button class="chat-action-btn" onclick="startVoiceCall()" title="Voice Call">
                    <span class="action-icon">📞</span>
                  </button>
                  <button class="chat-action-btn" onclick="startVideoCall()" title="Video Call">
                    <span class="action-icon">📹</span>
                  </button>
                  <button class="chat-action-btn" onclick="shareScreen()" title="Share Screen">
                    <span class="action-icon">📺</span>
                  </button>
                  <button class="chat-action-btn" onclick="scheduleAppointment()" title="Schedule Meeting">
                    <span class="action-icon">📅</span>
                  </button>
                  <button class="chat-action-btn" onclick="openChatInfo()" title="Chat Info">
                    <span class="action-icon">ℹ️</span>
                  </button>
                </div>
              </div>

              <!-- Messages Area -->
              <div class="messages-area" id="messagesArea">
                <!-- Date Separator -->
                <div class="date-separator">
                  <span class="date-text">Today</span>
                </div>

                <!-- Message from contact -->
                <div class="message-group received">
                  <div class="message-avatar">
                    <img src="/assets/img/counselor1.jpg" alt="Sarah" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="avatar-fallback">SM</div>
                  </div>
                  <div class="message-content">
                    <div class="message-bubble">
                      <p>Hi! I've reviewed your Stanford application materials and I'm really impressed with the progress you've made! 🎉</p>
                    </div>
                    <div class="message-bubble">
                      <p>Your personal statement has improved significantly since our last revision. The way you've connected your experiences to your academic goals is compelling.</p>
                    </div>
                    <div class="message-meta">
                      <span class="message-time">2:28 PM</span>
                      <div class="message-reactions">
                        <button class="reaction-btn active" onclick="toggleReaction(this, '👍')">
                          👍 <span class="reaction-count">1</span>
                        </button>
                        <button class="reaction-btn" onclick="toggleReaction(this, '❤️')">
                          ❤️
                        </button>
                        <button class="add-reaction-btn" onclick="showReactionPicker(this)">
                          <span class="plus-icon">+</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Message from user -->
                <div class="message-group sent">
                  <div class="message-content">
                    <div class="message-bubble">
                      <p>Thank you so much! Your feedback has been incredibly helpful. I'm excited about the application.</p>
                    </div>
                    <div class="message-bubble">
                      <p>When do you think we'll hear back from Stanford? I'm trying to plan my timeline for other applications too.</p>
                    </div>
                    <div class="message-meta">
                      <span class="message-time">2:32 PM</span>
                      <span class="message-status read">✓✓</span>
                    </div>
                  </div>
                </div>

                <!-- Message with attachment -->
                <div class="message-group received">
                  <div class="message-avatar">
                    <img src="/assets/img/counselor1.jpg" alt="Sarah" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="avatar-fallback">SM</div>
                  </div>
                  <div class="message-content">
                    <div class="message-bubble">
                      <p>Stanford typically releases decisions in late March. In the meantime, let's work on strengthening your backup applications! 📚</p>
                      
                      <!-- File Attachment -->
                      <div class="attachment-container">
                        <div class="attachment-card">
                          <div class="attachment-icon">📄</div>
                          <div class="attachment-info">
                            <h4 class="attachment-name">Backup_Schools_Strategy.pdf</h4>
                            <p class="attachment-details">2.3 MB • PDF Document</p>
                          </div>
                          <button class="attachment-download" onclick="downloadFile('backup-strategy.pdf')">
                            <span class="download-icon">⬇️</span>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="message-meta">
                      <span class="message-time">2:35 PM</span>
                    </div>
                  </div>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                  <div class="message-avatar">
                    <img src="/assets/img/counselor1.jpg" alt="Sarah" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="avatar-fallback">SM</div>
                  </div>
                  <div class="typing-animation">
                    <div class="typing-bubble">
                      <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div>
                      <span class="typing-text">Sarah is typing...</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Compose Area -->
              <div class="compose-area-modern">
                <!-- Compose Toolbar -->
                <div class="compose-toolbar">
                  <div class="toolbar-left">
                    <button class="toolbar-btn" onclick="attachFile()" title="Attach File">
                      <span class="btn-icon">📎</span>
                    </button>
                    <button class="toolbar-btn" onclick="insertEmoji()" title="Add Emoji">
                      <span class="btn-icon">😊</span>
                    </button>
                    <button class="toolbar-btn" onclick="addGif()" title="Add GIF">
                      <span class="btn-icon">🎬</span>
                    </button>
                    <button class="toolbar-btn" onclick="voiceMessage()" title="Voice Message">
                      <span class="btn-icon">🎤</span>
                    </button>
                    <button class="toolbar-btn" onclick="scheduleMessage()" title="Schedule Send">
                      <span class="btn-icon">⏰</span>
                    </button>
                  </div>
                  <div class="toolbar-right">
                    <button class="formatting-btn" onclick="toggleBold()" title="Bold">
                      <span class="format-icon">B</span>
                    </button>
                    <button class="formatting-btn" onclick="toggleItalic()" title="Italic">
                      <span class="format-icon">I</span>
                    </button>
                    <button class="formatting-btn" onclick="addLink()" title="Add Link">
                      <span class="format-icon">🔗</span>
                    </button>
                  </div>
                </div>

                <!-- Message Input -->
                <div class="compose-input-container">
                  <div class="input-wrapper">
                    <textarea 
                      class="message-input-modern" 
                      placeholder="Type your message..." 
                      id="messageInput"
                      rows="1"
                      oninput="handleInputResize(); updateCharCount(); showTypingIndicator();"
                      onkeydown="handleKeyPress(event)"
                    ></textarea>
                    <div class="input-actions">
                      <button class="send-button-modern" onclick="sendMessage()" id="sendButton" disabled>
                        <span class="send-icon">→</span>
                      </button>
                    </div>
                  </div>
                  
                  <!-- Message Options -->
                  <div class="message-options">
                    <div class="options-left">
                      <label class="option-toggle">
                        <input type="checkbox" id="highPriority">
                        <span class="toggle-label">📌 High Priority</span>
                      </label>
                      <label class="option-toggle">
                        <input type="checkbox" id="readReceipt">
                        <span class="toggle-label">👁️ Read Receipt</span>
                      </label>
                    </div>
                    <div class="options-right">
                      <span class="char-counter">
                        <span id="charCount">0</span> / 1000
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Quick Actions Panel -->
            <div class="quick-actions-panel" id="quickActionsPanel">
              <div class="panel-header">
                <h3>Quick Actions</h3>
                <button class="panel-close" onclick="closeQuickActions()">×</button>
              </div>
              <div class="quick-actions-grid">
                <button class="quick-action" onclick="useTemplate('followup')">
                  <span class="action-emoji">📅</span>
                  <span class="action-text">Follow Up</span>
                </button>
                <button class="quick-action" onclick="useTemplate('thank-you')">
                  <span class="action-emoji">🙏</span>
                  <span class="action-text">Thank You</span>
                </button>
                <button class="quick-action" onclick="useTemplate('question')">
                  <span class="action-emoji">❓</span>
                  <span class="action-text">Ask Question</span>
                </button>
                <button class="quick-action" onclick="useTemplate('meeting-request')">
                  <span class="action-emoji">🤝</span>
                  <span class="action-text">Meeting Request</span>
                </button>
                <button class="quick-action" onclick="useTemplate('urgent')">
                  <span class="action-emoji">🚨</span>
                  <span class="action-text">Urgent</span>
                </button>
                <button class="quick-action" onclick="useTemplate('reminder')">
                  <span class="action-emoji">⏰</span>
                  <span class="action-text">Reminder</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Advanced Profile Section -->
      <section id="profile" class="section">
        <div class="profile-page">
          <!-- Profile Header -->
          <div class="profile-header">
            <div class="profile-banner">
              <div class="banner-gradient"></div>
              <div class="profile-actions">
                <button class="action-btn" onclick="editProfile()" title="Edit Profile">
                  <span class="btn-icon">✏️</span>
                </button>
                <button class="action-btn" onclick="shareProfile()" title="Share Profile">
                  <span class="btn-icon">📤</span>
                </button>
                <button class="action-btn" onclick="downloadProfile()" title="Download Profile">
                  <span class="btn-icon">📥</span>
                </button>
              </div>
            </div>
            
            <div class="profile-info">
              <div class="profile-avatar-section">
                <div class="profile-avatar-large">
                  <img src="/assets/img/parent-avatar.jpg" alt="Profile" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                  <div class="avatar-fallback-profile">MP</div>
                  <button class="avatar-edit-btn" onclick="changeAvatar()">
                    <span class="edit-icon">📷</span>
                  </button>
                </div>
                <div class="verification-badge">
                  <span class="badge-icon">✓</span>
                  <span class="badge-text">Verified Parent</span>
                </div>
              </div>
              
              <div class="profile-details">
                <h1 class="profile-name">Maria Petrova</h1>
                <p class="profile-title">Parent & Educational Advocate</p>
                <div class="profile-meta">
                  <div class="meta-item">
                    <span class="meta-icon">📍</span>
                    <span class="meta-text">San Francisco, CA</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-icon">📅</span>
                    <span class="meta-text">Member since 2023</span>
                  </div>
                  <div class="meta-item">
                    <span class="meta-icon">👨‍👩‍👧‍👦</span>
                    <span class="meta-text">2 Children</span>
                  </div>
                </div>
                
                <div class="profile-stats">
                  <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Applications</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Accepted</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">$45K</div>
                    <div class="stat-label">Aid Secured</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number">98%</div>
                    <div class="stat-label">Success Rate</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Profile Content -->
          <div class="profile-content">
            <!-- About Section -->
            <div class="profile-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="title-icon">👤</span>
                  About
                </h2>
                <button class="edit-section-btn" onclick="editAbout()">
                  <span class="edit-icon">✏️</span>
                  Edit
                </button>
              </div>
              <div class="section-content">
                <p class="about-text">
                  Dedicated parent committed to supporting my children's educational journey. With a background in educational consulting, 
                  I actively advocate for student success and help navigate the complex college admissions process. 
                  Passionate about creating opportunities for academic excellence and personal growth.
                </p>
                <div class="interests-tags">
                  <span class="interest-tag">Education</span>
                  <span class="interest-tag">College Planning</span>
                  <span class="interest-tag">STEM Advocacy</span>
                  <span class="interest-tag">Community Service</span>
                  <span class="interest-tag">Student Mentoring</span>
                </div>
              </div>
            </div>

            <!-- Children Information -->
            <div class="profile-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="title-icon">👨‍👩‍👧‍👦</span>
                  Children
                </h2>
                <button class="add-child-btn" onclick="addChild()">
                  <span class="add-icon">+</span>
                  Add Child
                </button>
              </div>
              <div class="section-content">
                <div class="children-grid">
                  <div class="child-card">
                    <div class="child-avatar">
                      <img src="/assets/img/student1.jpg" alt="Alex" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                      <div class="child-avatar-fallback">AP</div>
                    </div>
                    <div class="child-info">
                      <h3 class="child-name">Alex Petrova</h3>
                      <p class="child-grade">Grade 12 • Senior</p>
                      <p class="child-school">Lincoln High School</p>
                      <div class="child-achievements">
                        <span class="achievement-badge">Honor Roll</span>
                        <span class="achievement-badge">Math Olympiad</span>
                      </div>
                    </div>
                    <div class="child-actions">
                      <button class="child-action-btn" onclick="viewChildProfile('alex')">View</button>
                      <button class="child-action-btn secondary" onclick="editChild('alex')">Edit</button>
                    </div>
                  </div>
                  
                  <div class="child-card">
                    <div class="child-avatar">
                      <img src="/assets/img/student2.jpg" alt="Emma" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                      <div class="child-avatar-fallback">EP</div>
                    </div>
                    <div class="child-info">
                      <h3 class="child-name">Emma Petrova</h3>
                      <p class="child-grade">Grade 10 • Sophomore</p>
                      <p class="child-school">Lincoln High School</p>
                      <div class="child-achievements">
                        <span class="achievement-badge">Science Fair Winner</span>
                        <span class="achievement-badge">Drama Club</span>
                      </div>
                    </div>
                    <div class="child-actions">
                      <button class="child-action-btn" onclick="viewChildProfile('emma')">View</button>
                      <button class="child-action-btn secondary" onclick="editChild('emma')">Edit</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contact Information -->
            <div class="profile-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="title-icon">📞</span>
                  Contact Information
                </h2>
                <button class="edit-section-btn" onclick="editContact()">
                  <span class="edit-icon">✏️</span>
                  Edit
                </button>
              </div>
              <div class="section-content">
                <div class="contact-grid">
                  <div class="contact-item">
                    <div class="contact-icon">📧</div>
                    <div class="contact-details">
                      <div class="contact-label">Email</div>
                      <div class="contact-value">maria.petrova@email.com</div>
                    </div>
                    <button class="contact-action" onclick="contactVia('email')">Send Email</button>
                  </div>
                  
                  <div class="contact-item">
                    <div class="contact-icon">📱</div>
                    <div class="contact-details">
                      <div class="contact-label">Phone</div>
                      <div class="contact-value">+1 (555) 123-4567</div>
                    </div>
                    <button class="contact-action" onclick="contactVia('phone')">Call</button>
                  </div>
                  
                  <div class="contact-item">
                    <div class="contact-icon">💼</div>
                    <div class="contact-details">
                      <div class="contact-label">LinkedIn</div>
                      <div class="contact-value">linkedin.com/in/mariapetrova</div>
                    </div>
                    <button class="contact-action" onclick="contactVia('linkedin')">Connect</button>
                  </div>
                  
                  <div class="contact-item">
                    <div class="contact-icon">🏠</div>
                    <div class="contact-details">
                      <div class="contact-label">Address</div>
                      <div class="contact-value">1234 Education Ave, San Francisco, CA 94102</div>
                    </div>
                    <button class="contact-action" onclick="viewMap()">View Map</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Recent Activity -->
            <div class="profile-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="title-icon">📊</span>
                  Recent Activity
                </h2>
                <button class="view-all-btn" onclick="viewAllActivity()">View All</button>
              </div>
              <div class="section-content">
                <div class="activity-timeline">
                  <div class="activity-item">
                    <div class="activity-icon">✅</div>
                    <div class="activity-content">
                      <h4 class="activity-title">Application Submitted</h4>
                      <p class="activity-description">Stanford University application for Alex completed and submitted</p>
                      <span class="activity-time">2 hours ago</span>
                    </div>
                  </div>
                  
                  <div class="activity-item">
                    <div class="activity-icon">💬</div>
                    <div class="activity-content">
                      <h4 class="activity-title">Message from Counselor</h4>
                      <p class="activity-description">Sarah Martinez sent recommendations for backup schools</p>
                      <span class="activity-time">5 hours ago</span>
                    </div>
                  </div>
                  
                  <div class="activity-item">
                    <div class="activity-icon">💰</div>
                    <div class="activity-content">
                      <h4 class="activity-title">Financial Aid Update</h4>
                      <p class="activity-description">FAFSA processing completed for both children</p>
                      <span class="activity-time">1 day ago</span>
                    </div>
                  </div>
                  
                  <div class="activity-item">
                    <div class="activity-icon">📅</div>
                    <div class="activity-content">
                      <h4 class="activity-title">Meeting Scheduled</h4>
                      <p class="activity-description">College counseling session booked for next week</p>
                      <span class="activity-time">2 days ago</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Settings & Preferences -->
            <div class="profile-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="title-icon">⚙️</span>
                  Preferences
                </h2>
              </div>
              <div class="section-content">
                <div class="preferences-grid">
                  <div class="preference-card">
                    <div class="preference-info">
                      <h4 class="preference-title">Email Notifications</h4>
                      <p class="preference-description">Receive updates about applications and deadlines</p>
                    </div>
                    <div class="preference-control">
                      <label class="toggle-switch">
                        <input type="checkbox" data-preference="emailNotifications" onclick="togglePreference('emailNotifications')">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="preference-card">
                    <div class="preference-info">
                      <h4 class="preference-title">SMS Notifications</h4>
                      <p class="preference-description">Get urgent notifications via text message</p>
                    </div>
                    <div class="preference-control">
                      <label class="toggle-switch">
                        <input type="checkbox" data-preference="smsNotifications" onclick="togglePreference('smsNotifications')">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="preference-card">
                    <div class="preference-info">
                      <h4 class="preference-title">Application Deadlines</h4>
                      <p class="preference-description">Receive reminders for upcoming deadlines</p>
                    </div>
                    <div class="preference-control">
                      <label class="toggle-switch">
                        <input type="checkbox" data-preference="applicationDeadlines" onclick="togglePreference('applicationDeadlines')">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="preference-card">
                    <div class="preference-info">
                      <h4 class="preference-title">Financial Updates</h4>
                      <p class="preference-description">Get notified about payment updates and bills</p>
                    </div>
                    <div class="preference-control">
                      <label class="toggle-switch">
                        <input type="checkbox" data-preference="financialUpdates" onclick="togglePreference('financialUpdates')">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="preference-card">
                    <div class="preference-info">
                      <h4 class="preference-title">Child Progress</h4>
                      <p class="preference-description">Receive updates about your children's academic progress</p>
                    </div>
                    <div class="preference-control">
                      <label class="toggle-switch">
                        <input type="checkbox" data-preference="childProgress" onclick="togglePreference('childProgress')">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="preference-card">
                    <div class="preference-info">
                      <h4 class="preference-title">Public Profile</h4>
                      <p class="preference-description">Make your profile visible to other parents</p>
                    </div>
                    <div class="preference-control">
                      <label class="toggle-switch">
                        <input type="checkbox" data-preference="publicProfile" onclick="togglePreference('publicProfile')">
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <div class="footer-logo">
            <img src="/assets/img/logo.PNG" alt="Flow Logo" class="footer-logo-img">
            <h3 class="footer-title">Flow</h3>
          </div>
          <p class="footer-description">Empowering students and families through their university journey with comprehensive support and guidance.</p>
          <div class="footer-social">
            <a href="#" class="social-link" onclick="openSocialMedia('facebook')">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
            <a href="#" class="social-link" onclick="openSocialMedia('twitter')">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23 3A10.9 10.9 0 0 1 20.1 4.1C19.2 3.4 18 3 16.8 3C14.4 3 12.4 5 12.4 7.3C12.4 7.6 12.4 7.9 12.5 8.2C8.3 8 4.7 6.1 2.4 3.1C2 3.8 1.8 4.6 1.8 5.4C1.8 7 2.7 8.4 4 9.2C3.3 9.2 2.7 9 2.1 8.7V8.8C2.1 10.8 3.7 12.4 5.7 12.8C5.3 12.9 4.9 13 4.5 13C4.2 13 3.9 13 3.6 12.9C4.2 14.5 5.9 15.7 7.9 15.7C6.3 16.9 4.3 17.6 2.1 17.6H1.5C3.4 18.9 5.7 19.6 8.1 19.6C16.8 19.6 21.6 13.1 21.6 7.6V7C22.4 6.4 23.1 5.7 23.7 4.8L23 3Z" fill="currentColor"/>
              </svg>
            </a>
            <a href="#" class="social-link" onclick="openSocialMedia('instagram')">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5" stroke="currentColor" stroke-width="2"/>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37Z" stroke="currentColor" stroke-width="2"/>
                <path d="M17.5 6.5H17.51" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
            <a href="#" class="social-link" onclick="openSocialMedia('linkedin')">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 8A6 6 0 0 1 6 18C6 18 6 18 6 18H18A4 4 0 0 0 18 10A4 4 0 0 0 14 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M20.2 7.8L16 12L11.8 7.8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          </div>
        </div>
        <div class="footer-section">
          <h4 class="footer-heading">Quick Links</h4>
          <ul class="footer-links">
            <li><a href="#dashboard">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                <rect x="14" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                <rect x="14" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                <rect x="3" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
              </svg>
              Dashboard
            </a></li>
            <li><a href="#applications">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z" stroke="currentColor" stroke-width="2"/>
                <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
                <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"/>
                <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2"/>
                <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2"/>
              </svg>
              Applications
            </a></li>
            <li><a href="#finance">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="12" y1="1" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
                <path d="M17 5H9.5A3.5 3.5 0 0 0 9.5 12H14.5A3.5 3.5 0 0 1 14.5 19H6" stroke="currentColor" stroke-width="2"/>
              </svg>
              Finance
            </a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4 class="footer-heading">Support</h4>
          <ul class="footer-links">
            <li><a href="#help" onclick="openHelpCenter()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M9.09 9A3 3 0 0 1 12 6C14.21 6 16 7.79 16 10S14.21 14 12 14V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M12 20H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              Help Center
            </a></li>
            <li><a href="#contact" onclick="openContactForm()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 16.92V19A2 2 0 0 1 20 21A19 19 0 0 1 2 3A2 2 0 0 1 4 1H7.08A2 2 0 0 1 9 2.92L9 6A2 2 0 0 1 7.92 8L6 8.5A16 16 0 0 0 15.5 18L16 16.08A2 2 0 0 1 18 15H21.08A2 2 0 0 1 23 16.92Z" stroke="currentColor" stroke-width="2"/>
              </svg>
              Contact Us
            </a></li>
            <li><a href="#faq" onclick="openFAQ()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 11H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M9 15H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M16 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V8L16 3Z" stroke="currentColor" stroke-width="2"/>
                <path d="M16 3V8H21" stroke="currentColor" stroke-width="2"/>
              </svg>
              FAQ
            </a></li>
            <li><a href="#privacy" onclick="openPrivacyPolicy()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="11" width="18" height="10" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                <circle cx="12" cy="16" r="1" stroke="currentColor" stroke-width="2"/>
                <path d="M7 11V7A5 5 0 0 1 17 7V11" stroke="currentColor" stroke-width="2"/>
              </svg>
              Privacy Policy
            </a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4 class="footer-heading">Resources</h4>
          <ul class="footer-links">
            <li><a href="#resources" onclick="openSecurityCenter()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7V10C2 16 6 20.5 12 22C18 20.5 22 16 22 10V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Security & Privacy
            </a></li>
            <li><a href="#tutorials" onclick="openTutorials()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <polygon points="10,8 16,12 10,16 10,8" fill="currentColor"/>
              </svg>
              Video Tutorials
            </a></li>
            <li><a href="#updates" onclick="openUpdates()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 16V8A2 2 0 0 0 19 6H5A2 2 0 0 0 3 8V16A2 2 0 0 0 5 18H19A2 2 0 0 0 21 16Z" stroke="currentColor" stroke-width="2"/>
                <path d="M7 2V6" stroke="currentColor" stroke-width="2"/>
                <path d="M17 2V6" stroke="currentColor" stroke-width="2"/>
                <path d="M7 10H17" stroke="currentColor" stroke-width="2"/>
                <path d="M7 14H12" stroke="currentColor" stroke-width="2"/>
              </svg>
              Latest Updates
            </a></li>
            <li><a href="#community" onclick="openCommunity()">
              <svg class="link-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 21V19A4 4 0 0 0 13 15H5A4 4 0 0 0 1 19V21" stroke="currentColor" stroke-width="2"/>
                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                <path d="M23 21V19A4 4 0 0 0 16 15.13" stroke="currentColor" stroke-width="2"/>
                <path d="M16 3.13A4 4 0 0 1 16 11" stroke="currentColor" stroke-width="2"/>
              </svg>
              Community Forum
            </a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 Flow Education Platform. All rights reserved.</p>
        <p>Built with ❤️ for students and families</p>
      </div>
    </div>
  </footer>

  <!-- Advanced Settings Panel -->
  <div class="settings-overlay" id="settingsOverlay" onclick="closeSettings()"></div>
  <div class="settings-panel" id="settingsPanel">
    <div class="settings-header">
      <h2>⚙️ Advanced Settings</h2>
      <button class="settings-close" onclick="closeSettings()">×</button>
    </div>
    <div class="settings-content">
      <!-- Appearance Settings -->
      <div class="settings-group">
        <h3><span class="settings-icon">🎨</span> Appearance</h3>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Dark Mode</span>
            <span class="setting-description">Switch between light and dark themes</span>
          </div>
          <div class="setting-toggle" id="darkModeToggle" onclick="toggleDarkMode()"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Compact View</span>
            <span class="setting-description">Reduce spacing for more information</span>
          </div>
          <div class="setting-toggle" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Animations</span>
            <span class="setting-description">Enable smooth transitions and effects</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
      </div>

      <!-- Children Controls -->
      <div class="settings-group">
        <h3><span class="settings-icon">👨‍👩‍👧‍👦</span> Children Controls</h3>
        <div class="children-list">
          <div class="child-item">
            <div class="child-avatar">
              <img src="/assets/img/child1.jpg" alt="Emma" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
              <div class="child-initial">E</div>
            </div>
            <div class="child-info">
              <div class="child-name">Emma Johnson</div>
              <div class="child-status">Senior • 18 years old</div>
            </div>
            <div class="child-controls">
              <button class="control-btn" onclick="manageChild('emma')">Manage</button>
              <div class="setting-toggle active" onclick="toggleChildAccess(this, 'emma')"></div>
            </div>
          </div>
          <div class="child-item">
            <div class="child-avatar">
              <img src="/assets/img/child2.jpg" alt="Alex" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
              <div class="child-initial">A</div>
            </div>
            <div class="child-info">
              <div class="child-name">Alex Johnson</div>
              <div class="child-status">Sophomore • 16 years old</div>
            </div>
            <div class="child-controls">
              <button class="control-btn" onclick="manageChild('alex')">Manage</button>
              <div class="setting-toggle active" onclick="toggleChildAccess(this, 'alex')"></div>
            </div>
          </div>
        </div>
        <button class="add-child-btn" onclick="addChild()">
          <span>➕ Add Another Child</span>
        </button>
      </div>

      <!-- Notification Settings -->
      <div class="settings-group">
        <h3><span class="settings-icon">🔔</span> Notifications</h3>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Email Notifications</span>
            <span class="setting-description">Receive updates via email</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">SMS Alerts</span>
            <span class="setting-description">Critical updates via text message</span>
          </div>
          <div class="setting-toggle" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Push Notifications</span>
            <span class="setting-description">Real-time notifications in browser</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Deadline Reminders</span>
            <span class="setting-description">Automatic reminders for important dates</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
      </div>

      <!-- Security & Privacy -->
      <div class="settings-group">
        <h3><span class="settings-icon">🔒</span> Security & Privacy</h3>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Two-Factor Authentication</span>
            <span class="setting-description">Add extra security to your account</span>
          </div>
          <button class="setup-btn" onclick="setup2FA()">Setup</button>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Data Sharing</span>
            <span class="setting-description">Share analytics for service improvement</span>
          </div>
          <div class="setting-toggle" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Activity Tracking</span>
            <span class="setting-description">Track usage for personalized experience</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Auto-Lock Session</span>
            <span class="setting-description">Automatically log out after inactivity</span>
          </div>
          <select class="setting-select" onchange="updateAutoLock(this.value)">
            <option value="15">15 minutes</option>
            <option value="30" selected>30 minutes</option>
            <option value="60">1 hour</option>
            <option value="120">2 hours</option>
            <option value="never">Never</option>
          </select>
        </div>
      </div>

      <!-- Financial Controls -->
      <div class="settings-group">
        <h3><span class="settings-icon">💳</span> Financial Controls</h3>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Payment Approval Required</span>
            <span class="setting-description">Require approval for payments over threshold</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Spending Limit</span>
            <span class="setting-description">Monthly spending threshold</span>
          </div>
          <div class="setting-input-group">
            <span class="input-prefix">$</span>
            <input type="number" class="setting-input" value="2000" min="0" max="10000" onchange="updateSpendingLimit(this.value)">
          </div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Budget Alerts</span>
            <span class="setting-description">Notify when approaching budget limits</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
      </div>

      <!-- Communication Preferences -->
      <div class="settings-group">
        <h3><span class="settings-icon">💬</span> Communication</h3>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Message Encryption</span>
            <span class="setting-description">End-to-end encryption for messages</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Read Receipts</span>
            <span class="setting-description">Show when messages are read</span>
          </div>
          <div class="setting-toggle active" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Auto-Reply</span>
            <span class="setting-description">Automatic response when unavailable</span>
          </div>
          <div class="setting-toggle" onclick="toggleSetting(this)"></div>
        </div>
      </div>

      <!-- Advanced Features -->
      <div class="settings-group">
        <h3><span class="settings-icon">⚡</span> Advanced</h3>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Beta Features</span>
            <span class="setting-description">Access experimental features</span>
          </div>
          <div class="setting-toggle" onclick="toggleSetting(this)"></div>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Data Export</span>
            <span class="setting-description">Download your data</span>
          </div>
          <button class="export-btn" onclick="exportData()">Export</button>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Reset Settings</span>
            <span class="setting-description">Restore default settings</span>
          </div>
          <button class="reset-btn" onclick="resetSettings()">Reset</button>
        </div>
      </div>

      <!-- Settings Footer -->
      <div class="settings-footer">
        <div class="settings-version">
          <span>Version 2.1.0</span>
          <button class="update-btn" onclick="checkUpdates()">Check for Updates</button>
        </div>
        <div class="settings-actions">
          <button class="btn btn-secondary" onclick="closeSettings()">Cancel</button>
          <button class="btn" onclick="saveSettings()">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings FAB -->
  <button class="settings-fab" onclick="openSettings()">⚙️</button>

  <!-- Temporary Development Link - Parent Onboarding -->
  <a href="onboarding.html" class="temp-dev-link" title="Parent Onboarding (Dev Link)">
    🚀 Onboarding
  </a>

  <!-- Quick Pay Modal -->
  <div id="quickPayModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Quick Payment</h3>
        <span class="close" onclick="closeModal('quickPayModal')">&times;</span>
      </div>
      <div class="modal-body">
        <form id="quickPayForm">
          <div class="form-group">
            <label for="paymentType">Payment Type</label>
            <select id="paymentType" name="paymentType" required>
              <option value="">Select payment type</option>
              <option value="application-fee">Application Fee</option>
              <option value="deposit">Enrollment Deposit</option>
              <option value="tuition">Tuition Payment</option>
              <option value="housing">Housing Deposit</option>
              <option value="meal-plan">Meal Plan</option>
              <option value="books">Books & Supplies</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label for="paymentAmount">Amount ($)</label>
            <input type="number" id="paymentAmount" name="amount" placeholder="0.00" min="1" step="0.01" required>
          </div>
          <div class="form-group">
            <label for="paymentInstitution">Institution</label>
            <input type="text" id="paymentInstitution" name="institution" placeholder="Enter institution name" required>
          </div>
          <div class="form-group">
            <label for="paymentMethod">Payment Method</label>
            <select id="paymentMethod" name="paymentMethod" required>
              <option value="">Select payment method</option>
              <option value="credit-card">Credit Card</option>
              <option value="debit-card">Debit Card</option>
              <option value="bank-transfer">Bank Transfer</option>
              <option value="saved-payment">Saved Payment Method</option>
            </select>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal('quickPayModal')">Cancel</button>
            <button type="submit" class="btn btn-primary">Process Payment</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Schedule Modal -->
  <div id="scheduleModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Schedule Meeting</h3>
        <span class="close" onclick="closeModal('scheduleModal')">&times;</span>
      </div>
      <div class="modal-body">
        <form id="scheduleForm">
          <div class="form-group">
            <label for="meetingType">Meeting Type</label>
            <select id="meetingType" name="meetingType" required>
              <option value="">Select meeting type</option>
              <option value="counselor">Academic Counselor</option>
              <option value="financial">Financial Aid Advisor</option>
              <option value="admissions">Admissions Officer</option>
              <option value="parent-teacher">Parent-Teacher Conference</option>
              <option value="college-prep">College Preparation</option>
              <option value="career-guidance">Career Guidance</option>
              <option value="interview">Interview Preparation</option>
            </select>
          </div>
          <div class="form-group">
            <label for="meetingDate">Preferred Date</label>
            <input type="date" id="meetingDate" name="date" required>
          </div>
          <div class="form-group">
            <label for="meetingTime">Preferred Time</label>
            <input type="time" id="meetingTime" name="time" required>
          </div>
          <div class="form-group">
            <label for="meetingFormat">Meeting Format</label>
            <select id="meetingFormat" name="format" required>
              <option value="">Select format</option>
              <option value="in-person">In-Person</option>
              <option value="video-call">Video Call</option>
              <option value="phone-call">Phone Call</option>
            </select>
          </div>
          <div class="form-group">
            <label for="meetingNotes">Notes</label>
            <textarea id="meetingNotes" name="notes" rows="3" placeholder="Any additional notes or specific topics you'd like to discuss..."></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal('scheduleModal')">Cancel</button>
            <button type="submit" class="btn btn-primary">Schedule Meeting</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        const section = item.dataset.section;
        showSection(section);
        
        // Update active nav item
        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
        item.classList.add('active');
      });
    });

    function showSection(sectionId) {
      // Remove active class from all sections
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      
      // Remove active class from all nav items
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      
      // Add active class to target section
      const targetSection = document.getElementById(sectionId);
      if (targetSection) {
        targetSection.classList.add('active');
      }
      
      // Add active class to corresponding nav item
      const targetNavItem = document.querySelector(`[data-section="${sectionId}"]`);
      if (targetNavItem) {
        targetNavItem.classList.add('active');
      }
      
      // Update URL hash without triggering page reload
      if (window.location.hash !== `#${sectionId}`) {
        window.history.pushState(null, null, `#${sectionId}`);
      }
    }

    // Initialize navigation system
    function initializeNavigation() {
      // Set up nav item click handlers
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.addEventListener('click', (e) => {
          e.preventDefault();
          const sectionId = item.dataset.section;
          showSection(sectionId);
        });
      });

      // Handle browser back/forward buttons
      window.addEventListener('popstate', () => {
        handleHashChange();
      });

      // Handle initial page load and hash changes
      handleHashChange();
    }

    // Handle hash changes (page load, refresh, navigation)
    function handleHashChange() {
      const hash = window.location.hash.slice(1); // Remove the # symbol
      const validSections = ['dashboard', 'applications', 'finance', 'messages', 'profile'];
      
      // Default to dashboard if no hash or invalid hash
      const targetSection = validSections.includes(hash) ? hash : 'dashboard';
      
      // Update URL if it was invalid
      if (hash !== targetSection) {
        window.history.replaceState(null, null, `#${targetSection}`);
      }
      
      showSection(targetSection);
    }

    // Profile Data Management
    let profileData = {
      name: 'Sarah Johnson',
      title: 'Parent & Education Advocate',
      bio: 'Dedicated parent of two amazing children, passionate about educational opportunities and community involvement. Active in school board meetings and college preparation.',
      location: 'Portland, Oregon',
      joinDate: '2020-01-15',
      email: 'sarah.johnson@email.com',
      phone: '(555) 123-4567',
      address: '1234 Oak Street, Portland, OR 97201',
      emergency: 'Michael Johnson',
      emergencyPhone: '(555) 987-6543',
      children: [
        {
          id: 1,
          name: 'Emily Johnson',
          age: 17,
          grade: '12',
          school: 'Lincoln High School',
          interests: 'Biology, Volleyball, Community Service',
          gpa: 3.8
        },
        {
          id: 2,
          name: 'Alex Johnson',
          age: 15,
          grade: '10',
          school: 'Lincoln High School',
          interests: 'Computer Science, Chess Club, Robotics',
          gpa: 3.9
        }
      ],
      preferences: {
        emailNotifications: true,
        smsNotifications: false,
        applicationDeadlines: true,
        financialUpdates: true,
        childProgress: true,
        publicProfile: false
      },
      activities: [
        {
          id: 1,
          type: 'applications',
          title: 'Application submitted to Stanford University',
          description: 'Emily\'s application for Stanford University was successfully submitted.',
          date: '2024-12-05',
          time: '2:30 PM'
        },
        {
          id: 2,
          type: 'messages',
          title: 'Message from College Counselor',
          description: 'New message regarding scholarship opportunities.',
          date: '2024-12-04',
          time: '10:15 AM'
        },
        {
          id: 3,
          type: 'finance',
          title: 'Payment processed for application fees',
          description: 'Application fee payment of $75 processed successfully.',
          date: '2024-12-03',
          time: '4:45 PM'
        },
        {
          id: 4,
          type: 'profile',
          title: 'Profile updated',
          description: 'Contact information was updated.',
          date: '2024-12-02',
          time: '11:20 AM'
        },
        {
          id: 5,
          type: 'applications',
          title: 'Application deadline reminder',
          description: 'Reminder: UC Berkeley application due in 3 days.',
          date: '2024-12-01',
          time: '9:00 AM'
        }
      ]
    };

    function initializeProfileData() {
      // Load data from localStorage if available
      const savedData = localStorage.getItem('profileData');
      if (savedData) {
        profileData = { ...profileData, ...JSON.parse(savedData) };
      }
      updateProfileDisplay();
      setupFormHandlers();
    }

    function saveProfileData() {
      localStorage.setItem('profileData', JSON.stringify(profileData));
      updateProfileDisplay();
    }

    function updateProfileDisplay() {
      // Update profile header
      const nameElement = document.querySelector('.profile-name');
      const titleElement = document.querySelector('.profile-title');
      if (nameElement) nameElement.textContent = profileData.name;
      if (titleElement) titleElement.textContent = profileData.title;

      // Update profile stats
      const childrenCountElement = document.querySelector('.children-count');
      if (childrenCountElement) {
        childrenCountElement.textContent = profileData.children.length;
      }

      // Update about section
      const bioElement = document.querySelector('.about-text');
      if (bioElement) bioElement.textContent = profileData.bio;

      // Update contact info
      const emailElement = document.querySelector('.contact-email');
      const phoneElement = document.querySelector('.contact-phone');
      const addressElement = document.querySelector('.contact-address');
      if (emailElement) emailElement.textContent = profileData.email;
      if (phoneElement) phoneElement.textContent = profileData.phone;
      if (addressElement) addressElement.textContent = profileData.address;

      // Update children cards
      updateChildrenDisplay();

      // Update preferences
      updatePreferencesDisplay();
    }

    function updateChildrenDisplay() {
      const childrenContainer = document.querySelector('.children-info .info-content');
      if (!childrenContainer) return;

      childrenContainer.innerHTML = profileData.children.map(child => `
        <div class="child-card" data-child-id="${child.id}">
          <div class="child-header">
            <div class="child-avatar">
              <span class="child-initial">${child.name.charAt(0)}</span>
            </div>
            <div class="child-details">
              <h4>${child.name}</h4>
              <p>Age ${child.age} • Grade ${child.grade}</p>
              <p class="child-school">${child.school}</p>
            </div>
            <div class="child-actions">
              <button class="action-btn" onclick="viewChildProfile(${child.id})" title="View Profile">
                <span class="btn-icon">👤</span>
              </button>
              <button class="action-btn" onclick="editChild(${child.id})" title="Edit">
                <span class="btn-icon">✏️</span>
              </button>
            </div>
          </div>
          <div class="child-info">
            <div class="child-interests">
              <strong>Interests:</strong> ${child.interests}
            </div>
            ${child.gpa ? `<div class="child-gpa"><strong>GPA:</strong> ${child.gpa}</div>` : ''}
          </div>
        </div>
      `).join('');
    }

    function updatePreferencesDisplay() {
      Object.keys(profileData.preferences).forEach(key => {
        const toggle = document.querySelector(`input[data-preference="${key}"]`);
        if (toggle) {
          toggle.checked = profileData.preferences[key];
        }
      });
    }

    // Modal Functions
    function openModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.add('show');
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      }
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.remove('show');
        document.body.style.overflow = 'auto';
        
        // Use setTimeout to allow animation to complete before hiding
        setTimeout(() => {
          if (!modal.classList.contains('show')) {
            modal.style.display = 'none';
          }
        }, 300);
      }
    }

    // Profile Page Functions
    function editProfile() {
      // Populate form with current data
      document.getElementById('profileName').value = profileData.name;
      document.getElementById('profileTitle').value = profileData.title;
      document.getElementById('profileBio').value = profileData.bio;
      document.getElementById('profileLocation').value = profileData.location;
      document.getElementById('profileJoinDate').value = profileData.joinDate;
      
      openModal('editProfileModal');
    }

    function editAbout() {
      editProfile();
    }

    function editContact() {
      // Populate contact form with current data
      document.getElementById('contactEmail').value = profileData.email;
      document.getElementById('contactPhone').value = profileData.phone;
      document.getElementById('contactAddress').value = profileData.address;
      document.getElementById('contactEmergency').value = profileData.emergency;
      document.getElementById('contactEmergencyPhone').value = profileData.emergencyPhone;
      
      openModal('editContactModal');
    }

    function addChild() {
      // Clear form for new child
      document.getElementById('childForm').reset();
      document.getElementById('childId').value = '';
      document.getElementById('childModalTitle').textContent = 'Add Child';
      
      openModal('childModal');
    }

    function viewChildProfile(childId) {
      const child = profileData.children.find(c => c.id === childId);
      if (child) {
        alert(`${child.name}'s Profile:\n\nAge: ${child.age}\nGrade: ${child.grade}\nSchool: ${child.school}\nInterests: ${child.interests}${child.gpa ? `\nGPA: ${child.gpa}` : ''}`);
      }
    }

    function editChild(childId) {
      const child = profileData.children.find(c => c.id === childId);
      if (child) {
        // Populate form with child data
        document.getElementById('childId').value = child.id;
        document.getElementById('childName').value = child.name;
        document.getElementById('childAge').value = child.age;
        document.getElementById('childGrade').value = child.grade;
        document.getElementById('childSchool').value = child.school;
        document.getElementById('childInterests').value = child.interests;
        document.getElementById('childGPA').value = child.gpa || '';
        document.getElementById('childModalTitle').textContent = 'Edit Child';
        
        openModal('childModal');
      }
    }

    function contactVia(method, value) {
      if (method === 'email') {
        window.open(`mailto:${value}`);
      } else if (method === 'phone') {
        window.open(`tel:${value}`);
      }
    }

    function viewMap() {
      const address = encodeURIComponent(profileData.address);
      window.open(`https://www.google.com/maps/search/?api=1&query=${address}`, '_blank');
    }

    function viewAllActivity() {
      displayAllActivities();
      openModal('activityModal');
    }

    function displayAllActivities() {
      const activitiesList = document.getElementById('allActivitiesList');
      if (!activitiesList) return;

      activitiesList.innerHTML = profileData.activities.map(activity => `
        <div class="activity-item">
          <div class="activity-header">
            <span class="activity-type ${activity.type}">${activity.type.charAt(0).toUpperCase() + activity.type.slice(1)}</span>
            <span class="activity-date">${activity.date} at ${activity.time}</span>
          </div>
          <h5>${activity.title}</h5>
          <p>${activity.description}</p>
        </div>
      `).join('');
    }

    function applyActivityFilters() {
      const filterTypes = [];
      if (document.getElementById('filterApplications').checked) filterTypes.push('applications');
      if (document.getElementById('filterMessages').checked) filterTypes.push('messages');
      if (document.getElementById('filterFinance').checked) filterTypes.push('finance');
      if (document.getElementById('filterProfile').checked) filterTypes.push('profile');

      const startDate = document.getElementById('startDate').value;
      const endDate = document.getElementById('endDate').value;

      let filteredActivities = profileData.activities.filter(activity => {
        const typeMatch = filterTypes.length === 0 || filterTypes.includes(activity.type);
        const dateMatch = (!startDate || activity.date >= startDate) && 
                         (!endDate || activity.date <= endDate);
        return typeMatch && dateMatch;
      });

      const activitiesList = document.getElementById('allActivitiesList');
      if (!activitiesList) return;

      activitiesList.innerHTML = filteredActivities.map(activity => `
        <div class="activity-item">
          <div class="activity-header">
            <span class="activity-type ${activity.type}">${activity.type.charAt(0).toUpperCase() + activity.type.slice(1)}</span>
            <span class="activity-date">${activity.date} at ${activity.time}</span>
          </div>
          <h5>${activity.title}</h5>
          <p>${activity.description}</p>
        </div>
      `).join('');
    }

    function togglePreference(preference) {
      const toggle = event.target;
      const isEnabled = toggle.checked;
      profileData.preferences[preference] = isEnabled;
      saveProfileData();
      
      // Show confirmation
      const prefName = preference.replace(/([A-Z])/g, ' $1').toLowerCase();
      showNotification(`${prefName.charAt(0).toUpperCase() + prefName.slice(1)} ${isEnabled ? 'enabled' : 'disabled'}`, 'success');
    }

    function changeAvatar() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.onchange = function(e) {
        const file = e.target.files[0];
        if (file) {
          // Validate file size (max 5MB)
          if (file.size > 5 * 1024 * 1024) {
            showNotification('File size must be less than 5MB', 'error');
            return;
          }

          // Validate file type
          if (!file.type.startsWith('image/')) {
            showNotification('Please select a valid image file', 'error');
            return;
          }

          const reader = new FileReader();
          reader.onload = function(e) {
            const avatarImg = document.querySelector('.profile-avatar img');
            if (avatarImg) {
              avatarImg.src = e.target.result;
              // Save to localStorage
              profileData.avatar = e.target.result;
              saveProfileData();
              showNotification('Avatar updated successfully!', 'success');
            }
          };
          reader.readAsDataURL(file);
        }
      };
      input.click();
    }

    function setupFormHandlers() {
      // Profile form handler
      const profileForm = document.getElementById('editProfileForm');
      if (profileForm) {
        profileForm.onsubmit = function(e) {
          e.preventDefault();
          profileData.name = document.getElementById('profileName').value;
          profileData.title = document.getElementById('profileTitle').value;
          profileData.bio = document.getElementById('profileBio').value;
          profileData.location = document.getElementById('profileLocation').value;
          profileData.joinDate = document.getElementById('profileJoinDate').value;
          
          saveProfileData();
          closeModal('editProfileModal');
          showNotification('Profile updated successfully!', 'success');
        };
      }

      // Contact form handler
      const contactForm = document.getElementById('editContactForm');
      if (contactForm) {
        contactForm.onsubmit = function(e) {
          e.preventDefault();
          profileData.email = document.getElementById('contactEmail').value;
          profileData.phone = document.getElementById('contactPhone').value;
          profileData.address = document.getElementById('contactAddress').value;
          profileData.emergency = document.getElementById('contactEmergency').value;
          profileData.emergencyPhone = document.getElementById('contactEmergencyPhone').value;
          
          saveProfileData();
          closeModal('editContactModal');
          showNotification('Contact information updated successfully!', 'success');
        };
      }

      // Child form handler
      const childForm = document.getElementById('childForm');
      if (childForm) {
        childForm.onsubmit = function(e) {
          e.preventDefault();
          const childData = {
            name: document.getElementById('childName').value,
            age: parseInt(document.getElementById('childAge').value),
            grade: document.getElementById('childGrade').value,
            school: document.getElementById('childSchool').value,
            interests: document.getElementById('childInterests').value,
            gpa: parseFloat(document.getElementById('childGPA').value) || null
          };

          const childId = document.getElementById('childId').value;
          if (childId) {
            // Update existing child
            const childIndex = profileData.children.findIndex(c => c.id === parseInt(childId));
            if (childIndex !== -1) {
              profileData.children[childIndex] = { ...profileData.children[childIndex], ...childData };
              showNotification('Child information updated successfully!', 'success');
            }
          } else {
            // Add new child
            childData.id = Date.now(); // Simple ID generation
            profileData.children.push(childData);
            showNotification('Child added successfully!', 'success');
          }
          
          saveProfileData();
          closeModal('childModal');
        };
      }
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 10001;
        padding: 16px 24px;
        border-radius: 8px;
        color: white;
        font-weight: 500;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateX(100%);
        transition: transform 0.3s ease;
        ${type === 'success' ? 'background: #10b981;' : 
          type === 'error' ? 'background: #ef4444;' : 
          'background: #3b82f6;'}
      `;
      
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Additional profile features
    function shareProfile() {
      if (navigator.share) {
        navigator.share({
          title: `${profileData.name}'s Profile`,
          text: `Check out ${profileData.name}'s profile in the FlowEdu Parent Portal`,
          url: window.location.href + '#profile'
        }).catch(console.error);
      } else {
        // Fallback: copy to clipboard
        navigator.clipboard.writeText(window.location.href + '#profile').then(() => {
          showNotification('Profile link copied to clipboard!', 'success');
        }).catch(() => {
          showNotification('Unable to share profile', 'error');
        });
      }
    }

    function downloadProfile() {
      const profileSummary = `
${profileData.name} - Profile Summary
==========================================

Personal Information:
- Name: ${profileData.name}
- Title: ${profileData.title}
- Location: ${profileData.location}
- Member Since: ${profileData.joinDate}

Bio: ${profileData.bio}

Contact Information:
- Email: ${profileData.email}
- Phone: ${profileData.phone}
- Address: ${profileData.address}

Emergency Contact:
- Name: ${profileData.emergency}
- Phone: ${profileData.emergencyPhone}

Children:
${profileData.children.map(child => `
- ${child.name} (Age ${child.age}, Grade ${child.grade})
  School: ${child.school}
  Interests: ${child.interests}
  ${child.gpa ? `GPA: ${child.gpa}` : ''}
`).join('')}

Generated on: ${new Date().toLocaleDateString()}
      `;

      const blob = new Blob([profileSummary], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${profileData.name.replace(/\s+/g, '_')}_Profile.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      showNotification('Profile downloaded successfully!', 'success');
    }

    // Settings
    function openSettings() {
      document.getElementById('settingsOverlay').classList.add('show');
      document.getElementById('settingsPanel').classList.add('show');
    }

    function closeSettings() {
      document.getElementById('settingsOverlay').classList.remove('show');
      document.getElementById('settingsPanel').classList.remove('show');
    }

    function toggleSetting(toggle) {
      toggle.classList.toggle('active');
      
      // Save setting to localStorage
      const settingLabel = toggle.parentElement.querySelector('.setting-label');
      if (settingLabel) {
        const settingName = settingLabel.textContent;
        const isActive = toggle.classList.contains('active');
        localStorage.setItem(`setting_${settingName.replace(/\s+/g, '_').toLowerCase()}`, isActive);
      }
    }

    // Dark Mode Functions
    function toggleDarkMode() {
      const toggle = document.getElementById('darkModeToggle');
      const body = document.body;
      
      toggle.classList.toggle('active');
      
      if (toggle.classList.contains('active')) {
        body.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      } else {
        body.removeAttribute('data-theme');
        localStorage.setItem('theme', 'light');
      }
    }

    // Initialize theme on page load
    function initializeTheme() {
      const savedTheme = localStorage.getItem('theme');
      const toggle = document.getElementById('darkModeToggle');
      
      if (savedTheme === 'dark') {
        document.body.setAttribute('data-theme', 'dark');
        if (toggle) toggle.classList.add('active');
      }
    }

    // Children Management Functions
    function manageChild(childId) {
      alert(`Managing settings for child: ${childId}`);
      // This would open a detailed child management modal
    }

    function toggleChildAccess(toggle, childId) {
      toggle.classList.toggle('active');
      const hasAccess = toggle.classList.contains('active');
      localStorage.setItem(`child_access_${childId}`, hasAccess);
      
      if (hasAccess) {
        alert(`Access enabled for ${childId}`);
      } else {
        alert(`Access disabled for ${childId}`);
      }
    }

    function addChild() {
      const childName = prompt('Enter child name:');
      const childAge = prompt('Enter child age:');
      
      if (childName && childAge) {
        alert(`Added child: ${childName}, Age: ${childAge}`);
        // This would add the child to the interface
      }
    }

    // Advanced Settings Functions
    function setup2FA() {
      alert('Two-Factor Authentication setup would open here');
    }

    function updateAutoLock(minutes) {
      localStorage.setItem('auto_lock_minutes', minutes);
      alert(`Auto-lock set to ${minutes === 'never' ? 'never' : minutes + ' minutes'}`);
    }

    function updateSpendingLimit(amount) {
      localStorage.setItem('spending_limit', amount);
      alert(`Spending limit updated to $${amount}`);
    }

    function exportData() {
      alert('Data export would begin here');
      // This would generate and download user data
    }

    function resetSettings() {
      if (confirm('Are you sure you want to reset all settings to default?')) {
        localStorage.clear();
        location.reload();
      }
    }

    function checkUpdates() {
      alert('Checking for updates...');
      setTimeout(() => {
        alert('You are using the latest version!');
      }, 1000);
    }

    function saveSettings() {
      alert('Settings saved successfully!');
      closeSettings();
    }

    // Initialize settings when page loads
    function initializeSettings() {
      initializeTheme();
      
      // Load saved settings
      const settingToggles = document.querySelectorAll('.setting-toggle');
      settingToggles.forEach(toggle => {
        const settingLabel = toggle.parentElement.querySelector('.setting-label');
        if (settingLabel) {
          const settingName = settingLabel.textContent.replace(/\s+/g, '_').toLowerCase();
          const savedValue = localStorage.getItem(`setting_${settingName}`);
          
          if (savedValue === 'true') {
            toggle.classList.add('active');
          } else if (savedValue === 'false') {
            toggle.classList.remove('active');
          }
        }
      });
      
      // Load spending limit
      const spendingInput = document.querySelector('.setting-input');
      if (spendingInput) {
        const savedLimit = localStorage.getItem('spending_limit');
        if (savedLimit) {
          spendingInput.value = savedLimit;
        }
      }
      
      // Load auto-lock setting
      const autoLockSelect = document.querySelector('.setting-select');
      if (autoLockSelect) {
        const savedAutoLock = localStorage.getItem('auto_lock_minutes');
        if (savedAutoLock) {
          autoLockSelect.value = savedAutoLock;
        }
      }
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', initializeSettings);

    // Dashboard Modals
    function openQuickPayModal() {
      openModal('quickPayModal');
    }

    function openScheduleModal() {
      openModal('scheduleModal');
    }

    function processPayment(event) {
      event.preventDefault();
      
      // Get form data
      const formData = new FormData(event.target);
      const paymentData = {
        type: formData.get('paymentType'),
        amount: formData.get('amount'),
        institution: formData.get('institution'),
        method: formData.get('paymentMethod')
      };

      // Simulate processing
      const processingNotification = showNotification('Processing payment...', 'info');
      
      setTimeout(() => {
        // Clear processing notification
        if (processingNotification && processingNotification.parentNode) {
          processingNotification.parentNode.removeChild(processingNotification);
        }
        
        // Add payment to activity log
        const newActivity = {
          id: Date.now(),
          type: 'finance',
          title: `Payment processed for ${paymentData.institution}`,
          description: `${paymentData.type} payment of $${paymentData.amount} processed via ${paymentData.method}.`,
          date: new Date().toISOString().split('T')[0],
          time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
        };
        
        if (typeof profileData !== 'undefined') {
          profileData.activities.unshift(newActivity);
          saveProfileData();
        }
        
        closeModal('quickPayModal');
        showNotification(`Payment of $${paymentData.amount} processed successfully!`, 'success');
        
        // Reset form
        event.target.reset();
      }, 2000);
    }

    function scheduleMeeting(event) {
      event.preventDefault();
      
      // Get form data
      const formData = new FormData(event.target);
      const meetingData = {
        type: formData.get('meetingType'),
        date: formData.get('date'),
        time: formData.get('time'),
        format: formData.get('format'),
        notes: formData.get('notes')
      };

      // Format the meeting type for display
      const typeNames = {
        'counselor': 'Academic Counselor',
        'financial': 'Financial Aid Advisor',
        'admissions': 'Admissions Officer',
        'parent-teacher': 'Parent-Teacher Conference',
        'college-prep': 'College Preparation',
        'career-guidance': 'Career Guidance',
        'interview': 'Interview Preparation'
      };

      // Add meeting to activity log
      const newActivity = {
        id: Date.now(),
        type: 'messages',
        title: `Meeting scheduled with ${typeNames[meetingData.type]}`,
        description: `${meetingData.format} meeting scheduled for ${meetingData.date} at ${meetingData.time}.${meetingData.notes ? ` Notes: ${meetingData.notes}` : ''}`,
        date: new Date().toISOString().split('T')[0],
        time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
      };
      
      if (typeof profileData !== 'undefined') {
        profileData.activities.unshift(newActivity);
        saveProfileData();
      }
      
      closeModal('scheduleModal');
      showNotification(`Meeting with ${typeNames[meetingData.type]} scheduled for ${meetingData.date}!`, 'success');
      
      // Reset form
      event.target.reset();
    }

    function setupDashboardForms() {
      // Quick Pay form handler
      const quickPayForm = document.getElementById('quickPayForm');
      if (quickPayForm) {
        quickPayForm.onsubmit = processPayment;
      }

      // Schedule form handler
      const scheduleForm = document.getElementById('scheduleForm');
      if (scheduleForm) {
        scheduleForm.onsubmit = scheduleMeeting;
      }
    }

    function refreshDashboard() {
      // Get the refresh button
      const refreshBtn = event.target;
      
      // Add spinning animation
      refreshBtn.style.transform = 'rotate(360deg)';
      refreshBtn.style.transition = 'transform 0.5s ease';
      
      // Disable button temporarily
      refreshBtn.disabled = true;
      refreshBtn.style.opacity = '0.6';
      
      // Simulate data refresh
      setTimeout(() => {
        // Reset button
        refreshBtn.style.transform = '';
        refreshBtn.disabled = false;
        refreshBtn.style.opacity = '1';
        
        // Update dashboard stats (simulate fresh data)
        updateDashboardStats();
        
        // Show success notification
        showNotification('Dashboard refreshed successfully!', 'success');
      }, 1500);
    }

    function updateDashboardStats() {
      // Simulate updating dashboard stats with fresh data
      const stats = {
        applications: Math.floor(Math.random() * 3) + 5, // 5-7
        pending: Math.floor(Math.random() * 2) + 2, // 2-3
        messages: Math.floor(Math.random() * 5) + 8, // 8-12
        balance: (Math.random() * 2000 + 3000).toFixed(2) // $3000-$5000
      };

      // Update stat cards if they exist
      const applicationsStat = document.querySelector('.stat-card:nth-child(1) .stat-number');
      const pendingStat = document.querySelector('.stat-card:nth-child(2) .stat-number');
      const messagesStat = document.querySelector('.stat-card:nth-child(3) .stat-number');
      const balanceStat = document.querySelector('.stat-card:nth-child(4) .stat-number');

      if (applicationsStat) applicationsStat.textContent = stats.applications;
      if (pendingStat) pendingStat.textContent = stats.pending;
      if (messagesStat) messagesStat.textContent = stats.messages;
      if (balanceStat) balanceStat.textContent = `$${stats.balance}`;

      // Add a subtle animation to show the update
      document.querySelectorAll('.stat-card').forEach(card => {
        card.style.transform = 'scale(1.02)';
        setTimeout(() => {
          card.style.transform = 'scale(1)';
        }, 200);
      });
    }


    // Close settings when clicking overlay
    document.getElementById('settingsOverlay').addEventListener('click', closeSettings);

    // Application functions
    function addNewApplication() {
      alert('Add New Application feature coming soon!');
    }

    function bulkActions() {
      alert('Bulk Actions feature coming soon!');
    }

    function exportApplications() {
      alert('Export Applications feature coming soon!');
    }

    function viewApplication(university) {
      alert(`Viewing application details for ${university}`);
    }

    function trackApplication(university) {
      alert(`Tracking application status for ${university}`);
    }

    function continueApplication(university) {
      alert(`Continuing application for ${university}`);
    }

    function payFee(university) {
      alert(`Payment process for ${university} application fee`);
    }

    function resolveIssue(university) {
      alert(`Resolving issue for ${university} application`);
    }

    function contactSupport(university) {
      alert(`Contacting support for ${university} application`);
    }

    // Finance functions
    function makePayment() {
      alert('Make Payment feature coming soon!');
    }

    function setupBudget() {
      alert('Setup Budget feature coming soon!');
    }

    function exportFinances() {
      alert('Export Financial Report feature coming soon!');
    }

    // Messages functions

    function scheduleCall() {
      alert('Schedule Call feature coming soon!');
    }


    function startVideoCall() {
      alert('Starting video call...');
    }

    function startVoiceCall() {
      alert('Starting voice call...');
    }

    function showContactInfo() {
      alert('Contact information feature coming soon!');
    }



    function clearSearch() {
      const searchInput = document.getElementById('messageSearch');
      const clearBtn = document.getElementById('clearSearchBtn');
      
      searchInput.value = '';
      clearBtn.style.display = 'none';
      
      // Show all conversations
      document.querySelectorAll('.conversation-item').forEach(conversation => {
        conversation.style.display = 'flex';
      });
    }

    function filterByType(type) {
      // Update active tab
      document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
      
      const conversations = document.querySelectorAll('.conversation-item');
      
      conversations.forEach(conversation => {
        let show = true;
        
        switch(type) {
          case 'unread':
            show = conversation.getAttribute('data-unread') === 'true';
            break;
          case 'important':
            show = conversation.getAttribute('data-important') === 'true';
            break;
          case 'all':
          default:
            show = true;
            break;
        }
        
        conversation.style.display = show ? 'flex' : 'none';
      });
    }

    function composeNewMessage() {
      alert('Opening new message composer...');
      // This would open a new message composer modal
    }

    function searchInConversation() {
      alert('Search in conversation feature would open here');
    }

    function startVideoCall() {
      alert('Starting video call...');
      // This would integrate with a video calling service
    }

    function startVoiceCall() {
      alert('Starting voice call...');
      // This would integrate with a voice calling service
    }

    function toggleFavorite() {
      const btn = event.target.closest('.header-btn');
      const icon = btn.querySelector('.btn-icon');
      
      if (icon.textContent === '⭐') {
        icon.textContent = '☆';
        alert('Removed from favorites');
      } else {
        icon.textContent = '⭐';
        alert('Added to favorites');
      }
    }

    function showConversationMenu() {
      alert('Conversation menu would appear here with options like:\n- Mute notifications\n- Archive conversation\n- Block contact\n- Export conversation');
    }

    function addReaction(emoji) {
      alert(`Added reaction: ${emoji}`);
      // This would send the reaction to the server
    }

    function showReactionPicker() {
      const reactions = ['👍', '❤️', '😊', '😂', '😮', '😢', '😡'];
      const picker = reactions.map(emoji => 
        `<button onclick="addReaction('${emoji}')" style="background:none;border:none;font-size:1.5rem;padding:0.5rem;cursor:pointer;">${emoji}</button>`
      ).join('');
      
      // Create temporary reaction picker
      const pickerDiv = document.createElement('div');
      pickerDiv.innerHTML = `
        <div style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:1rem;z-index:10000;box-shadow:0 8px 32px var(--shadow-medium);">
          <div style="margin-bottom:1rem;font-weight:600;color:var(--text-primary);">Choose a reaction:</div>
          <div style="display:flex;gap:0.5rem;margin-bottom:1rem;">${picker}</div>
          <button onclick="this.closest('div').remove()" style="background:var(--accent-color);color:white;border:none;padding:0.5rem 1rem;border-radius:6px;cursor:pointer;">Close</button>
        </div>
      `;
      document.body.appendChild(pickerDiv);
    }

    function replyToMessage() {
      alert('Reply feature would quote this message in the composer');
    }

    function forwardMessage() {
      alert('Forward message feature would open contact selector');
    }

    function saveMessage() {
      alert('Message saved to bookmarks');
    }

    function attachFile() {
      const input = document.createElement('input');
      input.type = 'file';
      input.multiple = true;
      input.accept = '.pdf,.doc,.docx,.txt,.jpg,.png,.gif';
      
      input.onchange = function(e) {
        const files = Array.from(e.target.files);
        if (files.length > 0) {
          const fileNames = files.map(f => f.name).join(', ');
          alert(`Selected files: ${fileNames}`);
          // This would upload and attach the files
        }
      };
      
      input.click();
    }

    function insertEmoji() {
      const commonEmojis = ['😊', '👍', '❤️', '😂', '🤔', '👏', '🙏', '💪'];
      const input = document.getElementById('messageInput');
      
      // Create emoji picker
      const pickerDiv = document.createElement('div');
      pickerDiv.innerHTML = `
        <div style="position:fixed;bottom:200px;right:2rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:1rem;z-index:10000;box-shadow:0 8px 32px var(--shadow-medium);width:250px;">
          <div style="margin-bottom:1rem;font-weight:600;color:var(--text-primary);">Quick Emojis:</div>
          <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:0.5rem;margin-bottom:1rem;">
            ${commonEmojis.map(emoji => 
              `<button onclick="insertEmojiIntoInput('${emoji}')" style="background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;padding:0.5rem;font-size:1.2rem;cursor:pointer;transition:all 0.3s ease;" onmouseover="this.style.background='var(--accent-color)'" onmouseout="this.style.background='var(--bg-tertiary)'">${emoji}</button>`
            ).join('')}
          </div>
          <button onclick="this.closest('div').remove()" style="background:var(--accent-color);color:white;border:none;padding:0.5rem 1rem;border-radius:6px;cursor:pointer;width:100%;">Close</button>
        </div>
      `;
      document.body.appendChild(pickerDiv);
    }

    function insertEmojiIntoInput(emoji) {
      const input = document.getElementById('messageInput');
      const cursorPos = input.selectionStart;
      const textBefore = input.value.substring(0, cursorPos);
      const textAfter = input.value.substring(cursorPos);
      
      input.value = textBefore + emoji + textAfter;
      input.focus();
      input.setSelectionRange(cursorPos + emoji.length, cursorPos + emoji.length);
      
      // Remove emoji picker
      document.querySelector('div[style*="position:fixed"]').remove();
      
      // Update character count
      updateCharacterCount();
    }

    function scheduleMessage() {
      const datetime = prompt('Enter date and time to send (YYYY-MM-DD HH:MM):');
      if (datetime) {
        alert(`Message scheduled for: ${datetime}`);
        // This would schedule the message
      }
    }

    function addGif() {
      alert('GIF picker would open here with trending GIFs');
    }

    function voiceMessage() {
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        alert('Voice recording would start here');
        // This would start voice recording
      } else {
        alert('Voice recording not supported in your browser');
      }
    }

    function handleInputResize() {
      const input = document.getElementById('messageInput');
      input.style.height = 'auto';
      input.style.height = Math.min(input.scrollHeight, 120) + 'px';
      
      updateCharacterCount();
    }

    function updateCharacterCount() {
      const input = document.getElementById('messageInput');
      const counter = document.getElementById('charCount');
      const sendBtn = document.getElementById('sendBtn');
      
      if (counter) {
        counter.textContent = input.value.length;
        
        // Update send button state
        if (sendBtn) {
          sendBtn.disabled = input.value.trim().length === 0;
        }
        
        // Color coding for character count
        if (input.value.length > 900) {
          counter.style.color = 'var(--error-color)';
        } else if (input.value.length > 800) {
          counter.style.color = 'var(--warning-color)';
        } else {
          counter.style.color = 'var(--text-tertiary)';
        }
      }
    }

    function showTyping() {
      const typingIndicator = document.getElementById('typingIndicator');
      if (typingIndicator) {
        typingIndicator.style.display = 'flex';
        
        // Hide after 3 seconds of no typing
        clearTimeout(window.typingTimer);
        window.typingTimer = setTimeout(() => {
          typingIndicator.style.display = 'none';
        }, 3000);
      }
    }

    function handleKeyDown(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendEnhancedMessage();
      }
    }

    function sendEnhancedMessage() {
      const input = document.getElementById('messageInput');
      const priorityCheckbox = document.getElementById('priorityMessage');
      const readReceiptCheckbox = document.getElementById('readReceipt');
      
      if (input.value.trim()) {
        const messageData = {
          text: input.value,
          priority: priorityCheckbox?.checked || false,
          readReceipt: readReceiptCheckbox?.checked || false,
          timestamp: new Date().toISOString()
        };
        
        alert(`Enhanced message sent:\n${JSON.stringify(messageData, null, 2)}`);
        
        // Clear input and reset
        input.value = '';
        input.style.height = 'auto';
        if (priorityCheckbox) priorityCheckbox.checked = false;
        if (readReceiptCheckbox) readReceiptCheckbox.checked = false;
        
        updateCharacterCount();
        
        // Hide typing indicator
        const typingIndicator = document.getElementById('typingIndicator');
        if (typingIndicator) {
          typingIndicator.style.display = 'none';
        }
      }
    }

    function downloadAttachment() {
      alert('Downloading attachment...');
      // This would download the file
    }

    function useTemplate(templateType) {
      const templates = {
        followup: "Thank you for your previous message. I wanted to follow up on...",
        thanks: "Thank you so much for your help with this matter. I really appreciate...",
        question: "I have a question regarding... Could you please clarify...",
        urgent: "URGENT: This requires immediate attention. Please respond as soon as possible regarding..."
      };
      
      const input = document.getElementById('messageInput');
      if (input) {
        input.value = templates[templateType] || '';
        input.focus();
        handleInputResize();
        hideTemplates();
      }
    }

    function hideTemplates() {
      const templates = document.getElementById('messageTemplates');
      if (templates) {
        templates.style.display = 'none';
      }
    }

    function showTemplates() {
      const templates = document.getElementById('messageTemplates');
      if (templates) {
        templates.style.display = 'block';
      }
    }

    function toggleMobileSidebar() {
      const sidebar = document.querySelector('.enhanced-sidebar');
      const overlay = document.querySelector('.sidebar-overlay');
      
      if (sidebar && overlay) {
        sidebar.classList.toggle('show');
        overlay.classList.toggle('show');
      }
    }

    // Initialize enhanced messages when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Set up initial character count
      updateCharacterCount();
      
      // Add template button to toolbar
      const toolbar = document.querySelector('.compose-toolbar');
      if (toolbar) {
        const templateBtn = document.createElement('button');
        templateBtn.className = 'toolbar-btn';
        templateBtn.title = 'Message templates';
        templateBtn.innerHTML = '<span class="btn-icon">📝</span>';
        templateBtn.onclick = showTemplates;
        toolbar.appendChild(templateBtn);
      }
    });

    // Footer functionality
    function openSocialMedia(platform) {
      const urls = {
        facebook: 'https://facebook.com/flowedupaltform',
        twitter: 'https://twitter.com/floweduplatform',
        instagram: 'https://instagram.com/floweduplatform',
        linkedin: 'https://linkedin.com/company/floweduplatform'
      };
      
      if (urls[platform]) {
        window.open(urls[platform], '_blank');
      } else {
        alert(`Opening ${platform} social media page...`);
      }
    }

    function openHelpCenter() {
      window.location.href = 'help-center.html';
    }

    function openContactForm() {
      window.location.href = 'contact.html';
    }

    function openFAQ() {
      window.location.href = 'faq.html';
    }

    function openPrivacyPolicy() {
      window.location.href = 'privacy.html';
    }

    function openSecurityCenter() {
      window.location.href = 'security.html';
    }

    function openTutorials() {
      window.location.href = 'tutorials.html';
    }

    function openUpdates() {
      window.location.href = 'updates.html';
    }

    function openCommunity() {
      window.location.href = 'community.html';
    }










    // ====== MODERN MESSAGES FUNCTIONALITY ======

    // Message Variables
    let currentConversation = 'sarah';
    let typingTimeout;
    let isTyping = false;

    // Filter Messages
    function filterMessages(filterType) {
      const tabs = document.querySelectorAll('.filter-tab');
      const conversations = document.querySelectorAll('.conversation-card');
      
      tabs.forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      
      conversations.forEach(conv => {
        const isUnread = conv.dataset.unread === 'true';
        const isPriority = conv.querySelector('.priority-badge');
        
        switch(filterType) {
          case 'unread':
            conv.style.display = isUnread ? 'flex' : 'none';
            break;
          case 'priority':
            conv.style.display = isPriority ? 'flex' : 'none';
            break;
          case 'archived':
            conv.style.display = 'none'; // No archived messages in demo
            break;
          default:
            conv.style.display = 'flex';
        }
      });
    }

    // Switch Conversation
    function switchConversation(conversationId) {
      const cards = document.querySelectorAll('.conversation-card');
      cards.forEach(card => card.classList.remove('active'));
      
      const selectedCard = document.querySelector(`[data-conversation="${conversationId}"]`);
      if (selectedCard) {
        selectedCard.classList.add('active');
        currentConversation = conversationId;
        
        // Update chat header with selected conversation
        updateChatHeader(conversationId);
      }
    }

    // Update Chat Header
    function updateChatHeader(conversationId) {
      const conversations = {
        'sarah': {
          name: 'Sarah Martinez',
          role: 'College Counselor at Stanford University',
          avatar: '/assets/img/counselor1.jpg',
          status: 'online'
        },
        'michael': {
          name: 'Michael Davis',
          role: 'Academic Advisor at MIT',
          avatar: '/assets/img/counselor2.jpg',
          status: 'away'
        },
        'jennifer': {
          name: 'Jennifer Lopez',
          role: 'Financial Aid Officer',
          avatar: '/assets/img/advisor1.jpg',
          status: 'offline'
        },
        'alex': {
          name: 'Alex Rodriguez',
          role: 'Math Tutor',
          avatar: '/assets/img/tutor1.jpg',
          status: 'online'
        }
      };

      const conversation = conversations[conversationId];
      if (conversation) {
        document.querySelector('.contact-name-large').textContent = conversation.name;
        document.querySelector('.contact-status').innerHTML = `
          <span class="status-dot ${conversation.status}"></span>
          ${conversation.status.charAt(0).toUpperCase() + conversation.status.slice(1)} • ${conversation.role}
        `;
        
        const avatarImg = document.querySelector('.contact-avatar-large img');
        const avatarFallback = document.querySelector('.avatar-fallback-large');
        avatarImg.src = conversation.avatar;
        avatarImg.style.display = 'block';
        avatarFallback.style.display = 'none';
      }
    }

    // Send Message
    function sendMessage() {
      const input = document.getElementById('messageInput');
      const message = input.value.trim();
      
      if (!message) return;
      
      const messagesArea = document.getElementById('messagesArea');
      const highPriority = document.getElementById('highPriority').checked;
      const readReceipt = document.getElementById('readReceipt').checked;
      
      // Create sent message
      const messageGroup = document.createElement('div');
      messageGroup.className = 'message-group sent';
      messageGroup.innerHTML = `
        <div class="message-content">
          <div class="message-bubble">
            <p>${message}</p>
          </div>
          <div class="message-meta">
            <span class="message-time">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
            <span class="message-status">✓</span>
          </div>
        </div>
      `;
      
      messagesArea.appendChild(messageGroup);
      messagesArea.scrollTop = messagesArea.scrollHeight;
      
      // Clear input
      input.value = '';
      updateCharCount();
      updateSendButton();
      
      // Show typing indicator after a delay
      setTimeout(() => {
        showTypingIndicator();
        
        // Auto-reply after typing
        setTimeout(() => {
          hideTypingIndicator();
          addAutoReply();
        }, 2000);
      }, 1000);
    }

    // Show Typing Indicator
    function showTypingIndicator() {
      const indicator = document.getElementById('typingIndicator');
      if (indicator) {
        indicator.style.display = 'flex';
        const messagesArea = document.getElementById('messagesArea');
        messagesArea.scrollTop = messagesArea.scrollHeight;
      }
    }

    // Hide Typing Indicator
    function hideTypingIndicator() {
      const indicator = document.getElementById('typingIndicator');
      if (indicator) {
        indicator.style.display = 'none';
      }
    }

    // Add Auto Reply
    function addAutoReply() {
      const messagesArea = document.getElementById('messagesArea');
      const replies = [
        "Thank you for your message! I'll review this and get back to you shortly.",
        "Great question! Let me gather some information and respond with details.",
        "I appreciate you reaching out. I'll have an update for you soon.",
        "Excellent progress! Keep up the great work on your applications.",
        "I'll schedule some time to discuss this further. Expect to hear from me today."
      ];
      
      const randomReply = replies[Math.floor(Math.random() * replies.length)];
      
      const messageGroup = document.createElement('div');
      messageGroup.className = 'message-group received';
      messageGroup.innerHTML = `
        <div class="message-avatar">
          <img src="/assets/img/counselor1.jpg" alt="Sarah" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="avatar-fallback">SM</div>
        </div>
        <div class="message-content">
          <div class="message-bubble">
            <p>${randomReply}</p>
          </div>
          <div class="message-meta">
            <span class="message-time">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
          </div>
        </div>
      `;
      
      messagesArea.appendChild(messageGroup);
      messagesArea.scrollTop = messagesArea.scrollHeight;
    }

    // Handle Input Resize
    function handleInputResize() {
      const input = document.getElementById('messageInput');
      if (input) {
        input.style.height = 'auto';
        input.style.height = Math.min(input.scrollHeight, 120) + 'px';
      }
    }

    // Update Character Count
    function updateCharCount() {
      const input = document.getElementById('messageInput');
      const counter = document.getElementById('charCount');
      
      if (input && counter) {
        counter.textContent = input.value.length;
        
        if (input.value.length > 800) {
          counter.style.color = '#ef4444';
        } else if (input.value.length > 600) {
          counter.style.color = '#f59e0b';
        } else {
          counter.style.color = 'var(--text-secondary)';
        }
      }
    }

    // Update Send Button
    function updateSendButton() {
      const input = document.getElementById('messageInput');
      const sendBtn = document.getElementById('sendButton');
      
      if (input && sendBtn) {
        sendBtn.disabled = !input.value.trim();
      }
    }

    // Show Typing Indicator While User Types
    function showTypingIndicator() {
      if (!isTyping) {
        isTyping = true;
        // This would send a typing indicator to other users
      }
      
      clearTimeout(typingTimeout);
      typingTimeout = setTimeout(() => {
        isTyping = false;
        // This would stop the typing indicator
      }, 1000);
    }

    // Handle Key Press
    function handleKeyPress(event) {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
      }
    }

    // Toggle Reaction
    function toggleReaction(button, emoji) {
      button.classList.toggle('active');
      const countSpan = button.querySelector('.reaction-count');
      if (countSpan) {
        let count = parseInt(countSpan.textContent) || 0;
        count = button.classList.contains('active') ? count + 1 : Math.max(0, count - 1);
        countSpan.textContent = count;
      }
    }

    // Show Reaction Picker
    function showReactionPicker(button) {
      const emojis = ['👍', '❤️', '😂', '😢', '😮', '😡'];
      const picker = document.createElement('div');
      picker.className = 'reaction-picker';
      picker.innerHTML = emojis.map(emoji => 
        `<button onclick="addReaction('${emoji}', this)" class="emoji-option">${emoji}</button>`
      ).join('');
      
      picker.style.cssText = `
        position: absolute;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 0.5rem;
        display: flex;
        gap: 0.25rem;
        z-index: 1000;
        box-shadow: 0 4px 12px var(--shadow-medium);
      `;
      
      document.body.appendChild(picker);
      
      const rect = button.getBoundingClientRect();
      picker.style.top = (rect.top - picker.offsetHeight - 5) + 'px';
      picker.style.left = rect.left + 'px';
      
      // Remove picker when clicking outside
      setTimeout(() => {
        const closeOnClick = (e) => {
          if (!picker.contains(e.target)) {
            picker.remove();
            document.removeEventListener('click', closeOnClick);
          }
        };
        document.addEventListener('click', closeOnClick);
      }, 100);
    }

    // Add Reaction
    function addReaction(emoji, button) {
      const messageGroup = button.closest('.message-group');
      const reactionsContainer = messageGroup.querySelector('.message-reactions');
      
      if (reactionsContainer) {
        const existingReaction = Array.from(reactionsContainer.children).find(child => 
          child.textContent.includes(emoji)
        );
        
        if (existingReaction) {
          toggleReaction(existingReaction, emoji);
        } else {
          const newReaction = document.createElement('button');
          newReaction.className = 'reaction-btn active';
          newReaction.innerHTML = `${emoji} <span class="reaction-count">1</span>`;
          newReaction.onclick = () => toggleReaction(newReaction, emoji);
          reactionsContainer.insertBefore(newReaction, reactionsContainer.lastElementChild);
        }
      }
      
      button.closest('.reaction-picker').remove();
    }

    // Header Action Functions
    function composeNewMessage() {
      document.getElementById('messageInput').focus();
    }

    function openVideoCall() {
      alert('Video call feature would be implemented here');
    }

    function startVoiceCall() {
      alert('Voice call feature would be implemented here');
    }

    function startVideoCall() {
      alert('Video call feature would be implemented here');
    }

    function shareScreen() {
      alert('Screen sharing feature would be implemented here');
    }

    function scheduleAppointment() {
      alert('Appointment scheduling feature would be implemented here');
    }

    function openChatInfo() {
      alert('Chat information panel would be implemented here');
    }

    // Toolbar Functions
    function attachFile() {
      const input = document.createElement('input');
      input.type = 'file';
      input.multiple = true;
      input.onchange = (e) => {
        const files = Array.from(e.target.files);
        files.forEach(file => {
          console.log('File selected:', file.name);
          // File upload logic would go here
        });
      };
      input.click();
    }

    function insertEmoji() {
      const emojis = ['😀', '😂', '🥰', '😎', '🤔', '👍', '❤️', '🎉', '🚀', '💯'];
      const picker = document.createElement('div');
      picker.className = 'emoji-picker';
      picker.innerHTML = emojis.map(emoji => 
        `<button onclick="insertEmojiIntoInput('${emoji}')" class="emoji-option">${emoji}</button>`
      ).join('');
      
      picker.style.cssText = `
        position: fixed;
        bottom: 200px;
        right: 2rem;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 1rem;
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 0.5rem;
        z-index: 1000;
        box-shadow: 0 8px 32px var(--shadow-medium);
      `;
      
      document.body.appendChild(picker);
      
      setTimeout(() => {
        const closeOnClick = (e) => {
          if (!picker.contains(e.target)) {
            picker.remove();
            document.removeEventListener('click', closeOnClick);
          }
        };
        document.addEventListener('click', closeOnClick);
      }, 100);
    }

    function insertEmojiIntoInput(emoji) {
      const input = document.getElementById('messageInput');
      const cursorPos = input.selectionStart;
      const textBefore = input.value.substring(0, cursorPos);
      const textAfter = input.value.substring(cursorPos);
      
      input.value = textBefore + emoji + textAfter;
      input.focus();
      input.setSelectionRange(cursorPos + emoji.length, cursorPos + emoji.length);
      
      updateCharCount();
      updateSendButton();
      
      document.querySelector('.emoji-picker')?.remove();
    }

    function addGif() {
      alert('GIF picker would be implemented here');
    }

    function voiceMessage() {
      alert('Voice message recording would be implemented here');
    }

    function scheduleMessage() {
      alert('Message scheduling would be implemented here');
    }

    function toggleBold() {
      document.execCommand('bold');
    }

    function toggleItalic() {
      document.execCommand('italic');
    }

    function addLink() {
      const url = prompt('Enter URL:');
      if (url) {
        document.execCommand('createLink', false, url);
      }
    }

    // Quick Actions
    function useTemplate(templateType) {
      const templates = {
        'followup': "I wanted to follow up on our previous conversation. Could you please provide an update on...",
        'thank-you': "Thank you so much for your help and guidance. I really appreciate...",
        'question': "I have a question about... Could you please clarify...",
        'meeting-request': "I would like to schedule a meeting to discuss... Would you be available for...",
        'urgent': "This is urgent. I need immediate assistance with...",
        'reminder': "This is a friendly reminder about..."
      };
      
      const template = templates[templateType];
      if (template) {
        const input = document.getElementById('messageInput');
        input.value = template;
        input.focus();
        updateCharCount();
        updateSendButton();
      }
      
      closeQuickActions();
    }

    function openQuickActions() {
      const panel = document.getElementById('quickActionsPanel');
      if (panel) {
        panel.classList.add('show');
      }
    }

    function closeQuickActions() {
      const panel = document.getElementById('quickActionsPanel');
      if (panel) {
        panel.classList.remove('show');
      }
    }

    // File Download
    function downloadFile(filename) {
      alert(`Downloading: ${filename}`);
    }

    // Global Search
    function searchMessages() {
      const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
      const conversations = document.querySelectorAll('.conversation-card');
      
      conversations.forEach(conv => {
        const name = conv.querySelector('.contact-name').textContent.toLowerCase();
        const message = conv.querySelector('.last-message').textContent.toLowerCase();
        const role = conv.querySelector('.contact-role').textContent.toLowerCase();
        
        const matches = name.includes(searchTerm) || message.includes(searchTerm) || role.includes(searchTerm);
        conv.style.display = matches ? 'flex' : 'none';
      });
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Set up conversation click handlers
      const conversationCards = document.querySelectorAll('.conversation-card');
      conversationCards.forEach(card => {
        card.addEventListener('click', () => {
          const conversationId = card.dataset.conversation;
          switchConversation(conversationId);
        });
      });

      // Set up filter tab handlers
      const filterTabs = document.querySelectorAll('.filter-tab');
      filterTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const filterType = tab.dataset.filter;
          filterMessages(filterType);
        });
      });

      // Set up input handlers
      const messageInput = document.getElementById('messageInput');
      if (messageInput) {
        messageInput.addEventListener('input', () => {
          handleInputResize();
          updateCharCount();
          updateSendButton();
          showTypingIndicator();
        });
        
        messageInput.addEventListener('keydown', handleKeyPress);
      }

      // Set up search handler
      const globalSearch = document.getElementById('globalSearch');
      if (globalSearch) {
        globalSearch.addEventListener('input', searchMessages);
      }

      // Initialize send button state
      updateSendButton();
      
      // Initialize navigation system
      initializeNavigation();
      
      // Initialize profile data management
      initializeProfileData();
      
      // Setup dashboard form handlers
      setupDashboardForms();
      
      // Close modals when clicking outside
      document.addEventListener('click', function(event) {
        if (event.target.classList.contains('modal')) {
          const modalId = event.target.id;
          if (modalId) {
            closeModal(modalId);
          }
        }
      });

      // Close modals with Escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
          const openModal = document.querySelector('.modal.show');
          if (openModal) {
            closeModal(openModal.id);
          }
        }
      });
    });
  </script>

  <!-- Profile Modals -->
  <!-- Edit Profile Modal -->
  <div id="editProfileModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Profile</h3>
        <span class="close" onclick="closeModal('editProfileModal')">&times;</span>
      </div>
      <div class="modal-body">
        <form id="editProfileForm">
          <div class="form-group">
            <label for="profileName">Full Name</label>
            <input type="text" id="profileName" name="name" required>
          </div>
          <div class="form-group">
            <label for="profileTitle">Title</label>
            <input type="text" id="profileTitle" name="title">
          </div>
          <div class="form-group">
            <label for="profileBio">Bio</label>
            <textarea id="profileBio" name="bio" rows="4"></textarea>
          </div>
          <div class="form-group">
            <label for="profileLocation">Location</label>
            <input type="text" id="profileLocation" name="location">
          </div>
          <div class="form-group">
            <label for="profileJoinDate">Member Since</label>
            <input type="date" id="profileJoinDate" name="joinDate">
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal('editProfileModal')">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Edit Contact Modal -->
  <div id="editContactModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Contact Information</h3>
        <span class="close" onclick="closeModal('editContactModal')">&times;</span>
      </div>
      <div class="modal-body">
        <form id="editContactForm">
          <div class="form-group">
            <label for="contactEmail">Email</label>
            <input type="email" id="contactEmail" name="email" required>
          </div>
          <div class="form-group">
            <label for="contactPhone">Phone</label>
            <input type="tel" id="contactPhone" name="phone">
          </div>
          <div class="form-group">
            <label for="contactAddress">Address</label>
            <textarea id="contactAddress" name="address" rows="3"></textarea>
          </div>
          <div class="form-group">
            <label for="contactEmergency">Emergency Contact</label>
            <input type="text" id="contactEmergency" name="emergency">
          </div>
          <div class="form-group">
            <label for="contactEmergencyPhone">Emergency Phone</label>
            <input type="tel" id="contactEmergencyPhone" name="emergencyPhone">
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal('editContactModal')">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Add/Edit Child Modal -->
  <div id="childModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="childModalTitle">Add Child</h3>
        <span class="close" onclick="closeModal('childModal')">&times;</span>
      </div>
      <div class="modal-body">
        <form id="childForm">
          <input type="hidden" id="childId" name="id">
          <div class="form-group">
            <label for="childName">Child's Name</label>
            <input type="text" id="childName" name="name" required>
          </div>
          <div class="form-group">
            <label for="childAge">Age</label>
            <input type="number" id="childAge" name="age" min="0" max="25" required>
          </div>
          <div class="form-group">
            <label for="childGrade">Grade</label>
            <select id="childGrade" name="grade" required>
              <option value="">Select Grade</option>
              <option value="Pre-K">Pre-K</option>
              <option value="K">Kindergarten</option>
              <option value="1">1st Grade</option>
              <option value="2">2nd Grade</option>
              <option value="3">3rd Grade</option>
              <option value="4">4th Grade</option>
              <option value="5">5th Grade</option>
              <option value="6">6th Grade</option>
              <option value="7">7th Grade</option>
              <option value="8">8th Grade</option>
              <option value="9">9th Grade</option>
              <option value="10">10th Grade</option>
              <option value="11">11th Grade</option>
              <option value="12">12th Grade</option>
              <option value="College">College</option>
            </select>
          </div>
          <div class="form-group">
            <label for="childSchool">School</label>
            <input type="text" id="childSchool" name="school">
          </div>
          <div class="form-group">
            <label for="childInterests">Interests</label>
            <textarea id="childInterests" name="interests" rows="3" placeholder="Sports, hobbies, subjects they enjoy..."></textarea>
          </div>
          <div class="form-group">
            <label for="childGPA">GPA (if applicable)</label>
            <input type="number" id="childGPA" name="gpa" min="0" max="4" step="0.1">
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeModal('childModal')">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Child</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Activity Details Modal -->
  <div id="activityModal" class="modal">
    <div class="modal-content large">
      <div class="modal-header">
        <h3>All Activities</h3>
        <span class="close" onclick="closeModal('activityModal')">&times;</span>
      </div>
      <div class="modal-body">
        <div class="activity-filters">
          <h4>Filter Activities</h4>
          <div class="filter-group">
            <label>
              <input type="checkbox" id="filterApplications" checked> Applications
            </label>
            <label>
              <input type="checkbox" id="filterMessages" checked> Messages
            </label>
            <label>
              <input type="checkbox" id="filterFinance" checked> Finance
            </label>
            <label>
              <input type="checkbox" id="filterProfile" checked> Profile Updates
            </label>
          </div>
          <div class="date-range">
            <label for="startDate">From:</label>
            <input type="date" id="startDate">
            <label for="endDate">To:</label>
            <input type="date" id="endDate">
          </div>
          <button class="btn btn-primary" onclick="applyActivityFilters()">Apply Filters</button>
        </div>
        <div id="allActivitiesList" class="activities-list"></div>
      </div>
    </div>
  </div>

</body>
</html>